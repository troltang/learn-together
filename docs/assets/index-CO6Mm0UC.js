(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function jf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bu={exports:{}},lo={},Vu={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Br=Symbol.for("react.element"),Ef=Symbol.for("react.portal"),bf=Symbol.for("react.fragment"),Tf=Symbol.for("react.strict_mode"),Rf=Symbol.for("react.profiler"),Pf=Symbol.for("react.provider"),If=Symbol.for("react.context"),Mf=Symbol.for("react.forward_ref"),Df=Symbol.for("react.suspense"),Lf=Symbol.for("react.memo"),Of=Symbol.for("react.lazy"),va=Symbol.iterator;function Af(e){return e===null||typeof e!="object"?null:(e=va&&e[va]||e["@@iterator"],typeof e=="function"?e:null)}var Qu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xu=Object.assign,Ku={};function Zn(e,t,n){this.props=e,this.context=t,this.refs=Ku,this.updater=n||Qu}Zn.prototype.isReactComponent={};Zn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Yu(){}Yu.prototype=Zn.prototype;function ui(e,t,n){this.props=e,this.context=t,this.refs=Ku,this.updater=n||Qu}var ci=ui.prototype=new Yu;ci.constructor=ui;Xu(ci,Zn.prototype);ci.isPureReactComponent=!0;var wa=Array.isArray,qu=Object.prototype.hasOwnProperty,di={current:null},Ju={key:!0,ref:!0,__self:!0,__source:!0};function Zu(e,t,n){var r,s={},o=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)qu.call(t,r)&&!Ju.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];s.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Br,type:e,key:o,ref:l,props:s,_owner:di.current}}function zf(e,t){return{$$typeof:Br,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fi(e){return typeof e=="object"&&e!==null&&e.$$typeof===Br}function $f(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Sa=/\/+/g;function Po(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$f(""+e.key):t.toString(36)}function xs(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Br:case Ef:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+Po(l,0):r,wa(s)?(n="",e!=null&&(n=e.replace(Sa,"$&/")+"/"),xs(s,t,n,"",function(d){return d})):s!=null&&(fi(s)&&(s=zf(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Sa,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",wa(e))for(var a=0;a<e.length;a++){o=e[a];var u=r+Po(o,a);l+=xs(o,t,n,u,s)}else if(u=Af(e),typeof u=="function")for(e=u.call(e),a=0;!(o=e.next()).done;)o=o.value,u=r+Po(o,a++),l+=xs(o,t,n,u,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Zr(e,t,n){if(e==null)return e;var r=[],s=0;return xs(e,r,"","",function(o){return t.call(n,o,s++)}),r}function Ff(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ie={current:null},ys={transition:null},Hf={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:ys,ReactCurrentOwner:di};function ec(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Zr,forEach:function(e,t,n){Zr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Zr(e,function(){t++}),t},toArray:function(e){return Zr(e,function(t){return t})||[]},only:function(e){if(!fi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Z.Component=Zn;Z.Fragment=bf;Z.Profiler=Rf;Z.PureComponent=ui;Z.StrictMode=Tf;Z.Suspense=Df;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hf;Z.act=ec;Z.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Xu({},e.props),s=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=di.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)qu.call(t,u)&&!Ju.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Br,type:e.type,key:s,ref:o,props:r,_owner:l}};Z.createContext=function(e){return e={$$typeof:If,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Pf,_context:e},e.Consumer=e};Z.createElement=Zu;Z.createFactory=function(e){var t=Zu.bind(null,e);return t.type=e,t};Z.createRef=function(){return{current:null}};Z.forwardRef=function(e){return{$$typeof:Mf,render:e}};Z.isValidElement=fi;Z.lazy=function(e){return{$$typeof:Of,_payload:{_status:-1,_result:e},_init:Ff}};Z.memo=function(e,t){return{$$typeof:Lf,type:e,compare:t===void 0?null:t}};Z.startTransition=function(e){var t=ys.transition;ys.transition={};try{e()}finally{ys.transition=t}};Z.unstable_act=ec;Z.useCallback=function(e,t){return Ie.current.useCallback(e,t)};Z.useContext=function(e){return Ie.current.useContext(e)};Z.useDebugValue=function(){};Z.useDeferredValue=function(e){return Ie.current.useDeferredValue(e)};Z.useEffect=function(e,t){return Ie.current.useEffect(e,t)};Z.useId=function(){return Ie.current.useId()};Z.useImperativeHandle=function(e,t,n){return Ie.current.useImperativeHandle(e,t,n)};Z.useInsertionEffect=function(e,t){return Ie.current.useInsertionEffect(e,t)};Z.useLayoutEffect=function(e,t){return Ie.current.useLayoutEffect(e,t)};Z.useMemo=function(e,t){return Ie.current.useMemo(e,t)};Z.useReducer=function(e,t,n){return Ie.current.useReducer(e,t,n)};Z.useRef=function(e){return Ie.current.useRef(e)};Z.useState=function(e){return Ie.current.useState(e)};Z.useSyncExternalStore=function(e,t,n){return Ie.current.useSyncExternalStore(e,t,n)};Z.useTransition=function(){return Ie.current.useTransition()};Z.version="18.3.1";Vu.exports=Z;var y=Vu.exports;const Uf=jf(y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf=y,Gf=Symbol.for("react.element"),Bf=Symbol.for("react.fragment"),Vf=Object.prototype.hasOwnProperty,Qf=Wf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xf={key:!0,ref:!0,__self:!0,__source:!0};function tc(e,t,n){var r,s={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Vf.call(t,r)&&!Xf.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Gf,type:e,key:o,ref:l,props:s,_owner:Qf.current}}lo.Fragment=Bf;lo.jsx=tc;lo.jsxs=tc;Bu.exports=lo;var i=Bu.exports,fl={},nc={exports:{}},Ve={},rc={exports:{}},sc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(S,R){var $=S.length;S.push(R);e:for(;0<$;){var B=$-1>>>1,j=S[B];if(0<s(j,R))S[B]=R,S[$]=j,$=B;else break e}}function n(S){return S.length===0?null:S[0]}function r(S){if(S.length===0)return null;var R=S[0],$=S.pop();if($!==R){S[0]=$;e:for(var B=0,j=S.length,z=j>>>1;B<z;){var X=2*(B+1)-1,Y=S[X],ae=X+1,I=S[ae];if(0>s(Y,$))ae<j&&0>s(I,Y)?(S[B]=I,S[ae]=$,B=ae):(S[B]=Y,S[X]=$,B=X);else if(ae<j&&0>s(I,$))S[B]=I,S[ae]=$,B=ae;else break e}}return R}function s(S,R){var $=S.sortIndex-R.sortIndex;return $!==0?$:S.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,a=l.now();e.unstable_now=function(){return l.now()-a}}var u=[],d=[],m=1,p=null,g=3,w=!1,v=!1,k=!1,L=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(S){for(var R=n(d);R!==null;){if(R.callback===null)r(d);else if(R.startTime<=S)r(d),R.sortIndex=R.expirationTime,t(u,R);else break;R=n(d)}}function x(S){if(k=!1,h(S),!v)if(n(u)!==null)v=!0,P(N);else{var R=n(d);R!==null&&H(x,R.startTime-S)}}function N(S,R){v=!1,k&&(k=!1,f(D),D=-1),w=!0;var $=g;try{for(h(R),p=n(u);p!==null&&(!(p.expirationTime>R)||S&&!O());){var B=p.callback;if(typeof B=="function"){p.callback=null,g=p.priorityLevel;var j=B(p.expirationTime<=R);R=e.unstable_now(),typeof j=="function"?p.callback=j:p===n(u)&&r(u),h(R)}else r(u);p=n(u)}if(p!==null)var z=!0;else{var X=n(d);X!==null&&H(x,X.startTime-R),z=!1}return z}finally{p=null,g=$,w=!1}}var b=!1,T=null,D=-1,C=5,_=-1;function O(){return!(e.unstable_now()-_<C)}function G(){if(T!==null){var S=e.unstable_now();_=S;var R=!0;try{R=T(!0,S)}finally{R?q():(b=!1,T=null)}}else b=!1}var q;if(typeof c=="function")q=function(){c(G)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,F=V.port2;V.port1.onmessage=G,q=function(){F.postMessage(null)}}else q=function(){L(G,0)};function P(S){T=S,b||(b=!0,q())}function H(S,R){D=L(function(){S(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(S){S.callback=null},e.unstable_continueExecution=function(){v||w||(v=!0,P(N))},e.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<S?Math.floor(1e3/S):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(S){switch(g){case 1:case 2:case 3:var R=3;break;default:R=g}var $=g;g=R;try{return S()}finally{g=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(S,R){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var $=g;g=S;try{return R()}finally{g=$}},e.unstable_scheduleCallback=function(S,R,$){var B=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?B+$:B):$=B,S){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=$+j,S={id:m++,callback:R,priorityLevel:S,startTime:$,expirationTime:j,sortIndex:-1},$>B?(S.sortIndex=$,t(d,S),n(u)===null&&S===n(d)&&(k?(f(D),D=-1):k=!0,H(x,$-B))):(S.sortIndex=j,t(u,S),v||w||(v=!0,P(N))),S},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(S){var R=g;return function(){var $=g;g=R;try{return S.apply(this,arguments)}finally{g=$}}}})(sc);rc.exports=sc;var Kf=rc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf=y,Be=Kf;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oc=new Set,br={};function Sn(e,t){Bn(e,t),Bn(e+"Capture",t)}function Bn(e,t){for(br[e]=t,e=0;e<t.length;e++)oc.add(t[e])}var bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hl=Object.prototype.hasOwnProperty,qf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ka={},Ca={};function Jf(e){return hl.call(Ca,e)?!0:hl.call(ka,e)?!1:qf.test(e)?Ca[e]=!0:(ka[e]=!0,!1)}function Zf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function eh(e,t,n,r){if(t===null||typeof t>"u"||Zf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Me(e,t,n,r,s,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ne[e]=new Me(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ne[t]=new Me(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ne[e]=new Me(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ne[e]=new Me(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ne[e]=new Me(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ne[e]=new Me(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ne[e]=new Me(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ne[e]=new Me(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ne[e]=new Me(e,5,!1,e.toLowerCase(),null,!1,!1)});var hi=/[\-:]([a-z])/g;function pi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hi,pi);Ne[t]=new Me(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hi,pi);Ne[t]=new Me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hi,pi);Ne[t]=new Me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ne[e]=new Me(e,1,!1,e.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ne[e]=new Me(e,1,!1,e.toLowerCase(),null,!0,!0)});function mi(e,t,n,r){var s=Ne.hasOwnProperty(t)?Ne[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(eh(t,n,s,r)&&(n=null),r||s===null?Jf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Mt=Yf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,es=Symbol.for("react.element"),En=Symbol.for("react.portal"),bn=Symbol.for("react.fragment"),gi=Symbol.for("react.strict_mode"),pl=Symbol.for("react.profiler"),lc=Symbol.for("react.provider"),ic=Symbol.for("react.context"),xi=Symbol.for("react.forward_ref"),ml=Symbol.for("react.suspense"),gl=Symbol.for("react.suspense_list"),yi=Symbol.for("react.memo"),Ot=Symbol.for("react.lazy"),ac=Symbol.for("react.offscreen"),Na=Symbol.iterator;function or(e){return e===null||typeof e!="object"?null:(e=Na&&e[Na]||e["@@iterator"],typeof e=="function"?e:null)}var he=Object.assign,Io;function pr(e){if(Io===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Io=t&&t[1]||""}return`
`+Io+e}var Mo=!1;function Do(e,t){if(!e||Mo)return"";Mo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),l=s.length-1,a=o.length-1;1<=l&&0<=a&&s[l]!==o[a];)a--;for(;1<=l&&0<=a;l--,a--)if(s[l]!==o[a]){if(l!==1||a!==1)do if(l--,a--,0>a||s[l]!==o[a]){var u=`
`+s[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=l&&0<=a);break}}}finally{Mo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?pr(e):""}function th(e){switch(e.tag){case 5:return pr(e.type);case 16:return pr("Lazy");case 13:return pr("Suspense");case 19:return pr("SuspenseList");case 0:case 2:case 15:return e=Do(e.type,!1),e;case 11:return e=Do(e.type.render,!1),e;case 1:return e=Do(e.type,!0),e;default:return""}}function xl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bn:return"Fragment";case En:return"Portal";case pl:return"Profiler";case gi:return"StrictMode";case ml:return"Suspense";case gl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ic:return(e.displayName||"Context")+".Consumer";case lc:return(e._context.displayName||"Context")+".Provider";case xi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yi:return t=e.displayName||null,t!==null?t:xl(e.type)||"Memo";case Ot:t=e._payload,e=e._init;try{return xl(e(t))}catch{}}return null}function nh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xl(t);case 8:return t===gi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rh(e){var t=uc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ts(e){e._valueTracker||(e._valueTracker=rh(e))}function cc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=uc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ps(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yl(e,t){var n=t.checked;return he({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _a(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qt(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dc(e,t){t=t.checked,t!=null&&mi(e,"checked",t,!1)}function vl(e,t){dc(e,t);var n=qt(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wl(e,t.type,n):t.hasOwnProperty("defaultValue")&&wl(e,t.type,qt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ja(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function wl(e,t,n){(t!=="number"||Ps(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mr=Array.isArray;function $n(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Sl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return he({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ea(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(mr(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qt(n)}}function fc(e,t){var n=qt(t.value),r=qt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ba(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ns,pc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ns=ns||document.createElement("div"),ns.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ns.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Tr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sh=["Webkit","ms","Moz","O"];Object.keys(yr).forEach(function(e){sh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yr[t]=yr[e]})});function mc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yr.hasOwnProperty(e)&&yr[e]?(""+t).trim():t+"px"}function gc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=mc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var oh=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cl(e,t){if(t){if(oh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function Nl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _l=null;function vi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var jl=null,Fn=null,Hn=null;function Ta(e){if(e=Xr(e)){if(typeof jl!="function")throw Error(M(280));var t=e.stateNode;t&&(t=fo(t),jl(e.stateNode,e.type,t))}}function xc(e){Fn?Hn?Hn.push(e):Hn=[e]:Fn=e}function yc(){if(Fn){var e=Fn,t=Hn;if(Hn=Fn=null,Ta(e),t)for(e=0;e<t.length;e++)Ta(t[e])}}function vc(e,t){return e(t)}function wc(){}var Lo=!1;function Sc(e,t,n){if(Lo)return e(t,n);Lo=!0;try{return vc(e,t,n)}finally{Lo=!1,(Fn!==null||Hn!==null)&&(wc(),yc())}}function Rr(e,t){var n=e.stateNode;if(n===null)return null;var r=fo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var El=!1;if(bt)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){El=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{El=!1}function lh(e,t,n,r,s,o,l,a,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(m){this.onError(m)}}var vr=!1,Is=null,Ms=!1,bl=null,ih={onError:function(e){vr=!0,Is=e}};function ah(e,t,n,r,s,o,l,a,u){vr=!1,Is=null,lh.apply(ih,arguments)}function uh(e,t,n,r,s,o,l,a,u){if(ah.apply(this,arguments),vr){if(vr){var d=Is;vr=!1,Is=null}else throw Error(M(198));Ms||(Ms=!0,bl=d)}}function kn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ra(e){if(kn(e)!==e)throw Error(M(188))}function ch(e){var t=e.alternate;if(!t){if(t=kn(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Ra(s),e;if(o===r)return Ra(s),t;o=o.sibling}throw Error(M(188))}if(n.return!==r.return)n=s,r=o;else{for(var l=!1,a=s.child;a;){if(a===n){l=!0,n=s,r=o;break}if(a===r){l=!0,r=s,n=o;break}a=a.sibling}if(!l){for(a=o.child;a;){if(a===n){l=!0,n=o,r=s;break}if(a===r){l=!0,r=o,n=s;break}a=a.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function Cc(e){return e=ch(e),e!==null?Nc(e):null}function Nc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Nc(e);if(t!==null)return t;e=e.sibling}return null}var _c=Be.unstable_scheduleCallback,Pa=Be.unstable_cancelCallback,dh=Be.unstable_shouldYield,fh=Be.unstable_requestPaint,me=Be.unstable_now,hh=Be.unstable_getCurrentPriorityLevel,wi=Be.unstable_ImmediatePriority,jc=Be.unstable_UserBlockingPriority,Ds=Be.unstable_NormalPriority,ph=Be.unstable_LowPriority,Ec=Be.unstable_IdlePriority,io=null,yt=null;function mh(e){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(io,e,void 0,(e.current.flags&128)===128)}catch{}}var it=Math.clz32?Math.clz32:yh,gh=Math.log,xh=Math.LN2;function yh(e){return e>>>=0,e===0?32:31-(gh(e)/xh|0)|0}var rs=64,ss=4194304;function gr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ls(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var a=l&~s;a!==0?r=gr(a):(o&=l,o!==0&&(r=gr(o)))}else l=n&~s,l!==0?r=gr(l):o!==0&&(r=gr(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-it(t),s=1<<n,r|=e[n],t&=~s;return r}function vh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-it(o),a=1<<l,u=s[l];u===-1?(!(a&n)||a&r)&&(s[l]=vh(a,t)):u<=t&&(e.expiredLanes|=a),o&=~a}}function Tl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bc(){var e=rs;return rs<<=1,!(rs&4194240)&&(rs=64),e}function Oo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-it(t),e[t]=n}function Sh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-it(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Si(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var re=0;function Tc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Rc,ki,Pc,Ic,Mc,Rl=!1,os=[],Wt=null,Gt=null,Bt=null,Pr=new Map,Ir=new Map,zt=[],kh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ia(e,t){switch(e){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":Bt=null;break;case"pointerover":case"pointerout":Pr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ir.delete(t.pointerId)}}function ir(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Xr(t),t!==null&&ki(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Ch(e,t,n,r,s){switch(t){case"focusin":return Wt=ir(Wt,e,t,n,r,s),!0;case"dragenter":return Gt=ir(Gt,e,t,n,r,s),!0;case"mouseover":return Bt=ir(Bt,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Pr.set(o,ir(Pr.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Ir.set(o,ir(Ir.get(o)||null,e,t,n,r,s)),!0}return!1}function Dc(e){var t=ln(e.target);if(t!==null){var n=kn(t);if(n!==null){if(t=n.tag,t===13){if(t=kc(n),t!==null){e.blockedOn=t,Mc(e.priority,function(){Pc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Pl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);_l=r,n.target.dispatchEvent(r),_l=null}else return t=Xr(n),t!==null&&ki(t),e.blockedOn=n,!1;t.shift()}return!0}function Ma(e,t,n){vs(e)&&n.delete(t)}function Nh(){Rl=!1,Wt!==null&&vs(Wt)&&(Wt=null),Gt!==null&&vs(Gt)&&(Gt=null),Bt!==null&&vs(Bt)&&(Bt=null),Pr.forEach(Ma),Ir.forEach(Ma)}function ar(e,t){e.blockedOn===t&&(e.blockedOn=null,Rl||(Rl=!0,Be.unstable_scheduleCallback(Be.unstable_NormalPriority,Nh)))}function Mr(e){function t(s){return ar(s,e)}if(0<os.length){ar(os[0],e);for(var n=1;n<os.length;n++){var r=os[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Wt!==null&&ar(Wt,e),Gt!==null&&ar(Gt,e),Bt!==null&&ar(Bt,e),Pr.forEach(t),Ir.forEach(t),n=0;n<zt.length;n++)r=zt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<zt.length&&(n=zt[0],n.blockedOn===null);)Dc(n),n.blockedOn===null&&zt.shift()}var Un=Mt.ReactCurrentBatchConfig,Os=!0;function _h(e,t,n,r){var s=re,o=Un.transition;Un.transition=null;try{re=1,Ci(e,t,n,r)}finally{re=s,Un.transition=o}}function jh(e,t,n,r){var s=re,o=Un.transition;Un.transition=null;try{re=4,Ci(e,t,n,r)}finally{re=s,Un.transition=o}}function Ci(e,t,n,r){if(Os){var s=Pl(e,t,n,r);if(s===null)Vo(e,t,r,As,n),Ia(e,r);else if(Ch(s,e,t,n,r))r.stopPropagation();else if(Ia(e,r),t&4&&-1<kh.indexOf(e)){for(;s!==null;){var o=Xr(s);if(o!==null&&Rc(o),o=Pl(e,t,n,r),o===null&&Vo(e,t,r,As,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Vo(e,t,r,null,n)}}var As=null;function Pl(e,t,n,r){if(As=null,e=vi(r),e=ln(e),e!==null)if(t=kn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return As=e,null}function Lc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hh()){case wi:return 1;case jc:return 4;case Ds:case ph:return 16;case Ec:return 536870912;default:return 16}default:return 16}}var Ft=null,Ni=null,ws=null;function Oc(){if(ws)return ws;var e,t=Ni,n=t.length,r,s="value"in Ft?Ft.value:Ft.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[o-r];r++);return ws=s.slice(e,1<r?1-r:void 0)}function Ss(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ls(){return!0}function Da(){return!1}function Qe(e){function t(n,r,s,o,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ls:Da,this.isPropagationStopped=Da,this}return he(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ls)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ls)},persist:function(){},isPersistent:ls}),t}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_i=Qe(er),Qr=he({},er,{view:0,detail:0}),Eh=Qe(Qr),Ao,zo,ur,ao=he({},Qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ji,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ur&&(ur&&e.type==="mousemove"?(Ao=e.screenX-ur.screenX,zo=e.screenY-ur.screenY):zo=Ao=0,ur=e),Ao)},movementY:function(e){return"movementY"in e?e.movementY:zo}}),La=Qe(ao),bh=he({},ao,{dataTransfer:0}),Th=Qe(bh),Rh=he({},Qr,{relatedTarget:0}),$o=Qe(Rh),Ph=he({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Ih=Qe(Ph),Mh=he({},er,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dh=Qe(Mh),Lh=he({},er,{data:0}),Oa=Qe(Lh),Oh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ah={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $h(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zh[e])?!!t[e]:!1}function ji(){return $h}var Fh=he({},Qr,{key:function(e){if(e.key){var t=Oh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ss(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ah[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ji,charCode:function(e){return e.type==="keypress"?Ss(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ss(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hh=Qe(Fh),Uh=he({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Aa=Qe(Uh),Wh=he({},Qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ji}),Gh=Qe(Wh),Bh=he({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vh=Qe(Bh),Qh=he({},ao,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xh=Qe(Qh),Kh=[9,13,27,32],Ei=bt&&"CompositionEvent"in window,wr=null;bt&&"documentMode"in document&&(wr=document.documentMode);var Yh=bt&&"TextEvent"in window&&!wr,Ac=bt&&(!Ei||wr&&8<wr&&11>=wr),za=" ",$a=!1;function zc(e,t){switch(e){case"keyup":return Kh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $c(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tn=!1;function qh(e,t){switch(e){case"compositionend":return $c(t);case"keypress":return t.which!==32?null:($a=!0,za);case"textInput":return e=t.data,e===za&&$a?null:e;default:return null}}function Jh(e,t){if(Tn)return e==="compositionend"||!Ei&&zc(e,t)?(e=Oc(),ws=Ni=Ft=null,Tn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ac&&t.locale!=="ko"?null:t.data;default:return null}}var Zh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zh[e.type]:t==="textarea"}function Fc(e,t,n,r){xc(r),t=zs(t,"onChange"),0<t.length&&(n=new _i("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Sr=null,Dr=null;function ep(e){qc(e,0)}function uo(e){var t=In(e);if(cc(t))return e}function tp(e,t){if(e==="change")return t}var Hc=!1;if(bt){var Fo;if(bt){var Ho="oninput"in document;if(!Ho){var Ha=document.createElement("div");Ha.setAttribute("oninput","return;"),Ho=typeof Ha.oninput=="function"}Fo=Ho}else Fo=!1;Hc=Fo&&(!document.documentMode||9<document.documentMode)}function Ua(){Sr&&(Sr.detachEvent("onpropertychange",Uc),Dr=Sr=null)}function Uc(e){if(e.propertyName==="value"&&uo(Dr)){var t=[];Fc(t,Dr,e,vi(e)),Sc(ep,t)}}function np(e,t,n){e==="focusin"?(Ua(),Sr=t,Dr=n,Sr.attachEvent("onpropertychange",Uc)):e==="focusout"&&Ua()}function rp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uo(Dr)}function sp(e,t){if(e==="click")return uo(t)}function op(e,t){if(e==="input"||e==="change")return uo(t)}function lp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ut=typeof Object.is=="function"?Object.is:lp;function Lr(e,t){if(ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!hl.call(t,s)||!ut(e[s],t[s]))return!1}return!0}function Wa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ga(e,t){var n=Wa(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wa(n)}}function Wc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gc(){for(var e=window,t=Ps();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ps(e.document)}return t}function bi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ip(e){var t=Gc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Wc(n.ownerDocument.documentElement,n)){if(r!==null&&bi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Ga(n,o);var l=Ga(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ap=bt&&"documentMode"in document&&11>=document.documentMode,Rn=null,Il=null,kr=null,Ml=!1;function Ba(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ml||Rn==null||Rn!==Ps(r)||(r=Rn,"selectionStart"in r&&bi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kr&&Lr(kr,r)||(kr=r,r=zs(Il,"onSelect"),0<r.length&&(t=new _i("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Rn)))}function is(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pn={animationend:is("Animation","AnimationEnd"),animationiteration:is("Animation","AnimationIteration"),animationstart:is("Animation","AnimationStart"),transitionend:is("Transition","TransitionEnd")},Uo={},Bc={};bt&&(Bc=document.createElement("div").style,"AnimationEvent"in window||(delete Pn.animationend.animation,delete Pn.animationiteration.animation,delete Pn.animationstart.animation),"TransitionEvent"in window||delete Pn.transitionend.transition);function co(e){if(Uo[e])return Uo[e];if(!Pn[e])return e;var t=Pn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Bc)return Uo[e]=t[n];return e}var Vc=co("animationend"),Qc=co("animationiteration"),Xc=co("animationstart"),Kc=co("transitionend"),Yc=new Map,Va="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function en(e,t){Yc.set(e,t),Sn(t,[e])}for(var Wo=0;Wo<Va.length;Wo++){var Go=Va[Wo],up=Go.toLowerCase(),cp=Go[0].toUpperCase()+Go.slice(1);en(up,"on"+cp)}en(Vc,"onAnimationEnd");en(Qc,"onAnimationIteration");en(Xc,"onAnimationStart");en("dblclick","onDoubleClick");en("focusin","onFocus");en("focusout","onBlur");en(Kc,"onTransitionEnd");Bn("onMouseEnter",["mouseout","mouseover"]);Bn("onMouseLeave",["mouseout","mouseover"]);Bn("onPointerEnter",["pointerout","pointerover"]);Bn("onPointerLeave",["pointerout","pointerover"]);Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dp=new Set("cancel close invalid load scroll toggle".split(" ").concat(xr));function Qa(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,uh(r,t,void 0,e),e.currentTarget=null}function qc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var a=r[l],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==o&&s.isPropagationStopped())break e;Qa(s,a,d),o=u}else for(l=0;l<r.length;l++){if(a=r[l],u=a.instance,d=a.currentTarget,a=a.listener,u!==o&&s.isPropagationStopped())break e;Qa(s,a,d),o=u}}}if(Ms)throw e=bl,Ms=!1,bl=null,e}function le(e,t){var n=t[zl];n===void 0&&(n=t[zl]=new Set);var r=e+"__bubble";n.has(r)||(Jc(t,e,2,!1),n.add(r))}function Bo(e,t,n){var r=0;t&&(r|=4),Jc(n,e,r,t)}var as="_reactListening"+Math.random().toString(36).slice(2);function Or(e){if(!e[as]){e[as]=!0,oc.forEach(function(n){n!=="selectionchange"&&(dp.has(n)||Bo(n,!1,e),Bo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[as]||(t[as]=!0,Bo("selectionchange",!1,t))}}function Jc(e,t,n,r){switch(Lc(t)){case 1:var s=_h;break;case 4:s=jh;break;default:s=Ci}n=s.bind(null,t,n,e),s=void 0,!El||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Vo(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;l=l.return}for(;a!==null;){if(l=ln(a),l===null)return;if(u=l.tag,u===5||u===6){r=o=l;continue e}a=a.parentNode}}r=r.return}Sc(function(){var d=o,m=vi(n),p=[];e:{var g=Yc.get(e);if(g!==void 0){var w=_i,v=e;switch(e){case"keypress":if(Ss(n)===0)break e;case"keydown":case"keyup":w=Hh;break;case"focusin":v="focus",w=$o;break;case"focusout":v="blur",w=$o;break;case"beforeblur":case"afterblur":w=$o;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=La;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Th;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Gh;break;case Vc:case Qc:case Xc:w=Ih;break;case Kc:w=Vh;break;case"scroll":w=Eh;break;case"wheel":w=Xh;break;case"copy":case"cut":case"paste":w=Dh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Aa}var k=(t&4)!==0,L=!k&&e==="scroll",f=k?g!==null?g+"Capture":null:g;k=[];for(var c=d,h;c!==null;){h=c;var x=h.stateNode;if(h.tag===5&&x!==null&&(h=x,f!==null&&(x=Rr(c,f),x!=null&&k.push(Ar(c,x,h)))),L)break;c=c.return}0<k.length&&(g=new w(g,v,null,n,m),p.push({event:g,listeners:k}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",g&&n!==_l&&(v=n.relatedTarget||n.fromElement)&&(ln(v)||v[Tt]))break e;if((w||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,w?(v=n.relatedTarget||n.toElement,w=d,v=v?ln(v):null,v!==null&&(L=kn(v),v!==L||v.tag!==5&&v.tag!==6)&&(v=null)):(w=null,v=d),w!==v)){if(k=La,x="onMouseLeave",f="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(k=Aa,x="onPointerLeave",f="onPointerEnter",c="pointer"),L=w==null?g:In(w),h=v==null?g:In(v),g=new k(x,c+"leave",w,n,m),g.target=L,g.relatedTarget=h,x=null,ln(m)===d&&(k=new k(f,c+"enter",v,n,m),k.target=h,k.relatedTarget=L,x=k),L=x,w&&v)t:{for(k=w,f=v,c=0,h=k;h;h=Nn(h))c++;for(h=0,x=f;x;x=Nn(x))h++;for(;0<c-h;)k=Nn(k),c--;for(;0<h-c;)f=Nn(f),h--;for(;c--;){if(k===f||f!==null&&k===f.alternate)break t;k=Nn(k),f=Nn(f)}k=null}else k=null;w!==null&&Xa(p,g,w,k,!1),v!==null&&L!==null&&Xa(p,L,v,k,!0)}}e:{if(g=d?In(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var N=tp;else if(Fa(g))if(Hc)N=op;else{N=rp;var b=np}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(N=sp);if(N&&(N=N(e,d))){Fc(p,N,n,m);break e}b&&b(e,g,d),e==="focusout"&&(b=g._wrapperState)&&b.controlled&&g.type==="number"&&wl(g,"number",g.value)}switch(b=d?In(d):window,e){case"focusin":(Fa(b)||b.contentEditable==="true")&&(Rn=b,Il=d,kr=null);break;case"focusout":kr=Il=Rn=null;break;case"mousedown":Ml=!0;break;case"contextmenu":case"mouseup":case"dragend":Ml=!1,Ba(p,n,m);break;case"selectionchange":if(ap)break;case"keydown":case"keyup":Ba(p,n,m)}var T;if(Ei)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Tn?zc(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Ac&&n.locale!=="ko"&&(Tn||D!=="onCompositionStart"?D==="onCompositionEnd"&&Tn&&(T=Oc()):(Ft=m,Ni="value"in Ft?Ft.value:Ft.textContent,Tn=!0)),b=zs(d,D),0<b.length&&(D=new Oa(D,e,null,n,m),p.push({event:D,listeners:b}),T?D.data=T:(T=$c(n),T!==null&&(D.data=T)))),(T=Yh?qh(e,n):Jh(e,n))&&(d=zs(d,"onBeforeInput"),0<d.length&&(m=new Oa("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=T))}qc(p,t)})}function Ar(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zs(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Rr(e,n),o!=null&&r.unshift(Ar(e,o,s)),o=Rr(e,t),o!=null&&r.push(Ar(e,o,s))),e=e.return}return r}function Nn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xa(e,t,n,r,s){for(var o=t._reactName,l=[];n!==null&&n!==r;){var a=n,u=a.alternate,d=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&d!==null&&(a=d,s?(u=Rr(n,o),u!=null&&l.unshift(Ar(n,u,a))):s||(u=Rr(n,o),u!=null&&l.push(Ar(n,u,a)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var fp=/\r\n?/g,hp=/\u0000|\uFFFD/g;function Ka(e){return(typeof e=="string"?e:""+e).replace(fp,`
`).replace(hp,"")}function us(e,t,n){if(t=Ka(t),Ka(e)!==t&&n)throw Error(M(425))}function $s(){}var Dl=null,Ll=null;function Ol(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Al=typeof setTimeout=="function"?setTimeout:void 0,pp=typeof clearTimeout=="function"?clearTimeout:void 0,Ya=typeof Promise=="function"?Promise:void 0,mp=typeof queueMicrotask=="function"?queueMicrotask:typeof Ya<"u"?function(e){return Ya.resolve(null).then(e).catch(gp)}:Al;function gp(e){setTimeout(function(){throw e})}function Qo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Mr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Mr(t)}function Vt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qa(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var tr=Math.random().toString(36).slice(2),mt="__reactFiber$"+tr,zr="__reactProps$"+tr,Tt="__reactContainer$"+tr,zl="__reactEvents$"+tr,xp="__reactListeners$"+tr,yp="__reactHandles$"+tr;function ln(e){var t=e[mt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Tt]||n[mt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qa(e);e!==null;){if(n=e[mt])return n;e=qa(e)}return t}e=n,n=e.parentNode}return null}function Xr(e){return e=e[mt]||e[Tt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function In(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function fo(e){return e[zr]||null}var $l=[],Mn=-1;function tn(e){return{current:e}}function ie(e){0>Mn||(e.current=$l[Mn],$l[Mn]=null,Mn--)}function oe(e,t){Mn++,$l[Mn]=e.current,e.current=t}var Jt={},Te=tn(Jt),Ae=tn(!1),pn=Jt;function Vn(e,t){var n=e.type.contextTypes;if(!n)return Jt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ze(e){return e=e.childContextTypes,e!=null}function Fs(){ie(Ae),ie(Te)}function Ja(e,t,n){if(Te.current!==Jt)throw Error(M(168));oe(Te,t),oe(Ae,n)}function Zc(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(M(108,nh(e)||"Unknown",s));return he({},n,r)}function Hs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jt,pn=Te.current,oe(Te,e),oe(Ae,Ae.current),!0}function Za(e,t,n){var r=e.stateNode;if(!r)throw Error(M(169));n?(e=Zc(e,t,pn),r.__reactInternalMemoizedMergedChildContext=e,ie(Ae),ie(Te),oe(Te,e)):ie(Ae),oe(Ae,n)}var St=null,ho=!1,Xo=!1;function ed(e){St===null?St=[e]:St.push(e)}function vp(e){ho=!0,ed(e)}function nn(){if(!Xo&&St!==null){Xo=!0;var e=0,t=re;try{var n=St;for(re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}St=null,ho=!1}catch(s){throw St!==null&&(St=St.slice(e+1)),_c(wi,nn),s}finally{re=t,Xo=!1}}return null}var Dn=[],Ln=0,Us=null,Ws=0,Xe=[],Ke=0,mn=null,Ct=1,Nt="";function sn(e,t){Dn[Ln++]=Ws,Dn[Ln++]=Us,Us=e,Ws=t}function td(e,t,n){Xe[Ke++]=Ct,Xe[Ke++]=Nt,Xe[Ke++]=mn,mn=e;var r=Ct;e=Nt;var s=32-it(r)-1;r&=~(1<<s),n+=1;var o=32-it(t)+s;if(30<o){var l=s-s%5;o=(r&(1<<l)-1).toString(32),r>>=l,s-=l,Ct=1<<32-it(t)+s|n<<s|r,Nt=o+e}else Ct=1<<o|n<<s|r,Nt=e}function Ti(e){e.return!==null&&(sn(e,1),td(e,1,0))}function Ri(e){for(;e===Us;)Us=Dn[--Ln],Dn[Ln]=null,Ws=Dn[--Ln],Dn[Ln]=null;for(;e===mn;)mn=Xe[--Ke],Xe[Ke]=null,Nt=Xe[--Ke],Xe[Ke]=null,Ct=Xe[--Ke],Xe[Ke]=null}var Ge=null,Ue=null,ue=!1,lt=null;function nd(e,t){var n=Ye(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function eu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ge=e,Ue=Vt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ge=e,Ue=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=mn!==null?{id:Ct,overflow:Nt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ye(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ge=e,Ue=null,!0):!1;default:return!1}}function Fl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hl(e){if(ue){var t=Ue;if(t){var n=t;if(!eu(e,t)){if(Fl(e))throw Error(M(418));t=Vt(n.nextSibling);var r=Ge;t&&eu(e,t)?nd(r,n):(e.flags=e.flags&-4097|2,ue=!1,Ge=e)}}else{if(Fl(e))throw Error(M(418));e.flags=e.flags&-4097|2,ue=!1,Ge=e}}}function tu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ge=e}function cs(e){if(e!==Ge)return!1;if(!ue)return tu(e),ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ol(e.type,e.memoizedProps)),t&&(t=Ue)){if(Fl(e))throw rd(),Error(M(418));for(;t;)nd(e,t),t=Vt(t.nextSibling)}if(tu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ue=Vt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ue=null}}else Ue=Ge?Vt(e.stateNode.nextSibling):null;return!0}function rd(){for(var e=Ue;e;)e=Vt(e.nextSibling)}function Qn(){Ue=Ge=null,ue=!1}function Pi(e){lt===null?lt=[e]:lt.push(e)}var wp=Mt.ReactCurrentBatchConfig;function cr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var a=s.refs;l===null?delete a[o]:a[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function ds(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nu(e){var t=e._init;return t(e._payload)}function sd(e){function t(f,c){if(e){var h=f.deletions;h===null?(f.deletions=[c],f.flags|=16):h.push(c)}}function n(f,c){if(!e)return null;for(;c!==null;)t(f,c),c=c.sibling;return null}function r(f,c){for(f=new Map;c!==null;)c.key!==null?f.set(c.key,c):f.set(c.index,c),c=c.sibling;return f}function s(f,c){return f=Yt(f,c),f.index=0,f.sibling=null,f}function o(f,c,h){return f.index=h,e?(h=f.alternate,h!==null?(h=h.index,h<c?(f.flags|=2,c):h):(f.flags|=2,c)):(f.flags|=1048576,c)}function l(f){return e&&f.alternate===null&&(f.flags|=2),f}function a(f,c,h,x){return c===null||c.tag!==6?(c=tl(h,f.mode,x),c.return=f,c):(c=s(c,h),c.return=f,c)}function u(f,c,h,x){var N=h.type;return N===bn?m(f,c,h.props.children,x,h.key):c!==null&&(c.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ot&&nu(N)===c.type)?(x=s(c,h.props),x.ref=cr(f,c,h),x.return=f,x):(x=bs(h.type,h.key,h.props,null,f.mode,x),x.ref=cr(f,c,h),x.return=f,x)}function d(f,c,h,x){return c===null||c.tag!==4||c.stateNode.containerInfo!==h.containerInfo||c.stateNode.implementation!==h.implementation?(c=nl(h,f.mode,x),c.return=f,c):(c=s(c,h.children||[]),c.return=f,c)}function m(f,c,h,x,N){return c===null||c.tag!==7?(c=dn(h,f.mode,x,N),c.return=f,c):(c=s(c,h),c.return=f,c)}function p(f,c,h){if(typeof c=="string"&&c!==""||typeof c=="number")return c=tl(""+c,f.mode,h),c.return=f,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case es:return h=bs(c.type,c.key,c.props,null,f.mode,h),h.ref=cr(f,null,c),h.return=f,h;case En:return c=nl(c,f.mode,h),c.return=f,c;case Ot:var x=c._init;return p(f,x(c._payload),h)}if(mr(c)||or(c))return c=dn(c,f.mode,h,null),c.return=f,c;ds(f,c)}return null}function g(f,c,h,x){var N=c!==null?c.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return N!==null?null:a(f,c,""+h,x);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case es:return h.key===N?u(f,c,h,x):null;case En:return h.key===N?d(f,c,h,x):null;case Ot:return N=h._init,g(f,c,N(h._payload),x)}if(mr(h)||or(h))return N!==null?null:m(f,c,h,x,null);ds(f,h)}return null}function w(f,c,h,x,N){if(typeof x=="string"&&x!==""||typeof x=="number")return f=f.get(h)||null,a(c,f,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case es:return f=f.get(x.key===null?h:x.key)||null,u(c,f,x,N);case En:return f=f.get(x.key===null?h:x.key)||null,d(c,f,x,N);case Ot:var b=x._init;return w(f,c,h,b(x._payload),N)}if(mr(x)||or(x))return f=f.get(h)||null,m(c,f,x,N,null);ds(c,x)}return null}function v(f,c,h,x){for(var N=null,b=null,T=c,D=c=0,C=null;T!==null&&D<h.length;D++){T.index>D?(C=T,T=null):C=T.sibling;var _=g(f,T,h[D],x);if(_===null){T===null&&(T=C);break}e&&T&&_.alternate===null&&t(f,T),c=o(_,c,D),b===null?N=_:b.sibling=_,b=_,T=C}if(D===h.length)return n(f,T),ue&&sn(f,D),N;if(T===null){for(;D<h.length;D++)T=p(f,h[D],x),T!==null&&(c=o(T,c,D),b===null?N=T:b.sibling=T,b=T);return ue&&sn(f,D),N}for(T=r(f,T);D<h.length;D++)C=w(T,f,D,h[D],x),C!==null&&(e&&C.alternate!==null&&T.delete(C.key===null?D:C.key),c=o(C,c,D),b===null?N=C:b.sibling=C,b=C);return e&&T.forEach(function(O){return t(f,O)}),ue&&sn(f,D),N}function k(f,c,h,x){var N=or(h);if(typeof N!="function")throw Error(M(150));if(h=N.call(h),h==null)throw Error(M(151));for(var b=N=null,T=c,D=c=0,C=null,_=h.next();T!==null&&!_.done;D++,_=h.next()){T.index>D?(C=T,T=null):C=T.sibling;var O=g(f,T,_.value,x);if(O===null){T===null&&(T=C);break}e&&T&&O.alternate===null&&t(f,T),c=o(O,c,D),b===null?N=O:b.sibling=O,b=O,T=C}if(_.done)return n(f,T),ue&&sn(f,D),N;if(T===null){for(;!_.done;D++,_=h.next())_=p(f,_.value,x),_!==null&&(c=o(_,c,D),b===null?N=_:b.sibling=_,b=_);return ue&&sn(f,D),N}for(T=r(f,T);!_.done;D++,_=h.next())_=w(T,f,D,_.value,x),_!==null&&(e&&_.alternate!==null&&T.delete(_.key===null?D:_.key),c=o(_,c,D),b===null?N=_:b.sibling=_,b=_);return e&&T.forEach(function(G){return t(f,G)}),ue&&sn(f,D),N}function L(f,c,h,x){if(typeof h=="object"&&h!==null&&h.type===bn&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case es:e:{for(var N=h.key,b=c;b!==null;){if(b.key===N){if(N=h.type,N===bn){if(b.tag===7){n(f,b.sibling),c=s(b,h.props.children),c.return=f,f=c;break e}}else if(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ot&&nu(N)===b.type){n(f,b.sibling),c=s(b,h.props),c.ref=cr(f,b,h),c.return=f,f=c;break e}n(f,b);break}else t(f,b);b=b.sibling}h.type===bn?(c=dn(h.props.children,f.mode,x,h.key),c.return=f,f=c):(x=bs(h.type,h.key,h.props,null,f.mode,x),x.ref=cr(f,c,h),x.return=f,f=x)}return l(f);case En:e:{for(b=h.key;c!==null;){if(c.key===b)if(c.tag===4&&c.stateNode.containerInfo===h.containerInfo&&c.stateNode.implementation===h.implementation){n(f,c.sibling),c=s(c,h.children||[]),c.return=f,f=c;break e}else{n(f,c);break}else t(f,c);c=c.sibling}c=nl(h,f.mode,x),c.return=f,f=c}return l(f);case Ot:return b=h._init,L(f,c,b(h._payload),x)}if(mr(h))return v(f,c,h,x);if(or(h))return k(f,c,h,x);ds(f,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,c!==null&&c.tag===6?(n(f,c.sibling),c=s(c,h),c.return=f,f=c):(n(f,c),c=tl(h,f.mode,x),c.return=f,f=c),l(f)):n(f,c)}return L}var Xn=sd(!0),od=sd(!1),Gs=tn(null),Bs=null,On=null,Ii=null;function Mi(){Ii=On=Bs=null}function Di(e){var t=Gs.current;ie(Gs),e._currentValue=t}function Ul(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Wn(e,t){Bs=e,Ii=On=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Oe=!0),e.firstContext=null)}function Ze(e){var t=e._currentValue;if(Ii!==e)if(e={context:e,memoizedValue:t,next:null},On===null){if(Bs===null)throw Error(M(308));On=e,Bs.dependencies={lanes:0,firstContext:e}}else On=On.next=e;return t}var an=null;function Li(e){an===null?an=[e]:an.push(e)}function ld(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Li(t)):(n.next=s.next,s.next=n),t.interleaved=n,Rt(e,r)}function Rt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var At=!1;function Oi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function id(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,te&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Rt(e,n)}return s=r.interleaved,s===null?(t.next=t,Li(r)):(t.next=s.next,s.next=t),r.interleaved=t,Rt(e,n)}function ks(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Si(e,n)}}function ru(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vs(e,t,n,r){var s=e.updateQueue;At=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,d=u.next;u.next=null,l===null?o=d:l.next=d,l=u;var m=e.alternate;m!==null&&(m=m.updateQueue,a=m.lastBaseUpdate,a!==l&&(a===null?m.firstBaseUpdate=d:a.next=d,m.lastBaseUpdate=u))}if(o!==null){var p=s.baseState;l=0,m=d=u=null,a=o;do{var g=a.lane,w=a.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,k=a;switch(g=t,w=n,k.tag){case 1:if(v=k.payload,typeof v=="function"){p=v.call(w,p,g);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=k.payload,g=typeof v=="function"?v.call(w,p,g):v,g==null)break e;p=he({},p,g);break e;case 2:At=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else w={eventTime:w,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},m===null?(d=m=w,u=p):m=m.next=w,l|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);xn|=l,e.lanes=l,e.memoizedState=p}}function su(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(M(191,s));s.call(r)}}}var Kr={},vt=tn(Kr),$r=tn(Kr),Fr=tn(Kr);function un(e){if(e===Kr)throw Error(M(174));return e}function Ai(e,t){switch(oe(Fr,t),oe($r,e),oe(vt,Kr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kl(t,e)}ie(vt),oe(vt,t)}function Kn(){ie(vt),ie($r),ie(Fr)}function ad(e){un(Fr.current);var t=un(vt.current),n=kl(t,e.type);t!==n&&(oe($r,e),oe(vt,n))}function zi(e){$r.current===e&&(ie(vt),ie($r))}var de=tn(0);function Qs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ko=[];function $i(){for(var e=0;e<Ko.length;e++)Ko[e]._workInProgressVersionPrimary=null;Ko.length=0}var Cs=Mt.ReactCurrentDispatcher,Yo=Mt.ReactCurrentBatchConfig,gn=0,fe=null,xe=null,we=null,Xs=!1,Cr=!1,Hr=0,Sp=0;function _e(){throw Error(M(321))}function Fi(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ut(e[n],t[n]))return!1;return!0}function Hi(e,t,n,r,s,o){if(gn=o,fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cs.current=e===null||e.memoizedState===null?_p:jp,e=n(r,s),Cr){o=0;do{if(Cr=!1,Hr=0,25<=o)throw Error(M(301));o+=1,we=xe=null,t.updateQueue=null,Cs.current=Ep,e=n(r,s)}while(Cr)}if(Cs.current=Ks,t=xe!==null&&xe.next!==null,gn=0,we=xe=fe=null,Xs=!1,t)throw Error(M(300));return e}function Ui(){var e=Hr!==0;return Hr=0,e}function pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?fe.memoizedState=we=e:we=we.next=e,we}function et(){if(xe===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=xe.next;var t=we===null?fe.memoizedState:we.next;if(t!==null)we=t,xe=e;else{if(e===null)throw Error(M(310));xe=e,e={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},we===null?fe.memoizedState=we=e:we=we.next=e}return we}function Ur(e,t){return typeof t=="function"?t(e):t}function qo(e){var t=et(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=xe,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=l=null,u=null,d=o;do{var m=d.lane;if((gn&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=p,l=r):u=u.next=p,fe.lanes|=m,xn|=m}d=d.next}while(d!==null&&d!==o);u===null?l=r:u.next=a,ut(r,t.memoizedState)||(Oe=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,fe.lanes|=o,xn|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Jo(e){var t=et(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=e(o,l.action),l=l.next;while(l!==s);ut(o,t.memoizedState)||(Oe=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ud(){}function cd(e,t){var n=fe,r=et(),s=t(),o=!ut(r.memoizedState,s);if(o&&(r.memoizedState=s,Oe=!0),r=r.queue,Wi(hd.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||we!==null&&we.memoizedState.tag&1){if(n.flags|=2048,Wr(9,fd.bind(null,n,r,s,t),void 0,null),Se===null)throw Error(M(349));gn&30||dd(n,t,s)}return s}function dd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function fd(e,t,n,r){t.value=n,t.getSnapshot=r,pd(t)&&md(e)}function hd(e,t,n){return n(function(){pd(t)&&md(e)})}function pd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ut(e,n)}catch{return!0}}function md(e){var t=Rt(e,1);t!==null&&at(t,e,1,-1)}function ou(e){var t=pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:e},t.queue=e,e=e.dispatch=Np.bind(null,fe,e),[t.memoizedState,e]}function Wr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function gd(){return et().memoizedState}function Ns(e,t,n,r){var s=pt();fe.flags|=e,s.memoizedState=Wr(1|t,n,void 0,r===void 0?null:r)}function po(e,t,n,r){var s=et();r=r===void 0?null:r;var o=void 0;if(xe!==null){var l=xe.memoizedState;if(o=l.destroy,r!==null&&Fi(r,l.deps)){s.memoizedState=Wr(t,n,o,r);return}}fe.flags|=e,s.memoizedState=Wr(1|t,n,o,r)}function lu(e,t){return Ns(8390656,8,e,t)}function Wi(e,t){return po(2048,8,e,t)}function xd(e,t){return po(4,2,e,t)}function yd(e,t){return po(4,4,e,t)}function vd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wd(e,t,n){return n=n!=null?n.concat([e]):null,po(4,4,vd.bind(null,t,e),n)}function Gi(){}function Sd(e,t){var n=et();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Fi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function kd(e,t){var n=et();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Fi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Cd(e,t,n){return gn&21?(ut(n,t)||(n=bc(),fe.lanes|=n,xn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Oe=!0),e.memoizedState=n)}function kp(e,t){var n=re;re=n!==0&&4>n?n:4,e(!0);var r=Yo.transition;Yo.transition={};try{e(!1),t()}finally{re=n,Yo.transition=r}}function Nd(){return et().memoizedState}function Cp(e,t,n){var r=Kt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_d(e))jd(t,n);else if(n=ld(e,t,n,r),n!==null){var s=Pe();at(n,e,r,s),Ed(n,t,r)}}function Np(e,t,n){var r=Kt(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_d(e))jd(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,a=o(l,n);if(s.hasEagerState=!0,s.eagerState=a,ut(a,l)){var u=t.interleaved;u===null?(s.next=s,Li(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=ld(e,t,s,r),n!==null&&(s=Pe(),at(n,e,r,s),Ed(n,t,r))}}function _d(e){var t=e.alternate;return e===fe||t!==null&&t===fe}function jd(e,t){Cr=Xs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ed(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Si(e,n)}}var Ks={readContext:Ze,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},_p={readContext:Ze,useCallback:function(e,t){return pt().memoizedState=[e,t===void 0?null:t],e},useContext:Ze,useEffect:lu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ns(4194308,4,vd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ns(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ns(4,2,e,t)},useMemo:function(e,t){var n=pt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=pt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Cp.bind(null,fe,e),[r.memoizedState,e]},useRef:function(e){var t=pt();return e={current:e},t.memoizedState=e},useState:ou,useDebugValue:Gi,useDeferredValue:function(e){return pt().memoizedState=e},useTransition:function(){var e=ou(!1),t=e[0];return e=kp.bind(null,e[1]),pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=fe,s=pt();if(ue){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),Se===null)throw Error(M(349));gn&30||dd(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,lu(hd.bind(null,r,o,e),[e]),r.flags|=2048,Wr(9,fd.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=pt(),t=Se.identifierPrefix;if(ue){var n=Nt,r=Ct;n=(r&~(1<<32-it(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Hr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Sp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},jp={readContext:Ze,useCallback:Sd,useContext:Ze,useEffect:Wi,useImperativeHandle:wd,useInsertionEffect:xd,useLayoutEffect:yd,useMemo:kd,useReducer:qo,useRef:gd,useState:function(){return qo(Ur)},useDebugValue:Gi,useDeferredValue:function(e){var t=et();return Cd(t,xe.memoizedState,e)},useTransition:function(){var e=qo(Ur)[0],t=et().memoizedState;return[e,t]},useMutableSource:ud,useSyncExternalStore:cd,useId:Nd,unstable_isNewReconciler:!1},Ep={readContext:Ze,useCallback:Sd,useContext:Ze,useEffect:Wi,useImperativeHandle:wd,useInsertionEffect:xd,useLayoutEffect:yd,useMemo:kd,useReducer:Jo,useRef:gd,useState:function(){return Jo(Ur)},useDebugValue:Gi,useDeferredValue:function(e){var t=et();return xe===null?t.memoizedState=e:Cd(t,xe.memoizedState,e)},useTransition:function(){var e=Jo(Ur)[0],t=et().memoizedState;return[e,t]},useMutableSource:ud,useSyncExternalStore:cd,useId:Nd,unstable_isNewReconciler:!1};function st(e,t){if(e&&e.defaultProps){t=he({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Wl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:he({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var mo={isMounted:function(e){return(e=e._reactInternals)?kn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pe(),s=Kt(e),o=jt(r,s);o.payload=t,n!=null&&(o.callback=n),t=Qt(e,o,s),t!==null&&(at(t,e,s,r),ks(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pe(),s=Kt(e),o=jt(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Qt(e,o,s),t!==null&&(at(t,e,s,r),ks(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pe(),r=Kt(e),s=jt(n,r);s.tag=2,t!=null&&(s.callback=t),t=Qt(e,s,r),t!==null&&(at(t,e,r,n),ks(t,e,r))}};function iu(e,t,n,r,s,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,l):t.prototype&&t.prototype.isPureReactComponent?!Lr(n,r)||!Lr(s,o):!0}function bd(e,t,n){var r=!1,s=Jt,o=t.contextType;return typeof o=="object"&&o!==null?o=Ze(o):(s=ze(t)?pn:Te.current,r=t.contextTypes,o=(r=r!=null)?Vn(e,s):Jt),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function au(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function Gl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Oi(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Ze(o):(o=ze(t)?pn:Te.current,s.context=Vn(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Wl(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&mo.enqueueReplaceState(s,s.state,null),Vs(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Yn(e,t){try{var n="",r=t;do n+=th(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Zo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Bl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bp=typeof WeakMap=="function"?WeakMap:Map;function Td(e,t,n){n=jt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qs||(qs=!0,ti=r),Bl(e,t)},n}function Rd(e,t,n){n=jt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Bl(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Bl(e,t),typeof r!="function"&&(Xt===null?Xt=new Set([this]):Xt.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function uu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Up.bind(null,e,t,n),t.then(e,e))}function cu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function du(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=jt(-1,1),t.tag=2,Qt(n,t,1))),n.lanes|=1),e)}var Tp=Mt.ReactCurrentOwner,Oe=!1;function Re(e,t,n,r){t.child=e===null?od(t,null,n,r):Xn(t,e.child,n,r)}function fu(e,t,n,r,s){n=n.render;var o=t.ref;return Wn(t,s),r=Hi(e,t,n,r,o,s),n=Ui(),e!==null&&!Oe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Pt(e,t,s)):(ue&&n&&Ti(t),t.flags|=1,Re(e,t,r,s),t.child)}function hu(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Ji(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Pd(e,t,o,r,s)):(e=bs(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Lr,n(l,r)&&e.ref===t.ref)return Pt(e,t,s)}return t.flags|=1,e=Yt(o,r),e.ref=t.ref,e.return=t,t.child=e}function Pd(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Lr(o,r)&&e.ref===t.ref)if(Oe=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Oe=!0);else return t.lanes=e.lanes,Pt(e,t,s)}return Vl(e,t,n,r,s)}function Id(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(zn,He),He|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,oe(zn,He),He|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,oe(zn,He),He|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,oe(zn,He),He|=r;return Re(e,t,s,n),t.child}function Md(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Vl(e,t,n,r,s){var o=ze(n)?pn:Te.current;return o=Vn(t,o),Wn(t,s),n=Hi(e,t,n,r,o,s),r=Ui(),e!==null&&!Oe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Pt(e,t,s)):(ue&&r&&Ti(t),t.flags|=1,Re(e,t,n,s),t.child)}function pu(e,t,n,r,s){if(ze(n)){var o=!0;Hs(t)}else o=!1;if(Wn(t,s),t.stateNode===null)_s(e,t),bd(t,n,r),Gl(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,a=t.memoizedProps;l.props=a;var u=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ze(d):(d=ze(n)?pn:Te.current,d=Vn(t,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==r||u!==d)&&au(t,l,r,d),At=!1;var g=t.memoizedState;l.state=g,Vs(t,r,l,s),u=t.memoizedState,a!==r||g!==u||Ae.current||At?(typeof m=="function"&&(Wl(t,n,m,r),u=t.memoizedState),(a=At||iu(t,n,a,r,g,u,d))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),l.props=r,l.state=u,l.context=d,r=a):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,id(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:st(t.type,a),l.props=d,p=t.pendingProps,g=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ze(u):(u=ze(n)?pn:Te.current,u=Vn(t,u));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==p||g!==u)&&au(t,l,r,u),At=!1,g=t.memoizedState,l.state=g,Vs(t,r,l,s);var v=t.memoizedState;a!==p||g!==v||Ae.current||At?(typeof w=="function"&&(Wl(t,n,w,r),v=t.memoizedState),(d=At||iu(t,n,d,r,g,v,u)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,v,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,v,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),l.props=r,l.state=v,l.context=u,r=d):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Ql(e,t,n,r,o,s)}function Ql(e,t,n,r,s,o){Md(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&Za(t,n,!1),Pt(e,t,o);r=t.stateNode,Tp.current=t;var a=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Xn(t,e.child,null,o),t.child=Xn(t,null,a,o)):Re(e,t,a,o),t.memoizedState=r.state,s&&Za(t,n,!0),t.child}function Dd(e){var t=e.stateNode;t.pendingContext?Ja(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ja(e,t.context,!1),Ai(e,t.containerInfo)}function mu(e,t,n,r,s){return Qn(),Pi(s),t.flags|=256,Re(e,t,n,r),t.child}var Xl={dehydrated:null,treeContext:null,retryLane:0};function Kl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ld(e,t,n){var r=t.pendingProps,s=de.current,o=!1,l=(t.flags&128)!==0,a;if((a=l)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),oe(de,s&1),e===null)return Hl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=yo(l,r,0,null),e=dn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Kl(n),t.memoizedState=Xl,e):Bi(t,l));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Rp(e,t,l,r,a,s,n);if(o){o=r.fallback,l=t.mode,s=e.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Yt(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=Yt(a,o):(o=dn(o,l,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=e.child.memoizedState,l=l===null?Kl(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Xl,r}return o=e.child,e=o.sibling,r=Yt(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Bi(e,t){return t=yo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function fs(e,t,n,r){return r!==null&&Pi(r),Xn(t,e.child,null,n),e=Bi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rp(e,t,n,r,s,o,l){if(n)return t.flags&256?(t.flags&=-257,r=Zo(Error(M(422))),fs(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=yo({mode:"visible",children:r.children},s,0,null),o=dn(o,s,l,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Xn(t,e.child,null,l),t.child.memoizedState=Kl(l),t.memoizedState=Xl,o);if(!(t.mode&1))return fs(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(M(419)),r=Zo(o,r,void 0),fs(e,t,l,r)}if(a=(l&e.childLanes)!==0,Oe||a){if(r=Se,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Rt(e,s),at(r,e,s,-1))}return qi(),r=Zo(Error(M(421))),fs(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Wp.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Ue=Vt(s.nextSibling),Ge=t,ue=!0,lt=null,e!==null&&(Xe[Ke++]=Ct,Xe[Ke++]=Nt,Xe[Ke++]=mn,Ct=e.id,Nt=e.overflow,mn=t),t=Bi(t,r.children),t.flags|=4096,t)}function gu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ul(e.return,t,n)}function el(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Od(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(Re(e,t,r.children,n),r=de.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gu(e,n,t);else if(e.tag===19)gu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(oe(de,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Qs(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),el(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Qs(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}el(t,!0,n,null,o);break;case"together":el(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _s(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=Yt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Yt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Pp(e,t,n){switch(t.tag){case 3:Dd(t),Qn();break;case 5:ad(t);break;case 1:ze(t.type)&&Hs(t);break;case 4:Ai(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;oe(Gs,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(oe(de,de.current&1),t.flags|=128,null):n&t.child.childLanes?Ld(e,t,n):(oe(de,de.current&1),e=Pt(e,t,n),e!==null?e.sibling:null);oe(de,de.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Od(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),oe(de,de.current),r)break;return null;case 22:case 23:return t.lanes=0,Id(e,t,n)}return Pt(e,t,n)}var Ad,Yl,zd,$d;Ad=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yl=function(){};zd=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,un(vt.current);var o=null;switch(n){case"input":s=yl(e,s),r=yl(e,r),o=[];break;case"select":s=he({},s,{value:void 0}),r=he({},r,{value:void 0}),o=[];break;case"textarea":s=Sl(e,s),r=Sl(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=$s)}Cl(n,r);var l;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(br.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(l in a)!a.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&a[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(o||(o=[]),o.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(br.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&le("scroll",e),o||a===u||(o=[])):(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};$d=function(e,t,n,r){n!==r&&(t.flags|=4)};function dr(e,t){if(!ue)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function je(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ip(e,t,n){var r=t.pendingProps;switch(Ri(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(t),null;case 1:return ze(t.type)&&Fs(),je(t),null;case 3:return r=t.stateNode,Kn(),ie(Ae),ie(Te),$i(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(cs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,lt!==null&&(si(lt),lt=null))),Yl(e,t),je(t),null;case 5:zi(t);var s=un(Fr.current);if(n=t.type,e!==null&&t.stateNode!=null)zd(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(M(166));return je(t),null}if(e=un(vt.current),cs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[mt]=t,r[zr]=o,e=(t.mode&1)!==0,n){case"dialog":le("cancel",r),le("close",r);break;case"iframe":case"object":case"embed":le("load",r);break;case"video":case"audio":for(s=0;s<xr.length;s++)le(xr[s],r);break;case"source":le("error",r);break;case"img":case"image":case"link":le("error",r),le("load",r);break;case"details":le("toggle",r);break;case"input":_a(r,o),le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},le("invalid",r);break;case"textarea":Ea(r,o),le("invalid",r)}Cl(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var a=o[l];l==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&us(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&us(r.textContent,a,e),s=["children",""+a]):br.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&le("scroll",r)}switch(n){case"input":ts(r),ja(r,o,!0);break;case"textarea":ts(r),ba(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=$s)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[mt]=t,e[zr]=r,Ad(e,t,!1,!1),t.stateNode=e;e:{switch(l=Nl(n,r),n){case"dialog":le("cancel",e),le("close",e),s=r;break;case"iframe":case"object":case"embed":le("load",e),s=r;break;case"video":case"audio":for(s=0;s<xr.length;s++)le(xr[s],e);s=r;break;case"source":le("error",e),s=r;break;case"img":case"image":case"link":le("error",e),le("load",e),s=r;break;case"details":le("toggle",e),s=r;break;case"input":_a(e,r),s=yl(e,r),le("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=he({},r,{value:void 0}),le("invalid",e);break;case"textarea":Ea(e,r),s=Sl(e,r),le("invalid",e);break;default:s=r}Cl(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?gc(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&pc(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Tr(e,u):typeof u=="number"&&Tr(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(br.hasOwnProperty(o)?u!=null&&o==="onScroll"&&le("scroll",e):u!=null&&mi(e,o,u,l))}switch(n){case"input":ts(e),ja(e,r,!1);break;case"textarea":ts(e),ba(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qt(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?$n(e,!!r.multiple,o,!1):r.defaultValue!=null&&$n(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=$s)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return je(t),null;case 6:if(e&&t.stateNode!=null)$d(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(M(166));if(n=un(Fr.current),un(vt.current),cs(t)){if(r=t.stateNode,n=t.memoizedProps,r[mt]=t,(o=r.nodeValue!==n)&&(e=Ge,e!==null))switch(e.tag){case 3:us(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&us(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mt]=t,t.stateNode=r}return je(t),null;case 13:if(ie(de),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ue&&Ue!==null&&t.mode&1&&!(t.flags&128))rd(),Qn(),t.flags|=98560,o=!1;else if(o=cs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(M(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(M(317));o[mt]=t}else Qn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;je(t),o=!1}else lt!==null&&(si(lt),lt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||de.current&1?ye===0&&(ye=3):qi())),t.updateQueue!==null&&(t.flags|=4),je(t),null);case 4:return Kn(),Yl(e,t),e===null&&Or(t.stateNode.containerInfo),je(t),null;case 10:return Di(t.type._context),je(t),null;case 17:return ze(t.type)&&Fs(),je(t),null;case 19:if(ie(de),o=t.memoizedState,o===null)return je(t),null;if(r=(t.flags&128)!==0,l=o.rendering,l===null)if(r)dr(o,!1);else{if(ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Qs(e),l!==null){for(t.flags|=128,dr(o,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return oe(de,de.current&1|2),t.child}e=e.sibling}o.tail!==null&&me()>qn&&(t.flags|=128,r=!0,dr(o,!1),t.lanes=4194304)}else{if(!r)if(e=Qs(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),dr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!ue)return je(t),null}else 2*me()-o.renderingStartTime>qn&&n!==1073741824&&(t.flags|=128,r=!0,dr(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=me(),t.sibling=null,n=de.current,oe(de,r?n&1|2:n&1),t):(je(t),null);case 22:case 23:return Yi(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?He&1073741824&&(je(t),t.subtreeFlags&6&&(t.flags|=8192)):je(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function Mp(e,t){switch(Ri(t),t.tag){case 1:return ze(t.type)&&Fs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kn(),ie(Ae),ie(Te),$i(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zi(t),null;case 13:if(ie(de),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));Qn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ie(de),null;case 4:return Kn(),null;case 10:return Di(t.type._context),null;case 22:case 23:return Yi(),null;case 24:return null;default:return null}}var hs=!1,be=!1,Dp=typeof WeakSet=="function"?WeakSet:Set,U=null;function An(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(e,t,r)}else n.current=null}function ql(e,t,n){try{n()}catch(r){pe(e,t,r)}}var xu=!1;function Lp(e,t){if(Dl=Os,e=Gc(),bi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,a=-1,u=-1,d=0,m=0,p=e,g=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(a=l+s),p!==o||r!==0&&p.nodeType!==3||(u=l+r),p.nodeType===3&&(l+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===e)break t;if(g===n&&++d===s&&(a=l),g===o&&++m===r&&(u=l),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ll={focusedElem:e,selectionRange:n},Os=!1,U=t;U!==null;)if(t=U,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,U=e;else for(;U!==null;){t=U;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var k=v.memoizedProps,L=v.memoizedState,f=t.stateNode,c=f.getSnapshotBeforeUpdate(t.elementType===t.type?k:st(t.type,k),L);f.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(x){pe(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,U=e;break}U=t.return}return v=xu,xu=!1,v}function Nr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&ql(t,n,o)}s=s.next}while(s!==r)}}function go(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Jl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Fd(e){var t=e.alternate;t!==null&&(e.alternate=null,Fd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mt],delete t[zr],delete t[zl],delete t[xp],delete t[yp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hd(e){return e.tag===5||e.tag===3||e.tag===4}function yu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$s));else if(r!==4&&(e=e.child,e!==null))for(Zl(e,t,n),e=e.sibling;e!==null;)Zl(e,t,n),e=e.sibling}function ei(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ei(e,t,n),e=e.sibling;e!==null;)ei(e,t,n),e=e.sibling}var ke=null,ot=!1;function Lt(e,t,n){for(n=n.child;n!==null;)Ud(e,t,n),n=n.sibling}function Ud(e,t,n){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(io,n)}catch{}switch(n.tag){case 5:be||An(n,t);case 6:var r=ke,s=ot;ke=null,Lt(e,t,n),ke=r,ot=s,ke!==null&&(ot?(e=ke,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ke.removeChild(n.stateNode));break;case 18:ke!==null&&(ot?(e=ke,n=n.stateNode,e.nodeType===8?Qo(e.parentNode,n):e.nodeType===1&&Qo(e,n),Mr(e)):Qo(ke,n.stateNode));break;case 4:r=ke,s=ot,ke=n.stateNode.containerInfo,ot=!0,Lt(e,t,n),ke=r,ot=s;break;case 0:case 11:case 14:case 15:if(!be&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&ql(n,t,l),s=s.next}while(s!==r)}Lt(e,t,n);break;case 1:if(!be&&(An(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pe(n,t,a)}Lt(e,t,n);break;case 21:Lt(e,t,n);break;case 22:n.mode&1?(be=(r=be)||n.memoizedState!==null,Lt(e,t,n),be=r):Lt(e,t,n);break;default:Lt(e,t,n)}}function vu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Dp),t.forEach(function(r){var s=Gp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,l=t,a=l;e:for(;a!==null;){switch(a.tag){case 5:ke=a.stateNode,ot=!1;break e;case 3:ke=a.stateNode.containerInfo,ot=!0;break e;case 4:ke=a.stateNode.containerInfo,ot=!0;break e}a=a.return}if(ke===null)throw Error(M(160));Ud(o,l,s),ke=null,ot=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){pe(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wd(t,e),t=t.sibling}function Wd(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rt(t,e),ft(e),r&4){try{Nr(3,e,e.return),go(3,e)}catch(k){pe(e,e.return,k)}try{Nr(5,e,e.return)}catch(k){pe(e,e.return,k)}}break;case 1:rt(t,e),ft(e),r&512&&n!==null&&An(n,n.return);break;case 5:if(rt(t,e),ft(e),r&512&&n!==null&&An(n,n.return),e.flags&32){var s=e.stateNode;try{Tr(s,"")}catch(k){pe(e,e.return,k)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&dc(s,o),Nl(a,l);var d=Nl(a,o);for(l=0;l<u.length;l+=2){var m=u[l],p=u[l+1];m==="style"?gc(s,p):m==="dangerouslySetInnerHTML"?pc(s,p):m==="children"?Tr(s,p):mi(s,m,p,d)}switch(a){case"input":vl(s,o);break;case"textarea":fc(s,o);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var w=o.value;w!=null?$n(s,!!o.multiple,w,!1):g!==!!o.multiple&&(o.defaultValue!=null?$n(s,!!o.multiple,o.defaultValue,!0):$n(s,!!o.multiple,o.multiple?[]:"",!1))}s[zr]=o}catch(k){pe(e,e.return,k)}}break;case 6:if(rt(t,e),ft(e),r&4){if(e.stateNode===null)throw Error(M(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(k){pe(e,e.return,k)}}break;case 3:if(rt(t,e),ft(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mr(t.containerInfo)}catch(k){pe(e,e.return,k)}break;case 4:rt(t,e),ft(e);break;case 13:rt(t,e),ft(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Xi=me())),r&4&&vu(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(be=(d=be)||m,rt(t,e),be=d):rt(t,e),ft(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(U=e,m=e.child;m!==null;){for(p=U=m;U!==null;){switch(g=U,w=g.child,g.tag){case 0:case 11:case 14:case 15:Nr(4,g,g.return);break;case 1:An(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(k){pe(r,n,k)}}break;case 5:An(g,g.return);break;case 22:if(g.memoizedState!==null){Su(p);continue}}w!==null?(w.return=g,U=w):Su(p)}m=m.sibling}e:for(m=null,p=e;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=p.stateNode,u=p.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=mc("display",l))}catch(k){pe(e,e.return,k)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(k){pe(e,e.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:rt(t,e),ft(e),r&4&&vu(e);break;case 21:break;default:rt(t,e),ft(e)}}function ft(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Hd(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Tr(s,""),r.flags&=-33);var o=yu(e);ei(e,o,s);break;case 3:case 4:var l=r.stateNode.containerInfo,a=yu(e);Zl(e,a,l);break;default:throw Error(M(161))}}catch(u){pe(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Op(e,t,n){U=e,Gd(e)}function Gd(e,t,n){for(var r=(e.mode&1)!==0;U!==null;){var s=U,o=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||hs;if(!l){var a=s.alternate,u=a!==null&&a.memoizedState!==null||be;a=hs;var d=be;if(hs=l,(be=u)&&!d)for(U=s;U!==null;)l=U,u=l.child,l.tag===22&&l.memoizedState!==null?ku(s):u!==null?(u.return=l,U=u):ku(s);for(;o!==null;)U=o,Gd(o),o=o.sibling;U=s,hs=a,be=d}wu(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,U=o):wu(e)}}function wu(e){for(;U!==null;){var t=U;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:be||go(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!be)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:st(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&su(t,o,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}su(t,l,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&Mr(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}be||t.flags&512&&Jl(t)}catch(g){pe(t,t.return,g)}}if(t===e){U=null;break}if(n=t.sibling,n!==null){n.return=t.return,U=n;break}U=t.return}}function Su(e){for(;U!==null;){var t=U;if(t===e){U=null;break}var n=t.sibling;if(n!==null){n.return=t.return,U=n;break}U=t.return}}function ku(e){for(;U!==null;){var t=U;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{go(4,t)}catch(u){pe(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){pe(t,s,u)}}var o=t.return;try{Jl(t)}catch(u){pe(t,o,u)}break;case 5:var l=t.return;try{Jl(t)}catch(u){pe(t,l,u)}}}catch(u){pe(t,t.return,u)}if(t===e){U=null;break}var a=t.sibling;if(a!==null){a.return=t.return,U=a;break}U=t.return}}var Ap=Math.ceil,Ys=Mt.ReactCurrentDispatcher,Vi=Mt.ReactCurrentOwner,Je=Mt.ReactCurrentBatchConfig,te=0,Se=null,ge=null,Ce=0,He=0,zn=tn(0),ye=0,Gr=null,xn=0,xo=0,Qi=0,_r=null,Le=null,Xi=0,qn=1/0,wt=null,qs=!1,ti=null,Xt=null,ps=!1,Ht=null,Js=0,jr=0,ni=null,js=-1,Es=0;function Pe(){return te&6?me():js!==-1?js:js=me()}function Kt(e){return e.mode&1?te&2&&Ce!==0?Ce&-Ce:wp.transition!==null?(Es===0&&(Es=bc()),Es):(e=re,e!==0||(e=window.event,e=e===void 0?16:Lc(e.type)),e):1}function at(e,t,n,r){if(50<jr)throw jr=0,ni=null,Error(M(185));Vr(e,n,r),(!(te&2)||e!==Se)&&(e===Se&&(!(te&2)&&(xo|=n),ye===4&&$t(e,Ce)),$e(e,r),n===1&&te===0&&!(t.mode&1)&&(qn=me()+500,ho&&nn()))}function $e(e,t){var n=e.callbackNode;wh(e,t);var r=Ls(e,e===Se?Ce:0);if(r===0)n!==null&&Pa(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Pa(n),t===1)e.tag===0?vp(Cu.bind(null,e)):ed(Cu.bind(null,e)),mp(function(){!(te&6)&&nn()}),n=null;else{switch(Tc(r)){case 1:n=wi;break;case 4:n=jc;break;case 16:n=Ds;break;case 536870912:n=Ec;break;default:n=Ds}n=Jd(n,Bd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Bd(e,t){if(js=-1,Es=0,te&6)throw Error(M(327));var n=e.callbackNode;if(Gn()&&e.callbackNode!==n)return null;var r=Ls(e,e===Se?Ce:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Zs(e,r);else{t=r;var s=te;te|=2;var o=Qd();(Se!==e||Ce!==t)&&(wt=null,qn=me()+500,cn(e,t));do try{Fp();break}catch(a){Vd(e,a)}while(!0);Mi(),Ys.current=o,te=s,ge!==null?t=0:(Se=null,Ce=0,t=ye)}if(t!==0){if(t===2&&(s=Tl(e),s!==0&&(r=s,t=ri(e,s))),t===1)throw n=Gr,cn(e,0),$t(e,r),$e(e,me()),n;if(t===6)$t(e,r);else{if(s=e.current.alternate,!(r&30)&&!zp(s)&&(t=Zs(e,r),t===2&&(o=Tl(e),o!==0&&(r=o,t=ri(e,o))),t===1))throw n=Gr,cn(e,0),$t(e,r),$e(e,me()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(M(345));case 2:on(e,Le,wt);break;case 3:if($t(e,r),(r&130023424)===r&&(t=Xi+500-me(),10<t)){if(Ls(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Pe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Al(on.bind(null,e,Le,wt),t);break}on(e,Le,wt);break;case 4:if($t(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-it(r);o=1<<l,l=t[l],l>s&&(s=l),r&=~o}if(r=s,r=me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ap(r/1960))-r,10<r){e.timeoutHandle=Al(on.bind(null,e,Le,wt),r);break}on(e,Le,wt);break;case 5:on(e,Le,wt);break;default:throw Error(M(329))}}}return $e(e,me()),e.callbackNode===n?Bd.bind(null,e):null}function ri(e,t){var n=_r;return e.current.memoizedState.isDehydrated&&(cn(e,t).flags|=256),e=Zs(e,t),e!==2&&(t=Le,Le=n,t!==null&&si(t)),e}function si(e){Le===null?Le=e:Le.push.apply(Le,e)}function zp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!ut(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $t(e,t){for(t&=~Qi,t&=~xo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function Cu(e){if(te&6)throw Error(M(327));Gn();var t=Ls(e,0);if(!(t&1))return $e(e,me()),null;var n=Zs(e,t);if(e.tag!==0&&n===2){var r=Tl(e);r!==0&&(t=r,n=ri(e,r))}if(n===1)throw n=Gr,cn(e,0),$t(e,t),$e(e,me()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,on(e,Le,wt),$e(e,me()),null}function Ki(e,t){var n=te;te|=1;try{return e(t)}finally{te=n,te===0&&(qn=me()+500,ho&&nn())}}function yn(e){Ht!==null&&Ht.tag===0&&!(te&6)&&Gn();var t=te;te|=1;var n=Je.transition,r=re;try{if(Je.transition=null,re=1,e)return e()}finally{re=r,Je.transition=n,te=t,!(te&6)&&nn()}}function Yi(){He=zn.current,ie(zn)}function cn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,pp(n)),ge!==null)for(n=ge.return;n!==null;){var r=n;switch(Ri(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fs();break;case 3:Kn(),ie(Ae),ie(Te),$i();break;case 5:zi(r);break;case 4:Kn();break;case 13:ie(de);break;case 19:ie(de);break;case 10:Di(r.type._context);break;case 22:case 23:Yi()}n=n.return}if(Se=e,ge=e=Yt(e.current,null),Ce=He=t,ye=0,Gr=null,Qi=xo=xn=0,Le=_r=null,an!==null){for(t=0;t<an.length;t++)if(n=an[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,r.next=l}n.pending=r}an=null}return e}function Vd(e,t){do{var n=ge;try{if(Mi(),Cs.current=Ks,Xs){for(var r=fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xs=!1}if(gn=0,we=xe=fe=null,Cr=!1,Hr=0,Vi.current=null,n===null||n.return===null){ye=1,Gr=t,ge=null;break}e:{var o=e,l=n.return,a=n,u=t;if(t=Ce,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=a,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=cu(l);if(w!==null){w.flags&=-257,du(w,l,a,o,t),w.mode&1&&uu(o,d,t),t=w,u=d;var v=t.updateQueue;if(v===null){var k=new Set;k.add(u),t.updateQueue=k}else v.add(u);break e}else{if(!(t&1)){uu(o,d,t),qi();break e}u=Error(M(426))}}else if(ue&&a.mode&1){var L=cu(l);if(L!==null){!(L.flags&65536)&&(L.flags|=256),du(L,l,a,o,t),Pi(Yn(u,a));break e}}o=u=Yn(u,a),ye!==4&&(ye=2),_r===null?_r=[o]:_r.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var f=Td(o,u,t);ru(o,f);break e;case 1:a=u;var c=o.type,h=o.stateNode;if(!(o.flags&128)&&(typeof c.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Xt===null||!Xt.has(h)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=Rd(o,a,t);ru(o,x);break e}}o=o.return}while(o!==null)}Kd(n)}catch(N){t=N,ge===n&&n!==null&&(ge=n=n.return);continue}break}while(!0)}function Qd(){var e=Ys.current;return Ys.current=Ks,e===null?Ks:e}function qi(){(ye===0||ye===3||ye===2)&&(ye=4),Se===null||!(xn&268435455)&&!(xo&268435455)||$t(Se,Ce)}function Zs(e,t){var n=te;te|=2;var r=Qd();(Se!==e||Ce!==t)&&(wt=null,cn(e,t));do try{$p();break}catch(s){Vd(e,s)}while(!0);if(Mi(),te=n,Ys.current=r,ge!==null)throw Error(M(261));return Se=null,Ce=0,ye}function $p(){for(;ge!==null;)Xd(ge)}function Fp(){for(;ge!==null&&!dh();)Xd(ge)}function Xd(e){var t=qd(e.alternate,e,He);e.memoizedProps=e.pendingProps,t===null?Kd(e):ge=t,Vi.current=null}function Kd(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Mp(n,t),n!==null){n.flags&=32767,ge=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ye=6,ge=null;return}}else if(n=Ip(n,t,He),n!==null){ge=n;return}if(t=t.sibling,t!==null){ge=t;return}ge=t=e}while(t!==null);ye===0&&(ye=5)}function on(e,t,n){var r=re,s=Je.transition;try{Je.transition=null,re=1,Hp(e,t,n,r)}finally{Je.transition=s,re=r}return null}function Hp(e,t,n,r){do Gn();while(Ht!==null);if(te&6)throw Error(M(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Sh(e,o),e===Se&&(ge=Se=null,Ce=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ps||(ps=!0,Jd(Ds,function(){return Gn(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Je.transition,Je.transition=null;var l=re;re=1;var a=te;te|=4,Vi.current=null,Lp(e,n),Wd(n,e),ip(Ll),Os=!!Dl,Ll=Dl=null,e.current=n,Op(n),fh(),te=a,re=l,Je.transition=o}else e.current=n;if(ps&&(ps=!1,Ht=e,Js=s),o=e.pendingLanes,o===0&&(Xt=null),mh(n.stateNode),$e(e,me()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(qs)throw qs=!1,e=ti,ti=null,e;return Js&1&&e.tag!==0&&Gn(),o=e.pendingLanes,o&1?e===ni?jr++:(jr=0,ni=e):jr=0,nn(),null}function Gn(){if(Ht!==null){var e=Tc(Js),t=Je.transition,n=re;try{if(Je.transition=null,re=16>e?16:e,Ht===null)var r=!1;else{if(e=Ht,Ht=null,Js=0,te&6)throw Error(M(331));var s=te;for(te|=4,U=e.current;U!==null;){var o=U,l=o.child;if(U.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for(U=d;U!==null;){var m=U;switch(m.tag){case 0:case 11:case 15:Nr(8,m,o)}var p=m.child;if(p!==null)p.return=m,U=p;else for(;U!==null;){m=U;var g=m.sibling,w=m.return;if(Fd(m),m===d){U=null;break}if(g!==null){g.return=w,U=g;break}U=w}}}var v=o.alternate;if(v!==null){var k=v.child;if(k!==null){v.child=null;do{var L=k.sibling;k.sibling=null,k=L}while(k!==null)}}U=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,U=l;else e:for(;U!==null;){if(o=U,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Nr(9,o,o.return)}var f=o.sibling;if(f!==null){f.return=o.return,U=f;break e}U=o.return}}var c=e.current;for(U=c;U!==null;){l=U;var h=l.child;if(l.subtreeFlags&2064&&h!==null)h.return=l,U=h;else e:for(l=c;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:go(9,a)}}catch(N){pe(a,a.return,N)}if(a===l){U=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,U=x;break e}U=a.return}}if(te=s,nn(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(io,e)}catch{}r=!0}return r}finally{re=n,Je.transition=t}}return!1}function Nu(e,t,n){t=Yn(n,t),t=Td(e,t,1),e=Qt(e,t,1),t=Pe(),e!==null&&(Vr(e,1,t),$e(e,t))}function pe(e,t,n){if(e.tag===3)Nu(e,e,n);else for(;t!==null;){if(t.tag===3){Nu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xt===null||!Xt.has(r))){e=Yn(n,e),e=Rd(t,e,1),t=Qt(t,e,1),e=Pe(),t!==null&&(Vr(t,1,e),$e(t,e));break}}t=t.return}}function Up(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Pe(),e.pingedLanes|=e.suspendedLanes&n,Se===e&&(Ce&n)===n&&(ye===4||ye===3&&(Ce&130023424)===Ce&&500>me()-Xi?cn(e,0):Qi|=n),$e(e,t)}function Yd(e,t){t===0&&(e.mode&1?(t=ss,ss<<=1,!(ss&130023424)&&(ss=4194304)):t=1);var n=Pe();e=Rt(e,t),e!==null&&(Vr(e,t,n),$e(e,n))}function Wp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Yd(e,n)}function Gp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(t),Yd(e,n)}var qd;qd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ae.current)Oe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Oe=!1,Pp(e,t,n);Oe=!!(e.flags&131072)}else Oe=!1,ue&&t.flags&1048576&&td(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;_s(e,t),e=t.pendingProps;var s=Vn(t,Te.current);Wn(t,n),s=Hi(null,t,r,e,s,n);var o=Ui();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ze(r)?(o=!0,Hs(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Oi(t),s.updater=mo,t.stateNode=s,s._reactInternals=t,Gl(t,r,e,n),t=Ql(null,t,r,!0,o,n)):(t.tag=0,ue&&o&&Ti(t),Re(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(_s(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Vp(r),e=st(r,e),s){case 0:t=Vl(null,t,r,e,n);break e;case 1:t=pu(null,t,r,e,n);break e;case 11:t=fu(null,t,r,e,n);break e;case 14:t=hu(null,t,r,st(r.type,e),n);break e}throw Error(M(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:st(r,s),Vl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:st(r,s),pu(e,t,r,s,n);case 3:e:{if(Dd(t),e===null)throw Error(M(387));r=t.pendingProps,o=t.memoizedState,s=o.element,id(e,t),Vs(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Yn(Error(M(423)),t),t=mu(e,t,r,n,s);break e}else if(r!==s){s=Yn(Error(M(424)),t),t=mu(e,t,r,n,s);break e}else for(Ue=Vt(t.stateNode.containerInfo.firstChild),Ge=t,ue=!0,lt=null,n=od(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qn(),r===s){t=Pt(e,t,n);break e}Re(e,t,r,n)}t=t.child}return t;case 5:return ad(t),e===null&&Hl(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,l=s.children,Ol(r,s)?l=null:o!==null&&Ol(r,o)&&(t.flags|=32),Md(e,t),Re(e,t,l,n),t.child;case 6:return e===null&&Hl(t),null;case 13:return Ld(e,t,n);case 4:return Ai(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xn(t,null,r,n):Re(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:st(r,s),fu(e,t,r,s,n);case 7:return Re(e,t,t.pendingProps,n),t.child;case 8:return Re(e,t,t.pendingProps.children,n),t.child;case 12:return Re(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,l=s.value,oe(Gs,r._currentValue),r._currentValue=l,o!==null)if(ut(o.value,l)){if(o.children===s.children&&!Ae.current){t=Pt(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){l=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=jt(-1,n&-n),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Ul(o.return,n,t),a.lanes|=n;break}u=u.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(M(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),Ul(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Re(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Wn(t,n),s=Ze(s),r=r(s),t.flags|=1,Re(e,t,r,n),t.child;case 14:return r=t.type,s=st(r,t.pendingProps),s=st(r.type,s),hu(e,t,r,s,n);case 15:return Pd(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:st(r,s),_s(e,t),t.tag=1,ze(r)?(e=!0,Hs(t)):e=!1,Wn(t,n),bd(t,r,s),Gl(t,r,s,n),Ql(null,t,r,!0,e,n);case 19:return Od(e,t,n);case 22:return Id(e,t,n)}throw Error(M(156,t.tag))};function Jd(e,t){return _c(e,t)}function Bp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ye(e,t,n,r){return new Bp(e,t,n,r)}function Ji(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vp(e){if(typeof e=="function")return Ji(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xi)return 11;if(e===yi)return 14}return 2}function Yt(e,t){var n=e.alternate;return n===null?(n=Ye(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bs(e,t,n,r,s,o){var l=2;if(r=e,typeof e=="function")Ji(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case bn:return dn(n.children,s,o,t);case gi:l=8,s|=8;break;case pl:return e=Ye(12,n,t,s|2),e.elementType=pl,e.lanes=o,e;case ml:return e=Ye(13,n,t,s),e.elementType=ml,e.lanes=o,e;case gl:return e=Ye(19,n,t,s),e.elementType=gl,e.lanes=o,e;case ac:return yo(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lc:l=10;break e;case ic:l=9;break e;case xi:l=11;break e;case yi:l=14;break e;case Ot:l=16,r=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=Ye(l,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function dn(e,t,n,r){return e=Ye(7,e,r,t),e.lanes=n,e}function yo(e,t,n,r){return e=Ye(22,e,r,t),e.elementType=ac,e.lanes=n,e.stateNode={isHidden:!1},e}function tl(e,t,n){return e=Ye(6,e,null,t),e.lanes=n,e}function nl(e,t,n){return t=Ye(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qp(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oo(0),this.expirationTimes=Oo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Zi(e,t,n,r,s,o,l,a,u){return e=new Qp(e,t,n,a,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Ye(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oi(o),e}function Xp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:En,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Zd(e){if(!e)return Jt;e=e._reactInternals;e:{if(kn(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ze(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(ze(n))return Zc(e,n,t)}return t}function ef(e,t,n,r,s,o,l,a,u){return e=Zi(n,r,!0,e,s,o,l,a,u),e.context=Zd(null),n=e.current,r=Pe(),s=Kt(n),o=jt(r,s),o.callback=t??null,Qt(n,o,s),e.current.lanes=s,Vr(e,s,r),$e(e,r),e}function vo(e,t,n,r){var s=t.current,o=Pe(),l=Kt(s);return n=Zd(n),t.context===null?t.context=n:t.pendingContext=n,t=jt(o,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Qt(s,t,l),e!==null&&(at(e,s,l,o),ks(e,s,l)),l}function eo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _u(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ea(e,t){_u(e,t),(e=e.alternate)&&_u(e,t)}function Kp(){return null}var tf=typeof reportError=="function"?reportError:function(e){console.error(e)};function ta(e){this._internalRoot=e}wo.prototype.render=ta.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));vo(e,t,null,null)};wo.prototype.unmount=ta.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yn(function(){vo(null,e,null,null)}),t[Tt]=null}};function wo(e){this._internalRoot=e}wo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ic();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zt.length&&t!==0&&t<zt[n].priority;n++);zt.splice(n,0,e),n===0&&Dc(e)}};function na(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function So(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ju(){}function Yp(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=eo(l);o.call(d)}}var l=ef(t,r,e,0,null,!1,!1,"",ju);return e._reactRootContainer=l,e[Tt]=l.current,Or(e.nodeType===8?e.parentNode:e),yn(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=eo(u);a.call(d)}}var u=Zi(e,0,!1,null,null,!1,!1,"",ju);return e._reactRootContainer=u,e[Tt]=u.current,Or(e.nodeType===8?e.parentNode:e),yn(function(){vo(t,u,n,r)}),u}function ko(e,t,n,r,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var a=s;s=function(){var u=eo(l);a.call(u)}}vo(t,l,e,s)}else l=Yp(n,t,e,s,r);return eo(l)}Rc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gr(t.pendingLanes);n!==0&&(Si(t,n|1),$e(t,me()),!(te&6)&&(qn=me()+500,nn()))}break;case 13:yn(function(){var r=Rt(e,1);if(r!==null){var s=Pe();at(r,e,1,s)}}),ea(e,1)}};ki=function(e){if(e.tag===13){var t=Rt(e,134217728);if(t!==null){var n=Pe();at(t,e,134217728,n)}ea(e,134217728)}};Pc=function(e){if(e.tag===13){var t=Kt(e),n=Rt(e,t);if(n!==null){var r=Pe();at(n,e,t,r)}ea(e,t)}};Ic=function(){return re};Mc=function(e,t){var n=re;try{return re=e,t()}finally{re=n}};jl=function(e,t,n){switch(t){case"input":if(vl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=fo(r);if(!s)throw Error(M(90));cc(r),vl(r,s)}}}break;case"textarea":fc(e,n);break;case"select":t=n.value,t!=null&&$n(e,!!n.multiple,t,!1)}};vc=Ki;wc=yn;var qp={usingClientEntryPoint:!1,Events:[Xr,In,fo,xc,yc,Ki]},fr={findFiberByHostInstance:ln,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jp={bundleType:fr.bundleType,version:fr.version,rendererPackageName:fr.rendererPackageName,rendererConfig:fr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Cc(e),e===null?null:e.stateNode},findFiberByHostInstance:fr.findFiberByHostInstance||Kp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ms.isDisabled&&ms.supportsFiber)try{io=ms.inject(Jp),yt=ms}catch{}}Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qp;Ve.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!na(t))throw Error(M(200));return Xp(e,t,null,n)};Ve.createRoot=function(e,t){if(!na(e))throw Error(M(299));var n=!1,r="",s=tf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Zi(e,1,!1,null,null,n,!1,r,s),e[Tt]=t.current,Or(e.nodeType===8?e.parentNode:e),new ta(t)};Ve.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=Cc(t),e=e===null?null:e.stateNode,e};Ve.flushSync=function(e){return yn(e)};Ve.hydrate=function(e,t,n){if(!So(t))throw Error(M(200));return ko(null,e,t,!0,n)};Ve.hydrateRoot=function(e,t,n){if(!na(e))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",l=tf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=ef(t,null,e,1,n??null,s,!1,o,l),e[Tt]=t.current,Or(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new wo(t)};Ve.render=function(e,t,n){if(!So(t))throw Error(M(200));return ko(null,e,t,!1,n)};Ve.unmountComponentAtNode=function(e){if(!So(e))throw Error(M(40));return e._reactRootContainer?(yn(function(){ko(null,null,e,!1,function(){e._reactRootContainer=null,e[Tt]=null})}),!0):!1};Ve.unstable_batchedUpdates=Ki;Ve.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!So(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return ko(e,t,n,!1,r)};Ve.version="18.3.1-next-f1338f8080-20240426";function nf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nf)}catch(e){console.error(e)}}nf(),nc.exports=Ve;var Zp=nc.exports,Eu=Zp;fl.createRoot=Eu.createRoot,fl.hydrateRoot=Eu.hydrateRoot;var A=(e=>(e.HOME="HOME",e.ENGLISH="ENGLISH",e.CHINESE="CHINESE",e.WRITING="WRITING",e.SCIENCE="SCIENCE",e.GAME="GAME",e.SCENE="SCENE",e.DRAWING="DRAWING",e.MATH="MATH",e.LOGIC="LOGIC",e.PROGRAMMING="PROGRAMMING",e.DIAGNOSTICS="DIAGNOSTICS",e))(A||{}),W=(e=>(e.IDLE="IDLE",e.LOADING="LOADING",e.SUCCESS="SUCCESS",e.ERROR="ERROR",e))(W||{});const em=({children:e,currentView:t,onNavigate:n,score:r=0,age:s,onSetAge:o,voiceId:l,onSetVoiceId:a,onOpenHistory:u})=>{const[d,m]=y.useState(!1);y.useEffect(()=>{const g=()=>{m(!!document.fullscreenElement)};document.addEventListener("fullscreenchange",g);const w=()=>{document.fullscreenElement||document.documentElement.requestFullscreen().catch(v=>{console.debug("Auto-fullscreen blocked or cancelled",v)}),window.removeEventListener("click",w),window.removeEventListener("touchstart",w)};return window.addEventListener("click",w),window.addEventListener("touchstart",w),()=>{document.removeEventListener("fullscreenchange",g),window.removeEventListener("click",w),window.removeEventListener("touchstart",w)}},[]);const p=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(g=>{alert("")})};return i.jsxs("div",{className:"min-h-screen flex flex-col font-sans text-gray-800",children:[i.jsx("header",{className:"bg-white/90 backdrop-blur-md sticky top-0 z-50 shadow-sm border-b border-gray-100 transition-all",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:scale-105 transition-transform flex-shrink-0",onClick:()=>n(A.HOME),children:[i.jsx("span",{className:"text-3xl animate-bounce",children:""}),i.jsxs("div",{className:"flex text-2xl font-black tracking-wider hidden sm:flex",children:[i.jsx("span",{className:"text-kid-purple",children:""}),i.jsx("span",{className:"text-kid-pink",children:""}),i.jsx("span",{className:"text-kid-yellow",children:""}),i.jsx("span",{className:"text-kid-blue",children:""})]})]}),i.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 overflow-x-auto no-scrollbar",children:[i.jsxs("div",{className:"flex items-center bg-indigo-50 rounded-full px-2 py-1 border border-indigo-100",children:[i.jsx("span",{className:"text-[10px] font-bold text-indigo-400 mr-1 hidden sm:inline",children:"AGE"}),i.jsx("select",{value:s,onChange:g=>o(parseInt(g.target.value)),className:"appearance-none bg-transparent text-indigo-700 font-black text-sm sm:text-lg focus:outline-none cursor-pointer hover:text-indigo-500 text-center w-10 sm:w-12",children:[3,4,5,6,7,8,9,10,11,12].map(g=>i.jsxs("option",{value:g,children:[g,""]},g))})]}),i.jsx("div",{className:"flex items-center bg-pink-50 rounded-full px-2 py-1 border border-pink-100",children:i.jsxs("select",{value:l,onChange:g=>a(g.target.value),className:"appearance-none bg-transparent text-pink-700 font-bold text-sm sm:text-base focus:outline-none cursor-pointer hover:text-pink-500 text-center px-1",title:"AI",children:[i.jsx("option",{value:"RANDOM",children:" "}),i.jsx("option",{value:"zh-CN-XiaoyuMultilingualNeural",children:" "}),i.jsx("option",{value:"zh-CN-XiaoshuangNeural",children:" "})]})}),i.jsxs("div",{className:"bg-yellow-100 text-yellow-800 px-3 py-1.5 rounded-full font-bold flex items-center gap-1 border-2 border-yellow-300 shadow-sm whitespace-nowrap",children:[i.jsx("span",{children:""}),i.jsx("span",{children:r})]}),i.jsx("button",{onClick:p,className:`p-2 rounded-full transition-colors ${d?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-500 hover:bg-purple-50"}`,title:d?"":"",children:d?"":""}),i.jsx("button",{onClick:u,className:"p-2 rounded-full bg-blue-50 text-kid-blue hover:bg-blue-100 transition-colors",title:"",children:""}),i.jsx("nav",{className:"flex gap-2",children:t!==A.HOME&&i.jsxs("button",{onClick:()=>n(A.HOME),className:"p-2 sm:px-4 sm:py-2 rounded-full bg-gray-100 hover:bg-gray-200 text-sm font-medium transition-colors whitespace-nowrap",children:[" ",i.jsx("span",{className:"hidden sm:inline",children:""})]})})]})]})}),i.jsx("main",{className:"flex-1 max-w-7xl mx-auto w-full px-4 py-6",children:e}),i.jsx("footer",{className:"py-6 text-center text-gray-400 text-sm",children:i.jsx("p",{children:"Powered by Dad  Designed for RuoYi"})})]})},tm=({isOpen:e,onClose:t,history:n,onRestore:r,onClear:s,onResetProgress:o})=>{const[l,a]=y.useState(""),u=n.reduce((f,c)=>{const h=new Date(c.timestamp),x=`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}-${String(h.getDate()).padStart(2,"0")}`;return f[x]||(f[x]=[]),f[x].push(c),f},{}),d=Object.keys(u).sort((f,c)=>c.localeCompare(f));if(y.useEffect(()=>{e&&d.length>0&&(!l||!u[l])&&a(d[0])},[e,n,l,d.length]),!e)return null;const m=u[l]||[],p=m.filter(f=>f.mode===A.CHINESE&&f.type==="FLASHCARD").length,g=m.filter(f=>f.mode===A.ENGLISH&&f.type==="FLASHCARD").length,w=m.filter(f=>f.type==="WRITING").length,v=f=>{const[c,h,x]=f.split("-").map(Number);return new Date(c,h-1,x).toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit",weekday:"short"})},k=()=>{window.confirm("")&&(o(),t())},L=()=>{window.confirm("")&&s()};return i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:t}),i.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[85vh] animate-bounce-in relative z-10",children:[i.jsxs("div",{className:"p-6 bg-white border-b border-gray-100 text-gray-800",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[i.jsx("span",{children:""})," "]}),i.jsx("button",{onClick:t,className:"bg-gray-100 hover:bg-gray-200 rounded-full w-8 h-8 flex items-center justify-center font-bold text-gray-500 transition-colors",children:""})]}),i.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar mb-4",children:[d.length===0&&i.jsx("span",{className:"text-gray-400 text-sm",children:""}),d.map(f=>i.jsx("button",{onClick:()=>a(f),className:`px-3 py-1 rounded-full text-xs font-bold whitespace-nowrap transition-colors border ${l===f?"bg-kid-blue text-white border-kid-blue shadow-md":"bg-white text-black border-gray-300 hover:bg-gray-100"}`,children:v(f)},f))]}),i.jsxs("div",{className:"flex justify-between bg-gray-50 rounded-xl p-3 border border-gray-100",children:[i.jsxs("div",{className:"text-center flex-1",children:[i.jsx("p",{className:"text-2xl font-black text-kid-yellow",children:p}),i.jsx("p",{className:"text-[10px] text-gray-400",children:""})]}),i.jsx("div",{className:"w-px bg-gray-200"}),i.jsxs("div",{className:"text-center flex-1",children:[i.jsx("p",{className:"text-2xl font-black text-kid-pink",children:g}),i.jsx("p",{className:"text-[10px] text-gray-400",children:""})]}),i.jsx("div",{className:"w-px bg-gray-200"}),i.jsxs("div",{className:"text-center flex-1",children:[i.jsx("p",{className:"text-2xl font-black text-kid-green",children:w}),i.jsx("p",{className:"text-[10px] text-gray-400",children:""})]})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 no-scrollbar bg-gray-50",children:m.length===0?i.jsxs("div",{className:"text-center text-gray-400 py-10",children:[i.jsx("p",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:""})]}):m.map(f=>i.jsxs("button",{onClick:()=>{f.type!=="WRITING"&&(r(f),t())},disabled:f.type==="WRITING",className:"w-full bg-white border border-gray-200 rounded-xl p-3 flex items-center gap-3 hover:shadow-md transition-all text-left shadow-sm group",children:[i.jsx("div",{className:`
                  w-10 h-10 rounded-full flex items-center justify-center text-lg shadow-sm shrink-0
                  ${f.type==="WRITING"?"bg-green-100":f.mode===A.CHINESE?"bg-yellow-100":"bg-pink-100"}
                `,children:f.type==="WRITING"?"":f.type==="SCIENCE"?"":f.mode===A.CHINESE?"":""}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex justify-between items-baseline",children:[i.jsx("p",{className:"font-bold text-gray-900 truncate text-base",children:f.preview}),i.jsx("span",{className:"text-[10px] text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full whitespace-nowrap ml-2",children:new Date(f.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),i.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:f.type==="WRITING"?"":f.type==="SCIENCE"?"":f.mode===A.CHINESE?"":""})]}),f.type!=="WRITING"&&i.jsx("span",{className:"text-gray-300 group-hover:text-kid-blue text-xl",children:""})]},f.id))}),i.jsxs("div",{className:"p-4 border-t border-gray-100 bg-white flex justify-between items-center gap-4",children:[i.jsx("button",{onClick:L,className:"text-gray-400 text-sm hover:text-red-500 flex items-center gap-1 transition-colors",children:" "}),i.jsx("button",{onClick:k,className:"text-gray-400 text-sm hover:text-orange-500 flex items-center gap-1 transition-colors",children:" "})]})]})]})},bu=({children:e,className:t=""})=>{const n=y.useRef(null),[r,s]=y.useState(!1),[o,l]=y.useState(0),[a,u]=y.useState(0),d=w=>{n.current&&(s(!0),l(w.pageX-n.current.offsetLeft),u(n.current.scrollLeft))},m=()=>s(!1),p=()=>s(!1),g=w=>{if(!r||!n.current)return;w.preventDefault();const k=(w.pageX-n.current.offsetLeft-o)*1.5;n.current.scrollLeft=a-k};return i.jsx("div",{ref:n,className:`${t} ${r?"cursor-grabbing":"cursor-grab"}`,onMouseDown:d,onMouseLeave:m,onMouseUp:p,onMouseMove:g,children:e})},Tu=({onNavigate:e,progress:t})=>{const n=[{id:A.ENGLISH,title:"",subtitle:"English",icon:"",color:"bg-kid-pink"},{id:A.CHINESE,title:"",subtitle:"Chinese",icon:"",color:"bg-kid-yellow"},{id:A.MATH,title:"",subtitle:"Math",icon:"",color:"bg-blue-400"},{id:A.LOGIC,title:"",subtitle:"Logic",icon:"",color:"bg-indigo-400"},{id:A.WRITING,title:"",subtitle:"Writing",icon:"",color:"bg-kid-green"},{id:A.DRAWING,title:"",subtitle:"Painting",icon:"",color:"bg-purple-400"}],r=[{id:A.GAME,title:"",subtitle:"Adventure",icon:"",color:"bg-green-400"},{id:A.PROGRAMMING,title:"",subtitle:"Coding",icon:"",color:"bg-gray-800"},{id:A.SCENE,title:"",subtitle:"Chat",icon:"",color:"bg-orange-400"},{id:A.SCIENCE,title:"",subtitle:"Science",icon:"",color:"bg-kid-blue"}],s=100,o=l=>{const a=t[l.id]||{xp:0,level:1},u=a.xp%s/s*100;return i.jsxs("div",{onClick:d=>{e(l.id)},className:"relative flex-shrink-0 w-36 h-40 sm:w-44 sm:h-48 rounded-3xl p-4 bg-white shadow-lg border-2 border-transparent hover:border-blue-200 hover:scale-105 transition-all duration-300 flex flex-col justify-between overflow-hidden snap-center select-none cursor-pointer",children:[i.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 -mr-6 -mt-6 rounded-full opacity-15 ${l.color}`}),i.jsx("div",{className:`absolute bottom-0 left-0 w-16 h-16 -ml-4 -mb-4 rounded-full opacity-10 ${l.color}`}),i.jsxs("div",{className:"relative z-10 w-full text-center pointer-events-none",children:[i.jsx("div",{className:"text-4xl sm:text-5xl mb-2 drop-shadow-sm",children:l.icon}),i.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 leading-tight",children:l.title}),i.jsx("p",{className:"text-xs text-gray-400 font-bold mt-1 uppercase",children:l.subtitle})]}),i.jsxs("div",{className:"relative z-10 w-full mt-2 pointer-events-none",children:[i.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-gray-400 mb-1",children:[i.jsxs("span",{children:["Lv.",a.level]}),i.jsxs("span",{children:[a.xp,"XP"]})]}),i.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5 overflow-hidden",children:i.jsx("div",{className:`h-1.5 rounded-full transition-all duration-1000 ${l.color.replace("bg-","bg-")}`,style:{width:`${u}%`}})})]})]},l.id)};return i.jsxs("div",{className:"flex flex-col h-full justify-center space-y-8 animate-fade-in-up pb-4 select-none",children:[i.jsx("div",{className:"text-center py-2",children:i.jsxs("h2",{className:"text-3xl font-black text-gray-800 tracking-tight",children:["!  ",i.jsx("span",{className:"text-kid-blue",children:""})]})}),i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3 px-4",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("h3",{className:"text-lg font-bold text-gray-700",children:""})]}),i.jsxs(bu,{className:"flex gap-4 overflow-x-auto pb-6 px-4 no-scrollbar snap-x touch-pan-x",children:[n.map(l=>o(l)),i.jsx("div",{className:"w-2 flex-shrink-0"})]})]}),i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3 px-4",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("h3",{className:"text-lg font-bold text-gray-700",children:""})]}),i.jsxs(bu,{className:"flex gap-4 overflow-x-auto pb-6 px-4 no-scrollbar snap-x touch-pan-x",children:[r.map(l=>o(l)),i.jsx("div",{className:"w-2 flex-shrink-0"})]})]}),i.jsx("div",{className:"text-center mt-8",children:i.jsx("button",{onClick:()=>e(A.DIAGNOSTICS),className:"text-gray-300 hover:text-gray-500 text-sm p-2",title:"",children:""})})]})},Co="47023eeb5c024b9fb2149a072e02724f.6D3eXSB64cwze7tZ",No="https://open.bigmodel.cn/api/paas/v4",nm=e=>{const t=e.indexOf("["),n=e.indexOf("{");if(t!==-1&&(n===-1||t<n)){let r=0;for(let s=t;s<e.length;s++)if(e[s]==="["?r++:e[s]==="]"&&r--,r===0)return e.substring(t,s+1)}if(n!==-1){let r=0;for(let s=n;s<e.length;s++)if(e[s]==="{"?r++:e[s]==="}"&&r--,r===0)return e.substring(n,s+1)}return e},tt=async(e,t="glm-4-flash",n=.7,r=!0)=>{try{const s=await fetch(`${No}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Co}`},body:JSON.stringify({model:t,messages:e,temperature:n,stream:!1})});if(!s.ok)throw new Error(await s.text());let o=(await s.json()).choices[0].message.content;return r&&(o=o.replace(/```json\n?|```/g,"").trim(),o=nm(o)),o}catch(s){throw console.error("AI Service Error:",s),s}},_o=(e,t)=>e<=5?t==="en"?"Target Audience: 3-5 year old toddlers. STRICT CONSTRAINT: Words must be extremely common daily objects (e.g., Cat, Dog, Apple, Bus). NO abstract nouns (e.g. Dream, Future, Idea). Words max 4-5 letters. Sentences: MAX 3-4 WORDS. Pattern: 'It is a [word]'. Keep it extremely simple for a toddler.":"3-51. 2. 3. 4. 3-5":e<=7?t==="en"?"suitable for a 6-7 year old child. Simple school level vocabulary.":"6-7":e<=9?t==="en"?"suitable for a 8-9 year old student. Interesting vocabulary.":"8-9":"suitable for a 10-12 year old student",rm=async(e,t,n,r=[])=>{const s=_o(n,t),o=r.join(", "),l=r.length>0?`CRITICAL STRICT RULE: You MUST NOT generate any word present in this list: [${o}]. If a word is in the list, PICK ANOTHER. Randomize your selection.`:"";let a="",u="";const d=t==="en"&&/^[A-Z]$/.test(e);t==="en"?(a="You are an English teacher for Chinese kids. Return ONLY valid JSON.",d?u=`5${e}JSON${s}
         ${l} WORD
         3-6
         sentenceTranslation
         imagePrompt
         JSON
[{"word": "Apple", "translation": "", "pinyin": "p.l", "sentence": "It is a red apple.", "sentenceTranslation": "", "imagePrompt": "Apple"}, ..]`:u=`Generate a JSON ARRAY of 5 unique English words ${s} related to the topic "${e}". 
         ${l}
         Include Chinese translation for the WORD.
         Include a VERY SIMPLE example sentence (3-6 words) using the word.
         IMPORTANT: Include the Chinese translation of the sentence in 'sentenceTranslation'.
         IMPORTANT: 'imagePrompt' must be EXTREMELY SIMPLE. Just the object name.
         
         Return JSON format:
         [{"word":"Apple","translation":"","pinyin":"p.l","sentence":"I like apples.","sentenceTranslation":"","imagePrompt":"Apple"}, ...]`):(a=" JSON ",u=` 5  "${e}"  (Hanzi)  JSON ${s}
       ${l}
       
       word:  ( "")
       translation: 
       pinyin: 
       sentence:  (3-6)
       sentenceTranslation: 
       imagePrompt:  "Cat".
       
        JSON:
       [{"word":"","translation":"Cat","pinyin":"mo","sentence":"","sentenceTranslation":"The kitten is sleeping.","imagePrompt":"Cat"}, ...]`);try{const m=await tt([{role:"system",content:a},{role:"user",content:u}],"glm-4-flash",.9),p=JSON.parse(m);return Array.isArray(p)?p:[p]}catch(m){return console.error("Batch parse error",m),[{word:e,translation:"...",pinyin:"",sentence:"Please try again.",sentenceTranslation:"",imagePrompt:e}]}},oi=async e=>{for(let n=0;n<3;n++)try{const r=await fetch(`${No}/images/generations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Co}`},body:JSON.stringify({model:"CogView-3-Flash",prompt:e})});if(!r.ok)throw new Error(await r.text());return(await r.json()).data[0].url}catch(r){console.warn(`AI Image Generation Attempt ${n+1}/3 failed:`,r),n<2?await new Promise(s=>setTimeout(s,1e3*(n+1))):console.error("AI Image Generation Final Error:",r)}return"https://picsum.photos/400/300"},It=async e=>{try{const t=`https://tse1-mm.cn.bing.net/th?q=${encodeURIComponent(e+" cartoon illustration")}&w=600&h=600&c=7&rs=1&p=0&pid=1.7`;return Promise.resolve(t)}catch{return"https://picsum.photos/400/300"}},sm=async(e,t=[])=>{const n=e<=5?"suitable for a 3-5 year old toddler. Very simple object (e.g. Apple, Sun, Flower, Ball). Single noun.":_o(e,"en");t.slice(-20).join(", ");const r=`/ 
    ${n} 
    
    JSON{"topic": "" }`;try{return JSON.parse(await tt([{role:"user",content:r}],"glm-4-flash",.95)).topic||"Sun"}catch{return"Flower"}},om=async e=>{try{const t=`${e}`;return await oi(t)}catch{return"https://picsum.photos/400/300"}},lm=async(e,t,n)=>{const r=Date.now(),s=`You are a kind and encouraging art teacher for a ${n} year old child.
    The child drew a "${e}".
    
    Task: Rate the drawing.
    1. Score from 1-3 stars (3=Great, 2=Good, 1=Keep trying).
    2. Provide a short, encouraging comment in CHINESE suitable for a child.
    
    Return JSON: { "score": 1-3, "comment": "Chinese comment here" }
    Request ID: ${r}`;try{let l=(await(await fetch(`${No}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Co}`},body:JSON.stringify({model:"glm-4v-flash",messages:[{role:"user",content:[{type:"text",text:s},{type:"image_url",image_url:{url:`data:image/png;base64,${t}`}}]}]})})).json()).choices[0].message.content.replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(l)}catch(o){return console.error("Drawing grading failed",o),{score:3,comment:""}}},im=async(e,t)=>{const n=_o(e,"zh"),r=t.slice(-50).join(","),s=t.length>0?`AVOID these characters: ${r}`:"",o=`Generate a JSON ARRAY of 20 distinct Chinese characters suitable for handwriting practice.
  ${n}
  ${s}
  Return valid JSON Array of strings: ["", "", "", "", "", ...]`;try{const l=JSON.parse(await tt([{role:"user",content:o}]));return Array.isArray(l)?l:["","","","",""]}catch{return["","","","",""]}},am=async(e,t,n)=>{if(!t)return{score:1,comment:""};const r=`
    Role: Pronunciation Teacher for Kids.
    Target Word: "${e}"
    Student Said (Recognized): "${t}"
    Language: ${n==="en"?"English":"Chinese"}

    Task:
    1. Compare the target word with what was spoken.
    2. Break down the target word into syllables (English) or characters (Chinese).
    3. Determine if each part was pronounced correctly based on the recognized text.
    4. Give a score (1-3). 3=Excellent, 2=Close, 1=Needs Improvement.

    Return JSON:
    {
      "score": number (1-3),
      "comment": "Short encouraging feedback in Chinese",
      "userPhonetic": "IPA/Pinyin of spoken text (approx)",
      "correctPhonetic": "IPA/Pinyin of target word",
      "breakdown": [
         { "text": "Syl", "pinyinOrIpa": "...", "status": "correct" },
         { "text": "la", "pinyinOrIpa": "...", "status": "incorrect" },
         { "text": "ble", "pinyinOrIpa": "...", "status": "correct" }
      ]
    }
  `;try{return JSON.parse(await tt([{role:"user",content:r}]))}catch{return{score:1,comment:"",breakdown:e.split("").map(o=>({text:o,status:"incorrect"}))}}},rf=async(e,t,n)=>{const r=Date.now(),s=`
  ${n?"":""} ${e} 
  
  
  - ****
  -  1-3  (3=, 2=, 1=).
  - JSON: { "score": 1-3, "comment": "" }
  
  Request ID: ${r}`;try{let l=(await(await fetch(`${No}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Co}`},body:JSON.stringify({model:"glm-4v-flash",messages:[{role:"user",content:[{type:"text",text:s},{type:"image_url",image_url:{url:`data:image/png;base64,${t}`}}]}]})})).json()).choices[0].message.content.replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(l)}catch(o){return console.error("Handwriting grading failed",o),{score:2,comment:""}}},um=async e=>{const n=`Generate a JSON Array of 3 fun, curious science questions ${_o(e,"zh")} that a child might ask. 
    Examples: "?", "?", "?"
    Return ONLY the JSON array of strings.`;try{const r=JSON.parse(await tt([{role:"user",content:n}]));return Array.isArray(r)?r:["","",""]}catch{return["","",""]}},cm=async e=>{const t=`Generate a JSON ARRAY of 3 random, interesting science facts for a ${e} year old child. 
    Topics must be diverse (Animals, Space, Nature, Human Body).
    
    Return JSON format:
    [{
      "topic": "Title in Chinese",
      "fact": "Short teaser/hook in Chinese",
      "detail": "Simple scientific explanation in Chinese",
      "imagePrompt": "Cute cartoon illustration of [topic], educational, clear, single object"
    }, ...]`;try{const n=JSON.parse(await tt([{role:"user",content:t}],"glm-4-flash",.9));return Array.isArray(n)?n:[n]}catch(n){return console.error(n),[{topic:"",fact:"",detail:"",imagePrompt:"Cute moon reflecting sunlight cartoon"}]}},dm=async(e,t,n=[])=>{const r=`
  1. 
  2. 
  3. 
   ANSWER:[] KEYWORD:[]`,s=n.slice(-6).map(d=>({role:d.role==="user"?"user":"assistant",content:d.content})),o=[{role:"system",content:r},...s,{role:"user",content:e}],l=await tt(o,"glm-4-flash",.7,!1),a=l.match(/ANSWER:\s*(.+?)(?=KEYWORD:|$)/s),u=l.match(/KEYWORD:\s*(.+)/);return{question:e,answer:a?a[1].trim():l,imageUrl:u?u[1].trim():"Science"}},Ru=async e=>{const t=`Create a fun, dynamic mini-game scenario for a child using the word "${e}".
  
  Randomly select ONE of two game types: 
  Type 'SPEAK': The child must say the word to defeat a monster or open a chest.
  Type 'QUIZ': A multiple choice question to solve a puzzle.

  Output JSON format:
  {
    "type": "SPEAK" or "QUIZ",
    "introText": "Chinese intro (e.g.  [Monster]  [TargetWord] )",
    "successText": "Chinese success message (e.g. )",
    "imagePrompt": "3D cartoon style, ${e} as a cute fantasy monster or item, colorful, vibrant",
    "question": "Chinese question (if QUIZ)",
    "options": ["Option A", "Option B", "Option C"] (if QUIZ),
    "correctAnswer": "Correct Option Text" (if QUIZ)
  }`,n=await tt([{role:"user",content:t}]);try{const r=JSON.parse(n);return{...r,id:Date.now().toString(),targetWord:e,type:r.type||"SPEAK"}}catch{return{id:Date.now().toString(),type:"SPEAK",targetWord:e,introText:`${e}`,successText:"",imagePrompt:`${e} fantasy item`}}},fm=async()=>{const e=`Create a roleplay scenario for a child.
  1. Pick a popular style character (e.g., Peppa Pig style, Paw Patrol style, Doraemon style).
  2. Pick a common setting (e.g., Park, Bedroom, School).
  3. Write an opening line inviting the child to talk.
  
  Return JSON:
  {
    "sceneName": " ()",
    "characterName": " (, e.g. , )",
    "characterAvatarPrompt": "3D cartoon character, [Character Name] style, cute, facing forward, white background",
    "bgPrompt": "Cartoon illustration of [scene] background, vibrant colors, animation style",
    "openingLine": "Opening greeting in Chinese"
  }`;try{return JSON.parse(await tt([{role:"user",content:e}]))}catch{return{sceneName:"",characterName:"",characterAvatarPrompt:"Cute pink pig cartoon 3d",bgPrompt:"Sunny hill background",openingLine:""}}},hm=async(e,t,n)=>{const r=[{role:"system",content:`You are ${e.characterName} in ${e.sceneName}. 
      Target audience: 5-year-old child.
      Language: Chinese.
      Keep replies short, fun, and encouraging. 
      Act like the cartoon character.
      Ask simple questions to keep conversation going.`},...t,{role:"user",content:n}];return await tt(r,"glm-4-flash",.8,!1)},pm=async e=>{let t="";e<=5?t="Target: 3-5 year olds. VERY SIMPLE. Use 'PATTERN', 'CLASSIFICATION', or 'GUESS_OBJECT'. For Classification, use distinct objects (e.g., 3 Fruits vs 1 Car). For Guess, use a common animal/item. NO MATH.":e<=8?t="Target: 6-8 year olds. Moderate difficulty. Pattern (shapes/colors), Classification (categories), or Guess Object.":t="Target: 9+ year olds. Include 'MATH_LOGIC', more complex patterns, or tricky classifications.";const n=`${t}  ${Date.now()}
   - ).
  - 
  - GUESS_OBJECT/
  
  
  1imagePromptpartialImagePrompt
  3"isCorrect"
  
  Return JSON:
  {
    "type": "PATTERN" | "CLASSIFICATION" | "GUESS_OBJECT" | "MATH_LOGIC",
    "question": "Question text in Chinese (e.g.  or )",
    "partialImagePrompt": " GUESS_OBJECT : ",
    "options": [
      { "id": "A", "content": "Text/Emoji", "isCorrect": boolean, "imagePrompt": "AI" },
      { "id": "B", "content": "...", "isCorrect": boolean, "imagePrompt": "AI" }
    ],
    "hint": "Subtle hint in Chinese",
    "explanation": "Explanation in Chinese"
  }`;try{return JSON.parse(await tt([{role:"user",content:n}],"glm-4-flash",.9))}catch{return{type:"PATTERN",question:", , , , ",options:[{id:"A",content:"",isCorrect:!0,imagePrompt:"Red Apple cartoon"},{id:"B",content:"",isCorrect:!1,imagePrompt:"Yellow Banana cartoon"}],hint:"",explanation:""}}},mm=async e=>{const t=e<=5?4:5,n=`
  ${t}x${t}
  ${e}
  ${Date.now()}
  - 
  - 
  - brokenCode
  1. 
  2. 
  3. 
  4. COLLECTION1-2
  5. BrokenCode
    
  Return JSON:
  {
    "mode": "CLASSIC" | "COLLECTION" | "DEBUG",
    "theme": "Space" | "Forest" | "Ocean" | "City",
    "gridSize": ${t},
    "start": { "x": 0, "y": 0, "dir": 1 }, 
    "target": { "x": 2, "y": 2 },
    "obstacles": [{ "x": 1, "y": 1 }],
    "items": [{ "x": 1, "y": 0 }],
    "brokenCode": ["F", "F", "L"], 
    "introText": "Story intro in Chinese based on theme"
  }`;try{return JSON.parse(await tt([{role:"user",content:n}],"glm-4-flash",.9))}catch{return{gridSize:4,mode:"CLASSIC",theme:"Forest",start:{x:0,y:0,dir:1},target:{x:3,y:0},obstacles:[{x:1,y:0}],items:[],introText:""}}};let Fe=null,qe=!1;const Er=new Map,jn=new Map;let sf="a72250317ca2ff2d27f01dabbef32ac3",ht=null;const _n=e=>{};function of(e){return new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{if(typeof r.result=="string"){const s=r.result.split(",")[1];t(s)}else n(new Error("Failed to convert blob to base64"))},r.onerror=n,r.readAsDataURL(e)})}const Zt=["zh-CN-XiaoyuMultilingualNeural","zh-CN-XiaoshuangNeural"],rl=()=>{Er.forEach(e=>URL.revokeObjectURL(e)),Er.clear(),jn.clear()},gt=async(e,t)=>{await ra(e,t,!1)},lf=async()=>{try{console.log("Attempting to refresh TTS token...");const t="https://1252112082-cocmqc4jel.ap-guangzhou.tencentscf.com/proxy?url="+encodeURIComponent("https://www.ttsonline.cn/"),s=(await(await fetch(t)).text()).match(/token\s*=\s*'([a-f0-9]+)'/);if(s&&s[1])return console.log("New TTS Token found:",s[1]),sf=s[1],s[1]}catch(e){console.error("Failed to refresh TTS token:",e)}return null},Pu=async(e,t,n)=>{const s="https://1252112082-cocmqc4jel.ap-guangzhou.tencentscf.com/proxy?url="+encodeURIComponent("https://www.ttsonline.cn/getSpeek.php"),o=new URLSearchParams;o.append("language",""),o.append("voice",t),o.append("text",e),o.append("role","0"),o.append("style","0"),o.append("rate","-2"),o.append("pitch","0"),o.append("kbitrate","audio-16khz-32kbitrate-mono-mp3"),o.append("silence",""),o.append("styledegree","1"),o.append("volume","75"),o.append("predict","0"),o.append("yzm","202409282320"),o.append("replice","1"),o.append("token",n);const l=await fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o});if(!l.ok)throw new Error("Network response not ok");const a=await l.json();if(a.code===402)throw new Error("TOKEN_EXPIRED");if(a.code===200&&a.download){const u=a.download,d="https://1252112082-cocmqc4jel.ap-guangzhou.tencentscf.com/proxy?url="+encodeURIComponent(u),m=await fetch(d);if(!m.ok)throw new Error("Audio file fetch failed");const p=await m.blob();return URL.createObjectURL(p)}throw new Error("API Error: "+(a.msg||"Unknown"))},ra=async(e,t,n=!0)=>{if(!e)return{play:async()=>{},dispose:()=>{}};let r=t;r==="RANDOM"&&(r=Zt[Math.floor(Math.random()*Zt.length)]);const s=`${r}:${e}`;if(Er.has(s)){if(!n)return;const l=Er.get(s),a=new Audio(l);return{play:()=>new Promise(u=>{if(qe){u();return}Fe=a,a.onended=()=>{Fe=null,u()},a.onerror=()=>{Fe=null,u()},a.play().catch(()=>u())}),dispose:()=>{}}}if(jn.has(s))try{const l=await jn.get(s);if(!n)return;const a=new Audio(l);return{play:()=>new Promise(u=>{if(qe){u();return}Fe=a,a.onended=()=>{Fe=null,u()},a.onerror=()=>{Fe=null,u()},a.play().catch(()=>u())}),dispose:()=>{}}}catch{}const o=(async()=>{try{return await Pu(e,r,sf)}catch(l){if(l.message==="TOKEN_EXPIRED"){const a=await lf();if(a)return await Pu(e,r,a)}throw l}})();jn.set(s,o);try{const l=await o;if(Er.set(s,l),jn.delete(s),!n)return;const a=new Audio(l);return{play:()=>new Promise(u=>{if(qe){u();return}Fe=a,a.onended=()=>{Fe=null,u()},a.onerror=()=>{Fe=null,u()},a.play().catch(()=>u())}),dispose:()=>{}}}catch{jn.delete(s)}if(n)return{play:()=>gm(e),dispose:()=>{}}},gm=e=>qe?Promise.resolve():new Promise(t=>{if(!window.speechSynthesis){t();return}window.speechSynthesis.cancel();const n=new SpeechSynthesisUtterance(e);n.lang="zh-CN",n.rate=.8;const s=window.speechSynthesis.getVoices().find(o=>o.lang.includes("zh")&&(o.name.includes("Google")||o.name.includes("Microsoft")||o.name.includes("Xiaoxiao")));s&&(n.voice=s),n.onend=()=>t(),n.onerror=()=>t(),window.speechSynthesis.speak(n)}),We=()=>{qe=!0,Fe&&(Fe.pause(),Fe.currentTime=0,Fe=null),window.speechSynthesis&&window.speechSynthesis.cancel(),setTimeout(()=>{qe=!1},50)},J=async(e,t="RANDOM",n=!0)=>{n&&(We(),await new Promise(s=>setTimeout(s,50)),qe=!1);const r=await ra(e,t);r&&!qe&&(await r.play(),r.dispose())},xm=async(e,t)=>{We(),await new Promise(r=>setTimeout(r,60)),qe=!1;const n=e.map(r=>ra(r,t,!1));if(await Promise.all(n),!qe)for(const r of e){if(qe)break;await J(r,t,!1),qe||await new Promise(s=>setTimeout(s,200))}},Yr=(e,t,n,r)=>{const s=window.SpeechRecognition||window.webkitSpeechRecognition;if(!s)return r(""),null;if(ht){try{_n("Stopping existing recognition instance..."),ht.onend=null,ht.onerror=null,ht.abort()}catch{}ht=null}We();let o=null,l=0;const a=4;let u=!1;const d=()=>{const m=new s;if(o=m,ht=m,e==="en")m.lang="en-US";else{const h=["zh-CN","cmn-Hans-CN","zh"];m.lang=h[l%h.length]}m.continuous=!1,m.interimResults=!0,m.maxAlternatives=1;let p="",g="",w=!1,v=!1,k=!1,L=0,f=null,c=null;_n(`Initializing SpeechRecognition (Lang: ${m.lang}) (Retry: ${l})`),m.onstart=()=>{L=Date.now(),l<a&&(c=setTimeout(()=>{!k&&!u&&o===m&&(l++,m.abort(),setTimeout(d,l*500))},3e3)),f=setTimeout(()=>{!k&&!w&&!v&&!u&&(m.abort(),v=!0,r(" (Timeout)"))},1e4)},m.onaudiostart=()=>{k=!0,c&&clearTimeout(c)},m.onsoundstart=()=>{k=!0},m.onspeechstart=()=>{k=!0},m.onresult=h=>{f&&clearTimeout(f),c&&clearTimeout(c),k=!0;let x="";for(let N=h.resultIndex;N<h.results.length;++N)h.results[N].isFinal?(p+=h.results[N][0].transcript,_n(`Result [Final]: ${h.results[N][0].transcript}`)):x+=h.results[N][0].transcript;g=x},m.onend=()=>{f&&clearTimeout(f),c&&clearTimeout(c),ht===m&&(ht=null);const h=Date.now()-L;if(!w&&!v&&!u&&h<500&&l<a){const x=(l+1)*300;l++,setTimeout(d,x);return}if(!w&&!v){const x=(p+g).trim();if(x)w=!0,t(x);else{if(!k&&!u&&l<a){l++,setTimeout(d,500);return}let N="";!k&&!u&&(N=" (No audio signal detected)"),u||r(N),v=!0}}n()},m.onerror=h=>{if(f&&clearTimeout(f),c&&clearTimeout(c),ht===m&&(ht=null),h.error==="aborted"){if(Date.now()-L<1e3&&l<a&&!u){const T=(l+1)*300;l++,setTimeout(d,T);return}return}const x=`Speech error: ${h.error} ${h.message?"- "+h.message:""}`;if(console.error(x),_n(`Event: onError - ${h.error}`),h.error==="no-speech"&&l<a&&!u){const b=(l+1)*300;l++,setTimeout(d,b);return}let N=` (${h.error})`;h.error==="no-speech"?N=" (no-speech)":h.error==="not-allowed"||h.error==="service-not-allowed"?N=" (not-allowed)":h.error==="network"?N=" (network)":h.error==="audio-capture"&&(N=" (audio-capture)"),h.message&&(N+=` - ${h.message}`),w||(v=!0,r(N))};try{_n("Calling recognition.start()..."),m.start()}catch(h){console.error(h),r("")}};return d(),{stop:()=>{u=!0;try{_n("Manual stop triggered"),o&&o.stop()}catch{}},abort:()=>{u=!0;try{o&&o.abort()}catch{}}}},Et=e=>new Promise((t,n)=>{const r=new Image;r.src=e,r.onload=()=>t(),r.onerror=()=>{console.warn(`Failed to preload image: ${e}`),t()}}),rn=({text:e="..."})=>i.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-4",children:[i.jsxs("div",{className:"relative w-20 h-20",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-full rounded-full border-4 border-kid-blue opacity-25 animate-ping"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-full rounded-full border-4 border-t-kid-pink border-r-kid-yellow border-b-kid-green border-l-kid-blue animate-spin"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-2xl animate-bounce",children:""})]}),i.jsx("p",{className:"text-kid-purple font-medium text-lg animate-pulse",children:e})]});var sl,ol,ll;const vn=typeof window>"u"?global:window,af=vn.performance&&(()=>vn.performance.now())||(()=>Date.now()),il=((sl=vn.requestAnimationFrame)===null||sl===void 0?void 0:sl.bind(vn))||(e=>setTimeout(()=>e(af()),1e3/60)),Iu=((ol=vn.cancelAnimationFrame)===null||ol===void 0?void 0:ol.bind(vn))||clearTimeout;function to(e){return e[e.length-1]}const sa=(e,t)=>e<0?t+e:e,ym=(e,t)=>e[sa(t,e.length)];function uf(e,t){const n={...e};for(const r in t){const s=e[r],o=t[r];s!==o&&(s&&o&&typeof s=="object"&&typeof o=="object"&&!Array.isArray(o)?n[r]=uf(s,o):n[r]=o)}return n}function vm(e,t){const n=e.split("."),r={};let s=r;for(let o=0;o<n.length;o++){const l=o===n.length-1?t:{};s[n[o]]=l,s=l}return r}let Mu=0;function cf(){return Mu++,Mu}function Ts(e){return e.reduce((n,r)=>r+n,0)/e.length}function kt(e){const t=e.toUpperCase().trim();if(/^#([A-F0-9]{3}){1,2}$/.test(t)){let r=t.substring(1).split("");r.length===3&&(r=[r[0],r[0],r[1],r[1],r[2],r[2]]);const s=`${r.join("")}`;return{r:parseInt(s.slice(0,2),16),g:parseInt(s.slice(2,4),16),b:parseInt(s.slice(4,6),16),a:1}}const n=t.match(/^RGBA?\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d*\.?\d+))?\)$/);if(n)return{r:parseInt(n[1],10),g:parseInt(n[2],10),b:parseInt(n[3],10),a:parseFloat(n[4]||1,10)};throw new Error(`Invalid color: ${e}`)}const wm=e=>e.replace(/^\s+/,"").replace(/\s+$/,"");function jo(e,t){const n={};for(let r=0;r<t;r++)n[r]=e;return n}function Sm(e,t){const n={};for(let r=0;r<e;r++)n[r]=t(r);return n}const al=((ll=vn.navigator)===null||ll===void 0?void 0:ll.userAgent)||"",km=al.indexOf("MSIE ")>0||al.indexOf("Trident/")>0||al.indexOf("Edge/")>0,df=()=>{};class Cm{constructor(t,n,r=df){this._mutationChains=[],this._onStateChange=r,this.state={options:{drawingFadeDuration:n.drawingFadeDuration,drawingWidth:n.drawingWidth,drawingColor:kt(n.drawingColor),strokeColor:kt(n.strokeColor),outlineColor:kt(n.outlineColor),radicalColor:kt(n.radicalColor||n.strokeColor),highlightColor:kt(n.highlightColor)},character:{main:{opacity:n.showCharacter?1:0,strokes:{}},outline:{opacity:n.showOutline?1:0,strokes:{}},highlight:{opacity:1,strokes:{}}},userStrokes:null};for(let s=0;s<t.strokes.length;s++)this.state.character.main.strokes[s]={opacity:1,displayPortion:1},this.state.character.outline.strokes[s]={opacity:1,displayPortion:1},this.state.character.highlight.strokes[s]={opacity:0,displayPortion:1}}overwriteOnStateChange(t){this._onStateChange=t}updateState(t){const n=uf(this.state,t);this._onStateChange(n,this.state),this.state=n}run(t,n={}){const r=t.map(s=>s.scope);return this.cancelMutations(r),new Promise(s=>{const o={_isActive:!0,_index:0,_resolve:s,_mutations:t,_loop:n.loop,_scopes:r};this._mutationChains.push(o),this._run(o)})}_run(t){if(!t._isActive)return;const n=t._mutations;if(t._index>=n.length)if(t._loop)t._index=0;else{t._isActive=!1,this._mutationChains=this._mutationChains.filter(s=>s!==t),t._resolve({canceled:!1});return}t._mutations[t._index].run(this).then(()=>{t._isActive&&(t._index++,this._run(t))})}_getActiveMutations(){return this._mutationChains.map(t=>t._mutations[t._index])}pauseAll(){this._getActiveMutations().forEach(t=>t.pause())}resumeAll(){this._getActiveMutations().forEach(t=>t.resume())}cancelMutations(t){for(const n of this._mutationChains)for(const r of n._scopes)for(const s of t)(r.startsWith(s)||s.startsWith(r))&&this._cancelMutationChain(n)}cancelAll(){this.cancelMutations([""])}_cancelMutationChain(t){var n;t._isActive=!1;for(let r=t._index;r<t._mutations.length;r++)t._mutations[r].cancel(this);(n=t._resolve)===null||n===void 0||n.call(t,{canceled:!0}),this._mutationChains=this._mutationChains.filter(r=>r!==t)}}const wn=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),no=e=>Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)),xt=(e,t)=>no(wn(e,t)),Nm=(e,t)=>e.x===t.x&&e.y===t.y,li=(e,t=1)=>{const n=t*10;return{x:Math.round(n*e.x)/n,y:Math.round(n*e.y)/n}},oa=e=>{let t=e[0];return e.slice(1).reduce((r,s)=>{const o=xt(s,t);return t=s,r+o},0)},_m=(e,t)=>(e.x*t.x+e.y*t.y)/no(e)/no(t),la=(e,t,n)=>{const r=wn(t,e),s=n/no(r);return{x:t.x+s*r.x,y:t.y+s*r.y}},jm=(e,t)=>{const n=e.length>=t.length?e:t,r=e.length>=t.length?t:e,s=(l,a,u,d)=>{if(l===0&&a===0)return xt(n[0],r[0]);if(l>0&&a===0)return Math.max(u[0],xt(n[l],r[0]));const m=d[d.length-1];return l===0&&a>0?Math.max(m,xt(n[0],r[a])):Math.max(Math.min(u[a],u[a-1],m),xt(n[l],r[a]))};let o=[];for(let l=0;l<n.length;l++){const a=[];for(let u=0;u<r.length;u++)a.push(s(l,u,o,a));o=a}return o[r.length-1]},Em=(e,t=.05)=>{const n=e.slice(0,1);for(const r of e.slice(1)){const s=n[n.length-1],o=xt(r,s);if(o>t){const l=Math.ceil(o/t),a=o/l;for(let u=0;u<l;u++)n.push(la(r,s,-1*a*(u+1)))}else n.push(r)}return n},bm=(e,t=30)=>{const r=oa(e)/(t-1),s=[e[0]],o=to(e),l=e.slice(1);for(let a=0;a<t-2;a++){let u=to(s),d=r,m=!1;for(;!m;){const p=xt(u,l[0]);if(p<d)d-=p,u=l.shift();else{const g=la(u,l[0],d-p);s.push(g),m=!0}}}return s.push(o),s},Du=e=>{const t=bm(e),n=Ts(t.map(u=>u.x)),r=Ts(t.map(u=>u.y)),s={x:n,y:r},o=t.map(u=>wn(u,s)),l=Math.sqrt(Ts([Math.pow(o[0].x,2)+Math.pow(o[0].y,2),Math.pow(to(o).x,2)+Math.pow(to(o).y,2)])),a=o.map(u=>({x:u.x/l,y:u.y/l}));return Em(a)},Tm=(e,t)=>e.map(n=>({x:Math.cos(t)*n.x-Math.sin(t)*n.y,y:Math.sin(t)*n.x+Math.cos(t)*n.y})),Rm=e=>{if(e.length<3)return e;const t=[e[0],e[1]];return e.slice(2).forEach(n=>{const r=t.length,s=wn(n,t[r-1]),o=wn(t[r-1],t[r-2]);s.y*o.x-s.x*o.y===0&&t.pop(),t.push(n)}),t};function ia(e,t=!1){const n=li(e[0]),r=e.slice(1);let s=`M ${n.x} ${n.y}`;return r.forEach(o=>{const l=li(o);s+=` L ${l.x} ${l.y}`}),t&&(s+="Z"),s}const ff=(e,t)=>{const n=Rm(e);if(n.length<2)return n;const r=n[1],s=n[0],o=la(r,s,t),l=n.slice(1);return l.unshift(o),l};class Pm{constructor(t,n,r,s=!1){this.path=t,this.points=n,this.strokeNum=r,this.isInRadical=s}getStartingPoint(){return this.points[0]}getEndingPoint(){return this.points[this.points.length-1]}getLength(){return oa(this.points)}getVectors(){let t=this.points[0];return this.points.slice(1).map(r=>{const s=wn(r,t);return t=r,s})}getDistance(t){const n=this.points.map(r=>xt(r,t));return Math.min(...n)}getAverageDistance(t){return t.reduce((r,s)=>r+this.getDistance(s),0)/t.length}}class Im{constructor(t,n){this.symbol=t,this.strokes=n}}function Mm({radStrokes:e,strokes:t,medians:n}){const r=s=>{var o;return((o=e==null?void 0:e.indexOf(s))!==null&&o!==void 0?o:-1)>=0};return t.map((s,o)=>{const l=n[o].map(a=>{const[u,d]=a;return{x:u,y:d}});return new Pm(s,l,o,r(o))})}function Dm(e,t){const n=Mm(t);return new Im(e,n)}const Lm=[{x:0,y:-124},{x:1024,y:900}],[ro,hf]=Lm,Lu=hf.x-ro.x,Ou=hf.y-ro.y;class Au{constructor(t){const{padding:n,width:r,height:s}=t;this.padding=n,this.width=r,this.height=s;const o=r-2*n,l=s-2*n,a=o/Lu,u=l/Ou;this.scale=Math.min(a,u);const d=n+(o-this.scale*Lu)/2,m=n+(l-this.scale*Ou)/2;this.xOffset=-1*ro.x*this.scale+d,this.yOffset=-1*ro.y*this.scale+m}convertExternalPoint(t){const n=(t.x-this.xOffset)/this.scale,r=(this.height-this.yOffset-t.y)/this.scale;return{x:n,y:r}}}const Om=0,zu=250,Am=.4,zm=.35;function $m(e,t,n,r={}){const s=t.strokes,o=Gm(e.points);if(o.length<2)return{isMatch:!1,meta:{isStrokeBackwards:!1}};const{isMatch:l,meta:a,avgDist:u}=Rs(o,s[n],r);if(!l)return{isMatch:l,meta:a};const d=s.slice(n+1);let m=u;for(let p=0;p<d.length;p++){const{isMatch:g,avgDist:w}=Rs(o,d[p],{...r,checkBackwards:!1});g&&w<m&&(m=w)}if(m<u){const p=.6*(m+u)/(2*u),{isMatch:g,meta:w}=Rs(o,s[n],{...r,leniency:(r.leniency||1)*p});return{isMatch:g,meta:w}}return{isMatch:l,meta:a}}const Fm=(e,t,n)=>{const r=xt(t.getStartingPoint(),e[0]),s=xt(t.getEndingPoint(),e[e.length-1]);return r<=zu*n&&s<=zu*n},Hm=e=>{const t=[];let n=e[0];return e.slice(1).forEach(r=>{t.push(wn(r,n)),n=r}),t},Um=(e,t)=>{const n=Hm(e),r=t.getVectors(),s=n.map(l=>{const a=r.map(u=>_m(u,l));return Math.max(...a)});return Ts(s)>Om},Wm=(e,t,n)=>n*(oa(e)+25)/(t.getLength()+25)>=zm,Gm=e=>{if(e.length<2)return e;const[t,...n]=e,r=[t];for(const s of n)Nm(s,r[r.length-1])||r.push(s);return r},Bm=[Math.PI/16,Math.PI/32,0,-1*Math.PI/32,-1*Math.PI/16],Vm=(e,t,n)=>{const r=Du(e),s=Du(t);let o=1/0;return Bm.forEach(l=>{const a=jm(r,Tm(s,l));a<o&&(o=a)}),o<=Am*n},Rs=(e,t,n)=>{const{leniency:r=1,isOutlineVisible:s=!1,checkBackwards:o=!0,averageDistanceThreshold:l=350}=n,a=t.getAverageDistance(e),u=s||t.strokeNum>0?.5:1,d=a<=l*u*r;if(!d)return{isMatch:!1,avgDist:a,meta:{isStrokeBackwards:!1}};const m=Fm(e,t,r),p=Um(e,t),g=Vm(e,t.points,r),w=Wm(e,t,r),v=d&&m&&p&&g&&w;return o&&!v&&Rs([...e].reverse(),t,{...n,checkBackwards:!1}).isMatch?{isMatch:v,avgDist:a,meta:{isStrokeBackwards:!0}}:{isMatch:v,avgDist:a,meta:{isStrokeBackwards:!1}}};class Qm{constructor(t,n,r){this.id=t,this.points=[n],this.externalPoints=[r]}appendPoint(t,n){this.points.push(t),this.externalPoints.push(n)}}class Xm{constructor(t){this._duration=t,this._startTime=null,this._paused=!1,this.scope=`delay.${t}`}run(){return this._startTime=af(),this._runningPromise=new Promise(t=>{this._resolve=t,this._timeout=setTimeout(()=>this.cancel(),this._duration)}),this._runningPromise}pause(){if(this._paused)return;const t=performance.now()-(this._startTime||0);this._duration=Math.max(0,this._duration-t),clearTimeout(this._timeout),this._paused=!0}resume(){this._paused&&(this._startTime=performance.now(),this._timeout=setTimeout(()=>this.cancel(),this._duration),this._paused=!1)}cancel(){clearTimeout(this._timeout),this._resolve&&this._resolve(),this._resolve=void 0}}class ce{constructor(t,n,r={}){this._tick=s=>{if(this._startPauseTime!==null)return;const o=Math.min(1,(s-this._startTime-this._pausedDuration)/this._duration);if(o===1)this._renderState.updateState(this._values),this._frameHandle=void 0,this.cancel(this._renderState);else{const l=Km(o),a=pf(this._startState,this._values,l);this._renderState.updateState(a),this._frameHandle=il(this._tick)}},this.scope=t,this._valuesOrCallable=n,this._duration=r.duration||0,this._force=r.force,this._pausedDuration=0,this._startPauseTime=null}run(t){return this._values||this._inflateValues(t),this._duration===0&&t.updateState(this._values),this._duration===0||mf(t.state,this._values)?Promise.resolve():(this._renderState=t,this._startState=t.state,this._startTime=performance.now(),this._frameHandle=il(this._tick),new Promise(n=>{this._resolve=n}))}_inflateValues(t){let n=this._valuesOrCallable;typeof this._valuesOrCallable=="function"&&(n=this._valuesOrCallable(t.state)),this._values=vm(this.scope,n)}pause(){this._startPauseTime===null&&(this._frameHandle&&Iu(this._frameHandle),this._startPauseTime=performance.now())}resume(){this._startPauseTime!==null&&(this._frameHandle=il(this._tick),this._pausedDuration+=performance.now()-this._startPauseTime,this._startPauseTime=null)}cancel(t){var n;(n=this._resolve)===null||n===void 0||n.call(this),this._resolve=void 0,Iu(this._frameHandle||-1),this._frameHandle=void 0,this._force&&(this._values||this._inflateValues(t),t.updateState(this._values))}}ce.Delay=Xm;function pf(e,t,n){const r={};for(const s in t){const o=t[s],l=e==null?void 0:e[s];typeof l=="number"&&typeof o=="number"&&o>=0?r[s]=n*(o-l)+l:r[s]=pf(l,o,n)}return r}function mf(e,t){for(const n in t){const r=t[n],s=e==null?void 0:e[n];if(r>=0){if(r!==s)return!1}else if(!mf(s,r))return!1}return!0}const Km=e=>-Math.cos(e*Math.PI)/2+.5,gf=(e,t,n)=>[new ce(`character.${e}.strokes`,jo({opacity:1,displayPortion:1},t.strokes.length),{duration:n,force:!0})],ii=(e,t,n)=>[new ce(`character.${e}`,{opacity:1,strokes:jo({opacity:1,displayPortion:1},t.strokes.length)},{duration:n,force:!0})],Jn=(e,t,n)=>[new ce(`character.${e}.opacity`,0,{duration:n,force:!0}),...gf(e,t,0)],$u=(e,t,n)=>[new ce(`options.${e}`,t,{duration:n})],xf=(e,t,n)=>{const r=e.strokeNum,s=(e.getLength()+600)/(3*n);return[new ce("options.highlightColor",t),new ce("character.highlight",{opacity:1,strokes:{[r]:{displayPortion:0,opacity:0}}}),new ce(`character.highlight.strokes.${r}`,{displayPortion:1,opacity:1},{duration:s}),new ce(`character.highlight.strokes.${r}.opacity`,0,{duration:s,force:!0})]},yf=(e,t,n)=>{const r=t.strokeNum,s=(t.getLength()+600)/(3*n);return[new ce(`character.${e}`,{opacity:1,strokes:{[r]:{displayPortion:0,opacity:1}}}),new ce(`character.${e}.strokes.${r}.displayPortion`,1,{duration:s})]},Ym=(e,t,n,r)=>{const s=l=>{const a=l.character[e],u={opacity:1,strokes:{}};for(let d=0;d<t.strokes.length;d++)u.strokes[d]={opacity:a.opacity*a.strokes[d].opacity};return u},o=t.strokes[n];return[new ce(`character.${e}`,s),...yf(e,o,r)]},qm=(e,t,n)=>[new ce(`character.${e}.strokes.${t}`,{displayPortion:1,opacity:1},{duration:n,force:!0})],vf=(e,t,n,r,s)=>{let o=Jn(e,t,n);return o=o.concat(gf(e,t,0)),o.push(new ce(`character.${e}`,{opacity:1,strokes:jo({opacity:0},t.strokes.length)},{force:!0})),t.strokes.forEach((l,a)=>{a>0&&o.push(new ce.Delay(s)),o=o.concat(yf(e,l,r))}),o},Jm=(e,t,n,r,s,o)=>{const l=vf(e,t,n,r,s);return l.push(new ce.Delay(o)),l},Zm=(e,t,n)=>[...Jn("main",e,t),new ce("character.highlight",{opacity:1,strokes:jo({opacity:0},e.strokes.length)},{force:!0}),new ce("character.main",{opacity:1,strokes:Sm(e.strokes.length,r=>({opacity:r<n?1:0}))},{force:!0})],eg=(e,t)=>[new ce("quiz.activeUserStrokeId",e,{force:!0}),new ce(`userStrokes.${e}`,{points:[t],opacity:1},{force:!0})],tg=(e,t)=>[new ce(`userStrokes.${e}.points`,t,{force:!0})],ng=(e,t)=>[new ce(`userStrokes.${e}.opacity`,0,{duration:t})],Fu=e=>(e==null?void 0:e.map(t=>new ce(`userStrokes.${t}`,null,{force:!0})))||[],rg=(e,t,n)=>[new ce("options.highlightColor",t),...Jn("highlight",e),...ii("highlight",e,n/2),...Jn("highlight",e,n/2)],sg=e=>({pathString:ia(e.externalPoints),points:e.points.map(t=>li(t))});class og{constructor(t,n,r){this._currentStrokeIndex=0,this._mistakesOnStroke=0,this._totalMistakes=0,this._character=t,this._renderState=n,this._isActive=!1,this._positioner=r}startQuiz(t){this._userStrokesIds&&this._renderState.run(Fu(this._userStrokesIds)),this._userStrokesIds=[],this._isActive=!0,this._options=t;const n=sa(t.quizStartStrokeNum,this._character.strokes.length);return this._currentStrokeIndex=Math.min(n,this._character.strokes.length-1),this._mistakesOnStroke=0,this._totalMistakes=0,this._renderState.run(Zm(this._character,t.strokeFadeDuration,this._currentStrokeIndex))}startUserStroke(t){var n;if(!this._isActive)return null;if(this._userStroke)return this.endUserStroke();const r=this._positioner.convertExternalPoint(t),s=cf();return this._userStroke=new Qm(s,r,t),(n=this._userStrokesIds)===null||n===void 0||n.push(s),this._renderState.run(eg(s,r))}continueUserStroke(t){if(!this._userStroke)return Promise.resolve();const n=this._positioner.convertExternalPoint(t);this._userStroke.appendPoint(n,t);const r=this._userStroke.points.slice(0);return this._renderState.run(tg(this._userStroke.id,r))}setPositioner(t){this._positioner=t}endUserStroke(){var t;if(!this._userStroke)return;if(this._renderState.run(ng(this._userStroke.id,(t=this._options.drawingFadeDuration)!==null&&t!==void 0?t:300)),this._userStroke.points.length===1){this._userStroke=void 0;return}const{acceptBackwardsStrokes:n,markStrokeCorrectAfterMisses:r}=this._options,s=this._getCurrentStroke(),{isMatch:o,meta:l}=$m(this._userStroke,this._character,this._currentStrokeIndex,{isOutlineVisible:this._renderState.state.character.outline.opacity>0,leniency:this._options.leniency,averageDistanceThreshold:this._options.averageDistanceThreshold}),a=r&&this._mistakesOnStroke+1>=r;if(o||a||l.isStrokeBackwards&&n)this._handleSuccess(l);else{this._handleFailure(l);const{showHintAfterMisses:d,highlightColor:m,strokeHighlightSpeed:p}=this._options;d!==!1&&this._mistakesOnStroke>=d&&this._renderState.run(xf(s,kt(m),p))}this._userStroke=void 0}cancel(){this._isActive=!1,this._userStrokesIds&&this._renderState.run(Fu(this._userStrokesIds))}_getStrokeData({isCorrect:t,meta:n}){return{character:this._character.symbol,strokeNum:this._currentStrokeIndex,mistakesOnStroke:this._mistakesOnStroke,totalMistakes:this._totalMistakes,strokesRemaining:this._character.strokes.length-this._currentStrokeIndex-(t?1:0),drawnPath:sg(this._userStroke),isBackwards:n.isStrokeBackwards}}nextStroke(){if(!this._options)return;const{strokes:t,symbol:n}=this._character,{onComplete:r,highlightOnComplete:s,strokeFadeDuration:o,highlightCompleteColor:l,highlightColor:a,strokeHighlightDuration:u}=this._options;let d=qm("main",this._currentStrokeIndex,o);this._mistakesOnStroke=0,this._currentStrokeIndex+=1,this._currentStrokeIndex===t.length&&(this._isActive=!1,r==null||r({character:n,totalMistakes:this._totalMistakes}),s&&(d=d.concat(rg(this._character,kt(l||a),(u||0)*2)))),this._renderState.run(d)}_handleSuccess(t){if(!this._options)return;const{onCorrectStroke:n}=this._options;n==null||n({...this._getStrokeData({isCorrect:!0,meta:t})}),this.nextStroke()}_handleFailure(t){var n,r;this._mistakesOnStroke+=1,this._totalMistakes+=1,(n=(r=this._options).onMistake)===null||n===void 0||n.call(r,this._getStrokeData({isCorrect:!1,meta:t}))}_getCurrentStroke(){return this._character.strokes[this._currentStrokeIndex]}}function fn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Ut(e,t,n){e.setAttributeNS(null,t,n)}function so(e,t){Object.keys(t).forEach(n=>Ut(e,n,t[n]))}function lg(e){let t="";return window.location&&window.location.href&&(t=window.location.href.replace(/#[^#]*$/,"").replace(/"/gi,"%22")),`url("${t}#${e}")`}function wf(e){var t;e==null||(t=e.parentNode)===null||t===void 0||t.removeChild(e)}class hn{constructor(t){this.stroke=t,this._pathLength=t.getLength()+hn.STROKE_WIDTH/2}_getStrokeDashoffset(t){return this._pathLength*.999*(1-t)}_getColor({strokeColor:t,radicalColor:n}){return n&&this.stroke.isInRadical?n:t}}hn.STROKE_WIDTH=200;const Hu=200;class ig extends hn{constructor(t){super(t),this._oldProps=void 0}mount(t){this._animationPath=fn("path"),this._clip=fn("clipPath"),this._strokePath=fn("path");const n=`mask-${cf()}`;Ut(this._clip,"id",n),Ut(this._strokePath,"d",this.stroke.path),this._animationPath.style.opacity="0",Ut(this._animationPath,"clip-path",lg(n));const r=ff(this.stroke.points,Hu/2);return Ut(this._animationPath,"d",ia(r)),so(this._animationPath,{stroke:"#FFFFFF","stroke-width":Hu.toString(),fill:"none","stroke-linecap":"round","stroke-linejoin":"miter","stroke-dasharray":`${this._pathLength},${this._pathLength}`}),this._clip.appendChild(this._strokePath),t.defs.appendChild(this._clip),t.svg.appendChild(this._animationPath),this}render(t){var n,r;if(t===this._oldProps||!this._animationPath)return;t.displayPortion!==((n=this._oldProps)===null||n===void 0?void 0:n.displayPortion)&&(this._animationPath.style.strokeDashoffset=this._getStrokeDashoffset(t.displayPortion).toString());const s=this._getColor(t);if(!this._oldProps||s!==this._getColor(this._oldProps)){const{r:o,g:l,b:a,a:u}=s;so(this._animationPath,{stroke:`rgba(${o},${l},${a},${u})`})}t.opacity!==((r=this._oldProps)===null||r===void 0?void 0:r.opacity)&&(this._animationPath.style.opacity=t.opacity.toString()),this._oldProps=t}}class ul{constructor(t){this._oldProps=void 0,this._strokeRenderers=t.strokes.map(n=>new ig(n))}mount(t){const n=t.createSubRenderTarget();this._group=n.svg,this._strokeRenderers.forEach(r=>{r.mount(n)})}render(t){var n,r;if(t===this._oldProps||!this._group)return;const{opacity:s,strokes:o,strokeColor:l,radicalColor:a=null}=t;if(s!==((n=this._oldProps)===null||n===void 0?void 0:n.opacity)&&(this._group.style.opacity=s.toString(),!km)){var u;s===0?this._group.style.display="none":((u=this._oldProps)===null||u===void 0?void 0:u.opacity)===0&&this._group.style.removeProperty("display")}const d=!this._oldProps||l!==this._oldProps.strokeColor||a!==this._oldProps.radicalColor;if(d||o!==((r=this._oldProps)===null||r===void 0?void 0:r.strokes))for(let p=0;p<this._strokeRenderers.length;p++){var m;!d&&(m=this._oldProps)!==null&&m!==void 0&&m.strokes&&o[p]===this._oldProps.strokes[p]||this._strokeRenderers[p].render({strokeColor:l,radicalColor:a,opacity:o[p].opacity,displayPortion:o[p].displayPortion})}this._oldProps=t}}class ag{constructor(){this._oldProps=void 0}mount(t){this._path=fn("path"),t.svg.appendChild(this._path)}render(t){var n,r,s,o;if(!(!this._path||t===this._oldProps)){if(t.strokeColor!==((n=this._oldProps)===null||n===void 0?void 0:n.strokeColor)||t.strokeWidth!==((r=this._oldProps)===null||r===void 0?void 0:r.strokeWidth)){const{r:l,g:a,b:u,a:d}=t.strokeColor;so(this._path,{fill:"none",stroke:`rgba(${l},${a},${u},${d})`,"stroke-width":t.strokeWidth.toString(),"stroke-linecap":"round","stroke-linejoin":"round"})}t.opacity!==((s=this._oldProps)===null||s===void 0?void 0:s.opacity)&&Ut(this._path,"opacity",t.opacity.toString()),t.points!==((o=this._oldProps)===null||o===void 0?void 0:o.points)&&Ut(this._path,"d",ia(t.points)),this._oldProps=t}}destroy(){wf(this._path)}}class ug{constructor(t,n){this._character=t,this._positioner=n,this._mainCharRenderer=new ul(t),this._outlineCharRenderer=new ul(t),this._highlightCharRenderer=new ul(t),this._userStrokeRenderers={}}mount(t){const n=t.createSubRenderTarget(),r=n.svg,{xOffset:s,yOffset:o,height:l,scale:a}=this._positioner;Ut(r,"transform",`translate(${s}, ${l-o}) scale(${a}, ${-1*a})`),this._outlineCharRenderer.mount(n),this._mainCharRenderer.mount(n),this._highlightCharRenderer.mount(n),this._positionedTarget=n}render(t){const{main:n,outline:r,highlight:s}=t.character,{outlineColor:o,radicalColor:l,highlightColor:a,strokeColor:u,drawingWidth:d,drawingColor:m}=t.options;this._outlineCharRenderer.render({opacity:r.opacity,strokes:r.strokes,strokeColor:o}),this._mainCharRenderer.render({opacity:n.opacity,strokes:n.strokes,strokeColor:u,radicalColor:l}),this._highlightCharRenderer.render({opacity:s.opacity,strokes:s.strokes,strokeColor:a});const p=t.userStrokes||{};for(const w in this._userStrokeRenderers)if(!p[w]){var g;(g=this._userStrokeRenderers[w])===null||g===void 0||g.destroy(),delete this._userStrokeRenderers[w]}for(const w in p){const v=p[w];if(!v)continue;const k={strokeWidth:d,strokeColor:m,...v};(()=>{if(this._userStrokeRenderers[w])return this._userStrokeRenderers[w];const f=new ag;return f.mount(this._positionedTarget),this._userStrokeRenderers[w]=f,f})().render(k)}}destroy(){wf(this._positionedTarget.svg),this._positionedTarget.defs.innerHTML=""}}class Sf{constructor(t){this.node=t}addPointerStartListener(t){this.node.addEventListener("mousedown",n=>{t(this._eventify(n,this._getMousePoint))}),this.node.addEventListener("touchstart",n=>{t(this._eventify(n,this._getTouchPoint))})}addPointerMoveListener(t){this.node.addEventListener("mousemove",n=>{t(this._eventify(n,this._getMousePoint))}),this.node.addEventListener("touchmove",n=>{t(this._eventify(n,this._getTouchPoint))})}addPointerEndListener(t){document.addEventListener("mouseup",t),document.addEventListener("touchend",t)}getBoundingClientRect(){return this.node.getBoundingClientRect()}updateDimensions(t,n){this.node.setAttribute("width",`${t}`),this.node.setAttribute("height",`${n}`)}_eventify(t,n){return{getPoint:()=>n.call(this,t),preventDefault:()=>t.preventDefault()}}_getMousePoint(t){const{left:n,top:r}=this.getBoundingClientRect(),s=t.clientX-n,o=t.clientY-r;return{x:s,y:o}}_getTouchPoint(t){const{left:n,top:r}=this.getBoundingClientRect(),s=t.touches[0].clientX-n,o=t.touches[0].clientY-r;return{x:s,y:o}}}class oo extends Sf{constructor(t,n){super(t),this.svg=t,this.defs=n,"createSVGPoint"in t&&(this._pt=t.createSVGPoint())}static init(t,n="100%",r="100%"){const s=typeof t=="string"?document.getElementById(t):t;if(!s)throw new Error(`HanziWriter target element not found: ${t}`);const o=s.nodeName.toUpperCase(),l=(()=>{if(o==="SVG"||o==="G")return s;{const u=fn("svg");return s.appendChild(u),u}})();so(l,{width:n,height:r});const a=fn("defs");return l.appendChild(a),new oo(l,a)}createSubRenderTarget(){const t=fn("g");return this.svg.appendChild(t),new oo(t,this.defs)}_getMousePoint(t){if(this._pt&&(this._pt.x=t.clientX,this._pt.y=t.clientY,"getScreenCTM"in this.node)){var n;const r=this._pt.matrixTransform((n=this.node.getScreenCTM())===null||n===void 0?void 0:n.inverse());return{x:r.x,y:r.y}}return super._getMousePoint.call(this,t)}_getTouchPoint(t){if(this._pt&&(this._pt.x=t.touches[0].clientX,this._pt.y=t.touches[0].clientY,"getScreenCTM"in this.node)){var n;const r=this._pt.matrixTransform((n=this.node.getScreenCTM())===null||n===void 0?void 0:n.inverse());return{x:r.x,y:r.y}}return super._getTouchPoint(t)}}var cg={HanziWriterRenderer:ug,createRenderTarget:oo.init};const kf=(e,t)=>{e.beginPath();const n=t[0],r=t.slice(1);e.moveTo(n.x,n.y);for(const s of r)e.lineTo(s.x,s.y);e.stroke()},dg=e=>{const t=e.split(/(^|\s+)(?=[A-Z])/).filter(r=>r!==" "),n=[r=>r.beginPath()];for(const r of t){const[s,...o]=r.split(/\s+/),l=o.map(a=>parseFloat(a));s==="M"?n.push(a=>a.moveTo(...l)):s==="L"?n.push(a=>a.lineTo(...l)):s==="C"?n.push(a=>a.bezierCurveTo(...l)):s==="Q"&&n.push(a=>a.quadraticCurveTo(...l))}return r=>n.forEach(s=>s(r))};class fg extends hn{constructor(t,n=!0){super(t),n&&Path2D?this._path2D=new Path2D(this.stroke.path):this._pathCmd=dg(this.stroke.path),this._extendedMaskPoints=ff(this.stroke.points,hn.STROKE_WIDTH/2)}render(t,n){if(n.opacity<.05)return;if(t.save(),this._path2D)t.clip(this._path2D);else{var r;(r=this._pathCmd)===null||r===void 0||r.call(this,t),t.globalAlpha=0,t.stroke(),t.clip()}const{r:s,g:o,b:l,a}=this._getColor(n),u=a===1?`rgb(${s},${o},${l})`:`rgb(${s},${o},${l},${a})`,d=this._getStrokeDashoffset(n.displayPortion);t.globalAlpha=n.opacity,t.strokeStyle=u,t.fillStyle=u,t.lineWidth=hn.STROKE_WIDTH,t.lineCap="round",t.lineJoin="round",t.setLineDash([this._pathLength,this._pathLength],d),t.lineDashOffset=d,kf(t,this._extendedMaskPoints),t.restore()}}class cl{constructor(t){this._strokeRenderers=t.strokes.map(n=>new fg(n))}render(t,n){if(n.opacity<.05)return;const{opacity:r,strokeColor:s,radicalColor:o,strokes:l}=n;for(let a=0;a<this._strokeRenderers.length;a++)this._strokeRenderers[a].render(t,{strokeColor:s,radicalColor:o,opacity:l[a].opacity*r,displayPortion:l[a].displayPortion||0})}}function hg(e,t){if(t.opacity<.05)return;const{opacity:n,strokeWidth:r,strokeColor:s,points:o}=t,{r:l,g:a,b:u,a:d}=s;e.save(),e.globalAlpha=n,e.lineWidth=r,e.strokeStyle=`rgba(${l},${a},${u},${d})`,e.lineCap="round",e.lineJoin="round",kf(e,o),e.restore()}class pg{constructor(t,n){this.destroy=df,this._character=t,this._positioner=n,this._mainCharRenderer=new cl(t),this._outlineCharRenderer=new cl(t),this._highlightCharRenderer=new cl(t)}mount(t){this._target=t}_animationFrame(t){const{width:n,height:r,scale:s,xOffset:o,yOffset:l}=this._positioner,a=this._target.getContext();a.clearRect(0,0,n,r),a.save(),a.translate(o,r-l),a.transform(1,0,0,-1,0,0),a.scale(s,s),t(a),a.restore(),a.draw&&a.draw()}render(t){const{outline:n,main:r,highlight:s}=t.character,{outlineColor:o,strokeColor:l,radicalColor:a,highlightColor:u,drawingColor:d,drawingWidth:m}=t.options;this._animationFrame(p=>{this._outlineCharRenderer.render(p,{opacity:n.opacity,strokes:n.strokes,strokeColor:o}),this._mainCharRenderer.render(p,{opacity:r.opacity,strokes:r.strokes,strokeColor:l,radicalColor:a}),this._highlightCharRenderer.render(p,{opacity:s.opacity,strokes:s.strokes,strokeColor:u});const g=t.userStrokes||{};for(const w in g){const v=g[w];if(v){const k={strokeWidth:m,strokeColor:d,...v};hg(p,k)}}})}}class aa extends Sf{constructor(t){super(t)}static init(t,n="100%",r="100%"){const s=typeof t=="string"?document.getElementById(t):t;if(!s)throw new Error(`HanziWriter target element not found: ${t}`);const o=s.nodeName.toUpperCase(),l=(()=>{if(o==="CANVAS")return s;const a=document.createElement("canvas");return s.appendChild(a),a})();return l.setAttribute("width",n),l.setAttribute("height",r),new aa(l)}getContext(){return this.node.getContext("2d")}}var mg={HanziWriterRenderer:pg,createRenderTarget:aa.init};const gg="2.0.1",xg=e=>`https://cdn.jsdelivr.net/npm/hanzi-writer-data@${gg}/${e}.json`,yg=(e,t,n)=>{const r=new XMLHttpRequest;r.overrideMimeType&&r.overrideMimeType("application/json"),r.open("GET",xg(e),!0),r.onerror=s=>{n(r,s)},r.onreadystatechange=()=>{r.readyState===4&&(r.status===200?t(JSON.parse(r.responseText)):r.status!==0&&n&&n(r))},r.send(null)},Uu={charDataLoader:yg,onLoadCharDataError:null,onLoadCharDataSuccess:null,showOutline:!0,showCharacter:!0,renderer:"svg",width:0,height:0,padding:20,strokeAnimationSpeed:1,strokeFadeDuration:400,strokeHighlightDuration:200,strokeHighlightSpeed:2,delayBetweenStrokes:1e3,delayBetweenLoops:2e3,strokeColor:"#555",radicalColor:null,highlightColor:"#AAF",outlineColor:"#DDD",drawingColor:"#333",leniency:1,showHintAfterMisses:3,highlightOnComplete:!0,highlightCompleteColor:null,markStrokeCorrectAfterMisses:!1,acceptBackwardsStrokes:!1,quizStartStrokeNum:0,averageDistanceThreshold:350,drawingFadeDuration:300,drawingWidth:4,strokeWidth:2,outlineWidth:2,rendererOverride:{}};class Wu{constructor(t){this._loadCounter=0,this._isLoading=!1,this.loadingFailed=!1,this._options=t}_debouncedLoad(t,n){const r=l=>{if(n===this._loadCounter){var a;(a=this._resolve)===null||a===void 0||a.call(this,l)}},s=l=>{if(n===this._loadCounter){var a;(a=this._reject)===null||a===void 0||a.call(this,l)}},o=this._options.charDataLoader(t,r,s);o&&("then"in o?o.then(r).catch(s):r(o))}_setupLoadingPromise(){return new Promise((t,n)=>{this._resolve=t,this._reject=n}).then(t=>{var n,r;return this._isLoading=!1,(n=(r=this._options).onLoadCharDataSuccess)===null||n===void 0||n.call(r,t),t}).catch(t=>{if(this._isLoading=!1,this.loadingFailed=!0,this._options.onLoadCharDataError){this._options.onLoadCharDataError(t);return}if(t instanceof Error)throw t;const n=new Error(`Failed to load char data for ${this._loadingChar}`);throw n.reason=t,n})}loadCharData(t){this._loadingChar=t;const n=this._setupLoadingPromise();return this.loadingFailed=!1,this._isLoading=!0,this._loadCounter++,this._debouncedLoad(t,this._loadCounter),n}}class _t{constructor(t,n={}){const{HanziWriterRenderer:r,createRenderTarget:s}=n.renderer==="canvas"?mg:cg,o=n.rendererOverride||{};this._renderer={HanziWriterRenderer:o.HanziWriterRenderer||r,createRenderTarget:o.createRenderTarget||s},this.target=this._renderer.createRenderTarget(t,n.width,n.height),this._options=this._assignOptions(n),this._loadingManager=new Wu(this._options),this._setupListeners()}static create(t,n,r){const s=new _t(t,r);return s.setCharacter(n),s}static loadCharacterData(t,n={}){const r=(()=>{const{_loadingManager:s,_loadingOptions:o}=_t;return(s==null?void 0:s._loadingChar)===t&&o===n?s:new Wu({...Uu,...n})})();return _t._loadingManager=r,_t._loadingOptions=n,r.loadCharData(t)}static getScalingTransform(t,n,r=0){const s=new Au({width:t,height:n,padding:r});return{x:s.xOffset,y:s.yOffset,scale:s.scale,transform:wm(`
        translate(${s.xOffset}, ${s.height-s.yOffset})
        scale(${s.scale}, ${-1*s.scale})
      `).replace(/\s+/g," ")}}showCharacter(t={}){return this._options.showCharacter=!0,this._withData(()=>{var n;return(n=this._renderState)===null||n===void 0?void 0:n.run(ii("main",this._character,typeof t.duration=="number"?t.duration:this._options.strokeFadeDuration)).then(r=>{var s;return(s=t.onComplete)===null||s===void 0||s.call(t,r),r})})}hideCharacter(t={}){return this._options.showCharacter=!1,this._withData(()=>{var n;return(n=this._renderState)===null||n===void 0?void 0:n.run(Jn("main",this._character,typeof t.duration=="number"?t.duration:this._options.strokeFadeDuration)).then(r=>{var s;return(s=t.onComplete)===null||s===void 0||s.call(t,r),r})})}animateCharacter(t={}){return this.cancelQuiz(),this._withData(()=>{var n;return(n=this._renderState)===null||n===void 0?void 0:n.run(vf("main",this._character,this._options.strokeFadeDuration,this._options.strokeAnimationSpeed,this._options.delayBetweenStrokes)).then(r=>{var s;return(s=t.onComplete)===null||s===void 0||s.call(t,r),r})})}animateStroke(t,n={}){return this.cancelQuiz(),this._withData(()=>{var r;return(r=this._renderState)===null||r===void 0?void 0:r.run(Ym("main",this._character,sa(t,this._character.strokes.length),this._options.strokeAnimationSpeed)).then(s=>{var o;return(o=n.onComplete)===null||o===void 0||o.call(n,s),s})})}highlightStroke(t,n={}){const r=()=>{if(!(!this._character||!this._renderState))return this._renderState.run(xf(ym(this._character.strokes,t),kt(this._options.highlightColor),this._options.strokeHighlightSpeed)).then(s=>{var o;return(o=n.onComplete)===null||o===void 0||o.call(n,s),s})};return this._withData(r)}async loopCharacterAnimation(){return this.cancelQuiz(),this._withData(()=>this._renderState.run(Jm("main",this._character,this._options.strokeFadeDuration,this._options.strokeAnimationSpeed,this._options.delayBetweenStrokes,this._options.delayBetweenLoops),{loop:!0}))}pauseAnimation(){return this._withData(()=>{var t;return(t=this._renderState)===null||t===void 0?void 0:t.pauseAll()})}resumeAnimation(){return this._withData(()=>{var t;return(t=this._renderState)===null||t===void 0?void 0:t.resumeAll()})}showOutline(t={}){return this._options.showOutline=!0,this._withData(()=>{var n;return(n=this._renderState)===null||n===void 0?void 0:n.run(ii("outline",this._character,typeof t.duration=="number"?t.duration:this._options.strokeFadeDuration)).then(r=>{var s;return(s=t.onComplete)===null||s===void 0||s.call(t,r),r})})}hideOutline(t={}){return this._options.showOutline=!1,this._withData(()=>{var n;return(n=this._renderState)===null||n===void 0?void 0:n.run(Jn("outline",this._character,typeof t.duration=="number"?t.duration:this._options.strokeFadeDuration)).then(r=>{var s;return(s=t.onComplete)===null||s===void 0||s.call(t,r),r})})}updateDimensions({width:t,height:n,padding:r}){if(t!==void 0&&(this._options.width=t),n!==void 0&&(this._options.height=n),r!==void 0&&(this._options.padding=r),this.target.updateDimensions(this._options.width,this._options.height),this._character&&this._renderState&&this._hanziWriterRenderer&&this._positioner){this._hanziWriterRenderer.destroy();const s=this._initAndMountHanziWriterRenderer(this._character);this._renderState.overwriteOnStateChange(o=>s.render(o)),s.render(this._renderState.state),this._quiz&&this._quiz.setPositioner(this._positioner)}}updateColor(t,n,r={}){var s;let o=[];const l=t==="radicalColor"&&!n?this._options.strokeColor:n,a=kt(l);this._options[t]=n;const u=(s=r.duration)!==null&&s!==void 0?s:this._options.strokeFadeDuration;return o=o.concat($u(t,a,u)),t==="radicalColor"&&!n&&(o=o.concat($u(t,null,0))),this._withData(()=>{var d;return(d=this._renderState)===null||d===void 0?void 0:d.run(o).then(m=>{var p;return(p=r.onComplete)===null||p===void 0||p.call(r,m),m})})}quiz(t={}){return this._withData(async()=>{this._character&&this._renderState&&this._positioner&&(this.cancelQuiz(),this._quiz=new og(this._character,this._renderState,this._positioner),this._options={...this._options,...t},this._quiz.startQuiz(this._options))})}skipQuizStroke(){this._quiz&&this._quiz.nextStroke()}cancelQuiz(){this._quiz&&(this._quiz.cancel(),this._quiz=void 0)}setCharacter(t){return this.cancelQuiz(),this._char=t,this._hanziWriterRenderer&&this._hanziWriterRenderer.destroy(),this._renderState&&this._renderState.cancelAll(),this._hanziWriterRenderer=null,this._withDataPromise=this._loadingManager.loadCharData(t).then(n=>{if(!n||this._loadingManager.loadingFailed)return;this._character=Dm(t,n),this._renderState=new Cm(this._character,this._options,s=>r.render(s));const r=this._initAndMountHanziWriterRenderer(this._character);r.render(this._renderState.state)}),this._withDataPromise}_initAndMountHanziWriterRenderer(t){const{width:n,height:r,padding:s}=this._options;this._positioner=new Au({width:n,height:r,padding:s});const o=new this._renderer.HanziWriterRenderer(t,this._positioner);return o.mount(this.target),this._hanziWriterRenderer=o,o}async getCharacterData(){if(!this._char)throw new Error("setCharacter() must be called before calling getCharacterData()");return await this._withData(()=>this._character)}_assignOptions(t){const n={...Uu,...t};return t.strokeAnimationDuration&&!t.strokeAnimationSpeed&&(n.strokeAnimationSpeed=500/t.strokeAnimationDuration),t.strokeHighlightDuration&&!t.strokeHighlightSpeed&&(n.strokeHighlightSpeed=500/n.strokeHighlightDuration),t.highlightCompleteColor||(n.highlightCompleteColor=n.highlightColor),this._fillWidthAndHeight(n)}_fillWidthAndHeight(t){const n={...t};if(n.width&&!n.height)n.height=n.width;else if(n.height&&!n.width)n.width=n.height;else if(!n.width&&!n.height){const{width:r,height:s}=this.target.getBoundingClientRect(),o=Math.min(r,s);n.width=o,n.height=o}return n}_withData(t){if(this._loadingManager.loadingFailed)throw Error("Failed to load character data. Call setCharacter and try again.");return this._withDataPromise?this._withDataPromise.then(()=>{if(!this._loadingManager.loadingFailed)return t()}):Promise.resolve().then(t)}_setupListeners(){this.target.addPointerStartListener(t=>{this._quiz&&(t.preventDefault(),this._quiz.startUserStroke(t.getPoint()))}),this.target.addPointerMoveListener(t=>{this._quiz&&(t.preventDefault(),this._quiz.continueUserStroke(t.getPoint()))}),this.target.addPointerEndListener(()=>{var t;(t=this._quiz)===null||t===void 0||t.endUserStroke()})}}_t._loadingManager=null;_t._loadingOptions=null;const ai=({target:e,isChinese:t,strokeGuideUrl:n,onGrade:r,isGrading:s})=>{const o=y.useRef(null),l=y.useRef(null),a=y.useRef(null),[u,d]=y.useState(!1),m=y.useRef(!1);y.useEffect(()=>{const v=o.current,k=l.current;if(!v||!k)return;const L=()=>{const c=k.getBoundingClientRect();v.width=c.width,v.height=c.height;const h=v.getContext("2d");h&&(h.lineCap="round",h.lineJoin="round",h.strokeStyle="#1F2937",h.lineWidth=8)};L();const f=new ResizeObserver(()=>L());return f.observe(k),()=>f.disconnect()},[t,e]),y.useEffect(()=>{if(t&&a.current){a.current.innerHTML="";const v=e.charAt(0);if(/[\u4e00-\u9fa5]/.test(v))try{const k=_t.create(a.current,v,{width:280,height:280,padding:5,showOutline:!0,strokeAnimationSpeed:1,delayBetweenLoops:1500,strokeColor:"#9CA3AF",radicalColor:"#9CA3AF",outlineColor:"#D1D5DB",onLoadCharDataSuccess:()=>{k.loopCharacterAnimation()}})}catch(k){console.error("BG HanziWriter error",k)}}},[t,e]),y.useEffect(()=>{const v=o.current;if(!v)return;const k=x=>{const N=v.getBoundingClientRect();let b,T;return"touches"in x?(b=x.touches[0].clientX,T=x.touches[0].clientY):(b=x.clientX,T=x.clientY),{x:b-N.left,y:T-N.top}},L=x=>{x.cancelable&&x.preventDefault(),x.stopPropagation(),m.current=!0,d(!0);const{x:N,y:b}=k(x),T=v.getContext("2d");T&&(T.beginPath(),T.moveTo(N,b))},f=x=>{if(x.stopPropagation(),!m.current)return;x.cancelable&&x.preventDefault();const{x:N,y:b}=k(x),T=v.getContext("2d");T&&(T.lineTo(N,b),T.stroke())},c=x=>{x.cancelable&&x.preventDefault(),x.stopPropagation(),m.current=!1},h={passive:!1};return v.addEventListener("mousedown",L),v.addEventListener("mousemove",f),v.addEventListener("mouseup",c),v.addEventListener("mouseleave",c),v.addEventListener("touchstart",L,h),v.addEventListener("touchmove",f,h),v.addEventListener("touchend",c,h),()=>{v.removeEventListener("mousedown",L),v.removeEventListener("mousemove",f),v.removeEventListener("mouseup",c),v.removeEventListener("mouseleave",c),v.removeEventListener("touchstart",L),v.removeEventListener("touchmove",f),v.removeEventListener("touchend",c)}},[]);const p=()=>{const v=o.current;if(!v)return;const k=v.getContext("2d");k&&(k.clearRect(0,0,v.width,v.height),d(!1))},g=async()=>{o.current&&o.current.toBlob(async v=>{if(v){const k=await of(v);r(k)}},"image/png")},w=()=>e.length<=3?"120px":e.length<=6?"80px":e.length<=10?"50px":"36px";return i.jsxs("div",{className:"flex flex-col items-center gap-3 w-full touch-none",onMouseDown:v=>v.stopPropagation(),onTouchStart:v=>v.stopPropagation(),children:[i.jsxs("div",{ref:l,className:`relative border-4 border-kid-blue rounded-xl overflow-hidden bg-white shadow-inner ${t?"w-[280px] h-[280px]":"w-full max-w-lg h-[200px]"}`,children:[i.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none opacity-20 select-none",children:t?i.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[i.jsx("rect",{x:"0",y:"0",width:"100",height:"100",fill:"none",stroke:"red",strokeWidth:"1"}),i.jsx("line",{x1:"50",y1:"0",x2:"50",y2:"100",stroke:"red",strokeWidth:"0.5",strokeDasharray:"5,5"}),i.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"red",strokeWidth:"0.5",strokeDasharray:"5,5"}),i.jsx("line",{x1:"0",y1:"0",x2:"100",y2:"100",stroke:"red",strokeWidth:"0.5",strokeDasharray:"5,5"}),i.jsx("line",{x1:"100",y1:"0",x2:"0",y2:"100",stroke:"red",strokeWidth:"0.5",strokeDasharray:"5,5"})]}):i.jsxs("div",{className:"flex flex-col h-full justify-center space-y-10 p-4",children:[i.jsx("div",{className:"border-b-2 border-red-300"}),i.jsx("div",{className:"border-b border-blue-200 border-dashed"}),i.jsx("div",{className:"border-b border-blue-200 border-dashed"}),i.jsx("div",{className:"border-b-2 border-red-300"})]})}),i.jsx("div",{className:"absolute inset-0 z-1 pointer-events-none flex items-center justify-center select-none",children:t?i.jsx("div",{ref:a,className:"opacity-100"}):i.jsx("span",{className:"font-mono text-gray-300 tracking-widest font-sans font-bold",style:{fontFamily:'"Fredoka", sans-serif',fontSize:w()},children:e})}),i.jsx("canvas",{ref:o,className:"absolute inset-0 z-20 w-full h-full cursor-crosshair touch-none",style:{touchAction:"none"}})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:p,className:"px-4 py-2 rounded-full bg-gray-200 text-gray-600 font-bold hover:bg-gray-300 text-sm",children:"  (Clear)"}),i.jsx("button",{onClick:g,disabled:!u||s,className:"px-6 py-2 rounded-full bg-green-500 text-white font-bold hover:bg-green-600 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:s?" ...":"  (Grade)"})]})]})},nr=({trigger:e})=>{const[t,n]=y.useState([]);return y.useEffect(()=>{if(e===0)return;const r=["#F72585","#4CC9F0","#FDC500","#7209B7","#06D6A0"],s=Array.from({length:50}).map((l,a)=>({id:Date.now()+a,left:Math.random()*100+"vw",bg:r[Math.floor(Math.random()*r.length)],delay:Math.random()*.5+"s"}));n(s);const o=setTimeout(()=>{n([])},3e3);return()=>clearTimeout(o)},[e]),t.length===0?null:i.jsx("div",{className:"fixed inset-0 pointer-events-none z-[9999] overflow-hidden",children:t.map(r=>i.jsx("div",{className:"confetti",style:{left:r.left,backgroundColor:r.bg,animationDelay:r.delay,borderRadius:Math.random()>.5?"50%":"0"}},r.id))})},gs={[A.ENGLISH]:["Animals","Fruits","Colors","Family","School","Toys","Space","Ocean","Food","Nature"],[A.CHINESE]:["","","","","","","","","",""]},hr=Array.from({length:26},(e,t)=>String.fromCharCode(65+t)),vg=()=>i.jsx("div",{className:"flex items-center gap-1 h-8 justify-center",children:[1,2,3,4,5,4,3,2].map(e=>i.jsx("div",{className:"w-1.5 bg-red-400 rounded-full animate-bounce",style:{height:`${e*6}px`,animationDuration:"0.6s",animationDelay:`${e*.05}s`}},e))}),Gu=({mode:e,difficulty:t,voiceId:n,onUpdateProgress:r,initialData:s,onAddToHistory:o,history:l,onModeSwitch:a})=>{const[u,d]=y.useState(null),[m,p]=y.useState(W.IDLE),[g,w]=y.useState(!1),[v,k]=y.useState(0),[L,f]=y.useState([]),[c,h]=y.useState(-1),[x,N]=y.useState([]),[b,T]=y.useState([]),D=y.useRef(!1),C=y.useRef(null),[_,O]=y.useState(!1),[G,q]=y.useState("TOPIC"),[V,F]=y.useState(gs[e][0]),[P,H]=y.useState("CARD"),[S,R]=y.useState(!1),[$,B]=y.useState(!1),[j,z]=y.useState(null),[X,Y]=y.useState(!1),[ae,I]=y.useState(null),[K,ne]=y.useState(!1),se=y.useRef(null),ct=y.useRef(null),nt=y.useRef(null),Dt=y.useRef(null),rr=y.useRef(!1),dt=n==="RANDOM"&&(u!=null&&u.assignedVoice)?u.assignedVoice:n;y.useEffect(()=>()=>{We(),rl()},[]),y.useEffect(()=>{We()},[u]),y.useEffect(()=>{s||(q("TOPIC"),F(gs[e][0]),N([]),T([]),f([]),h(-1),R(!1),rl())},[e]),y.useEffect(()=>{if(e===A.CHINESE&&u&&nt.current&&!g&&P==="CARD"){nt.current&&(nt.current.innerHTML="");const E=u.word.charAt(0);if(/[\u4e00-\u9fa5]/.test(E))try{Dt.current=_t.create(nt.current,E,{width:50,height:50,padding:2,showOutline:!0,strokeAnimationSpeed:1,delayBetweenLoops:1e3,strokeColor:"#333333",radicalColor:"#168F16",onLoadCharDataSuccess:()=>{var Q;(Q=Dt.current)==null||Q.loopCharacterAnimation()}})}catch(Q){console.error("HanziWriter error",Q)}}},[u,e,g,P]);const Eo=async()=>{if(_)return[];if(C.current)return C.current;D.current=!0;const E=async()=>{try{const Q=e===A.ENGLISH?"en":"zh",ee=[...x].slice(0,100),De=(await rm(V,Q,t,ee)).map(Cn=>{const _f=Zt[Math.floor(Math.random()*Zt.length)];return{...Cn,imageUrl:void 0,assignedVoice:_f}});return T(Cn=>[...Cn,...De]),De}catch(Q){return console.warn("Batch fetch failed",Q),[]}finally{D.current=!1,C.current=null}};return C.current=E(),C.current},bo=async E=>{if(E.imageUrl)return E;try{const Q=await It(E.imagePrompt),ee={...E,imageUrl:Q};return T(ve=>ve.map(De=>De.word===E.word?ee:De)),ee}catch{return console.error("Failed to load image for",E.word),E}};y.useEffect(()=>{if(b.length>0){const E=b[0];E.imageUrl?Et(E.imageUrl):bo(E).then(ee=>{ee.imageUrl&&Et(ee.imageUrl)});const Q=n==="RANDOM"&&E.assignedVoice?E.assignedVoice:n;gt(E.word,Q),gt(E.translation,Q),gt(E.sentence,Q)}},[u,b.length,n]);const To=E=>{We(),w(!0),setTimeout(()=>{E(),setTimeout(()=>w(!1),50)},300)},qr=async()=>{if(p(W.LOADING),z(null),I(null),H("CARD"),_){const E=l.filter(Q=>Q.mode===e&&Q.type==="FLASHCARD");if(E.length>0){const ee=E[Math.floor(Math.random()*E.length)].data;ee.imageUrl||(ee.imageUrl=await It(ee.imagePrompt)),ee.imageUrl&&Et(ee.imageUrl),d(ee),p(W.SUCCESS),setTimeout(()=>sr(ee),500);return}else alert(""),O(!1)}if(b.length>0){const E=b[0];T(ee=>ee.slice(1)),b.length<=10&&!D.current&&Eo();const Q=await bo(E);ua(Q)}else{const E=await Eo();if(E.length>0){const Q=E[0];T(ve=>ve.slice(1));const ee=await bo(Q);ua(ee)}else p(W.ERROR)}},ua=E=>{d(E),p(W.SUCCESS),o(E),f(Q=>[...Q,E]),h(Q=>Q+1),N(Q=>[E.word,...Q].slice(0,200)),setTimeout(()=>sr(E),600)},sr=E=>{if(!E)return;const Q=[E.word,E.translation,E.sentence],ee=n==="RANDOM"&&E.assignedVoice?E.assignedVoice:n;xm(Q,ee)},Ro=()=>{To(()=>{if(c<L.length-1){const E=c+1;h(E);const Q=L[E];d(Q),z(null),I(null),sr(Q)}else qr()})},ca=()=>{c>0&&To(()=>{const E=c-1;h(E),d(L[E]),z(null),I(null),sr(L[E])})},da=E=>{ct.current=E},fa=E=>{if(ct.current===null)return;const Q=ct.current-E;ct.current=null,Math.abs(Q)>50&&(Q>0?Ro():ca())};y.useEffect(()=>{if(s&&!rr.current){d(s),p(W.SUCCESS),rr.current=!0,N([s.word]),f([s]),h(0),Eo();return}rr.current||(qr(),rr.current=!0)},[s]);const ha=y.useRef(V+t);y.useEffect(()=>{ha.current!==V+t&&(N([]),T([]),f([]),h(-1),rl(),To(()=>qr()),ha.current=V+t)},[V,t]);const pa=()=>{if($)return;We(),z(null),B(!0);const E=e===A.ENGLISH?"en":"zh";se.current=Yr(E,Q=>{B(!1),Nf(Q)},()=>B(!1),Q=>{console.error(Q),B(!1),J(Q,dt)})},Jr=()=>{if(se.current)try{se.current.stop()}catch{}B(!1)},Nf=async E=>{if(u){Y(!0);try{const Q=e===A.ENGLISH?"en":"zh",ee=await am(u.word,E,Q);if(z(ee),ee.comment){let ve=ee.comment;if(ee.score===3){const De=["","","",""];ve=De[Math.floor(Math.random()*De.length)]+" "+ve}else ee.score===1&&(ve=""+ve);J(ve,dt)}ee.score>=2&&(r(1,1),ee.score===3&&k(Date.now()))}finally{Y(!1)}}},ma=async E=>{if(!(!u&&!S)){ne(!0);try{const Q=e===A.CHINESE,ee=S?V:Q?u.word[0]:u.word,ve=await rf(ee,E,Q);if(I(ve),ve.comment){let De=ve.comment;if(ve.score===3){const Cn=["","",""];De=Cn[Math.floor(Math.random()*Cn.length)]+" "+De}else ve.score===1&&(De=""+De);J(De,dt)}ve.score>=2&&(r(1,1),ve.score===3&&k(Date.now()))}finally{ne(!1)}}},ga=E=>{const Q=hr.indexOf(V);if(Q===-1)return;const ee=(Q+E+hr.length)%hr.length;F(hr[ee])},xa="bg-indigo-600 border-indigo-600 text-white shadow-lg shadow-indigo-200 transform scale-105 z-10",ya="bg-white border-gray-200 text-gray-500 hover:border-indigo-300 hover:text-indigo-600";return i.jsxs("div",{className:"max-w-xl mx-auto space-y-4 pb-24",children:[i.jsx(nr,{trigger:v}),i.jsxs("div",{className:"flex flex-col gap-3",children:[e===A.ENGLISH&&i.jsxs("div",{className:"flex justify-center gap-3",children:[i.jsx("button",{onClick:()=>{q("TOPIC"),F(gs[A.ENGLISH][0]),R(!1)},className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${G==="TOPIC"?xa:ya}`,children:" "}),i.jsx("button",{onClick:()=>{q("ALPHABET"),F("A")},className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${G==="ALPHABET"?xa:ya}`,children:" "})]}),i.jsx("div",{className:"flex justify-end px-2",children:i.jsxs("label",{className:"flex items-center cursor-pointer gap-2",children:[i.jsx("span",{className:`text-sm font-bold ${_?"text-orange-500":"text-gray-400"}`,children:_?" ":" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"checkbox",className:"sr-only",checked:_,onChange:()=>O(!_)}),i.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${_?"bg-orange-400":"bg-gray-300"}`}),i.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${_?"transform translate-x-4":""}`})]})]})})]}),i.jsx("div",{className:"overflow-x-auto pb-2 no-scrollbar px-1 -mx-4 sm:mx-0",children:i.jsx("div",{className:"flex gap-2 px-4 sm:px-0 w-max mx-auto",children:G==="TOPIC"?gs[e].map(E=>i.jsx("button",{onClick:()=>F(E),className:`px-4 py-1.5 rounded-full whitespace-nowrap text-sm font-bold transition-all border-2 ${V===E?"bg-purple-600 text-white border-purple-600 shadow-md":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50"}`,children:E},E)):i.jsx("div",{className:"flex flex-wrap justify-center gap-2 max-w-full",children:hr.map(E=>i.jsx("button",{onClick:()=>{F(E),R(!1)},className:`w-9 h-9 rounded-xl flex items-center justify-center text-sm font-bold transition-all border-2 ${V===E?"bg-pink-500 text-white border-pink-500 shadow-md":"bg-white text-gray-500 border-gray-200 hover:border-pink-300"}`,children:E},E))})})}),G==="ALPHABET"&&i.jsxs("div",{className:"flex justify-center gap-4 mb-2",children:[i.jsxs("button",{onClick:()=>R(!0),className:`px-4 py-1 rounded-full text-xs font-bold transition-all border ${S?"bg-kid-pink text-white border-kid-pink":"bg-white text-gray-500 border-gray-200"}`,children:["  (",V,")"]}),i.jsx("button",{onClick:()=>R(!1),className:`px-4 py-1 rounded-full text-xs font-bold transition-all border ${S?"bg-white text-gray-500 border-gray-200":"bg-kid-blue text-white border-kid-blue"}`,children:" "})]}),S?i.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden flex flex-col relative border-2 border-gray-100 min-h-[500px] p-6 items-center justify-center space-y-6 animate-fade-in",children:[i.jsx("button",{onClick:()=>ga(-1),className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-white border border-gray-200 rounded-full shadow-md z-30 flex items-center justify-center text-gray-600 hover:bg-gray-50 transition-colors",children:""}),i.jsx("button",{onClick:()=>ga(1),className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-white border border-gray-200 rounded-full shadow-md z-30 flex items-center justify-center text-gray-600 hover:bg-gray-50 transition-colors",children:""}),i.jsxs("div",{className:"text-center",children:[i.jsxs("h2",{className:"text-8xl font-black text-gray-800 font-sans tracking-wider mb-2",children:[V," ",i.jsx("span",{className:"text-6xl text-gray-400 font-normal",children:V.toLowerCase()})]}),i.jsx("button",{onClick:()=>J(V,dt),className:"mt-2 w-12 h-12 rounded-full bg-pink-100 text-pink-600 flex items-center justify-center text-2xl shadow-sm hover:scale-110 transition-transform",children:""})]}),i.jsx(ai,{target:V,isChinese:!1,onGrade:ma,isGrading:K,strokeGuideUrl:null}),ae&&i.jsxs("div",{className:"mt-4 w-full bg-white border-2 border-green-300 rounded-xl p-3 shadow-sm animate-bounce-in text-center relative max-w-sm",children:[i.jsx("button",{onClick:()=>I(null),className:"absolute top-1 right-2 text-gray-300 hover:text-gray-500",children:""}),i.jsx("div",{className:"flex justify-center text-2xl mb-1",children:[1,2,3].map(E=>i.jsx("span",{className:E<=ae.score?"":"grayscale opacity-30",children:""},E))}),i.jsx("p",{className:"font-bold text-gray-700",children:ae.comment})]})]}):i.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden flex flex-col relative border-2 border-gray-100 min-h-[500px] select-none touch-pan-y",onMouseDown:E=>da(E.clientX),onMouseUp:E=>fa(E.clientX),onTouchStart:E=>da(E.touches[0].clientX),onTouchEnd:E=>fa(E.changedTouches[0].clientX),children:[m===W.LOADING&&i.jsx("div",{className:"h-full flex items-center justify-center flex-1",children:i.jsx(rn,{text:`${e===A.ENGLISH?"":""}...`})}),m===W.ERROR&&i.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 flex-1",children:[i.jsx("p",{className:"text-red-500 mb-4 font-bold",children:""}),i.jsx("button",{onClick:()=>qr(),className:"bg-kid-blue text-white px-6 py-2 rounded-full font-bold",children:""})]}),m===W.SUCCESS&&u&&i.jsxs("div",{className:`w-full flex flex-col flex-1 relative transition-opacity duration-300 ${g?"opacity-0":"opacity-100"}`,children:[i.jsx("button",{onClick:E=>{E.stopPropagation(),ca()},disabled:c<=0,className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-white border border-gray-200 hover:bg-gray-50 rounded-full shadow-md z-30 flex items-center justify-center text-gray-600 disabled:opacity-0 transition-opacity",children:""}),i.jsx("button",{onClick:E=>{E.stopPropagation(),Ro()},className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-white border border-gray-200 hover:bg-gray-50 rounded-full shadow-md z-30 flex items-center justify-center text-gray-600 disabled:opacity-0 transition-opacity",children:""}),i.jsxs("div",{className:"absolute top-2 right-2 z-20 flex bg-white/80 rounded-full p-1 border border-gray-200 shadow-sm backdrop-blur-sm",children:[i.jsx("button",{onClick:()=>H("CARD"),className:`px-3 py-1 rounded-full text-xs font-bold transition-colors ${P==="CARD"?"bg-blue-100 text-blue-600":"text-gray-400"}`,children:" "}),i.jsx("button",{onClick:()=>H("WRITE"),className:`px-3 py-1 rounded-full text-xs font-bold transition-colors ${P==="WRITE"?"bg-green-100 text-green-600":"text-gray-400"}`,children:" "})]}),P==="CARD"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"h-64 bg-gray-50 w-full relative group flex items-center justify-center border-b border-gray-50 overflow-hidden p-6",children:[u.imageUrl?i.jsx("img",{src:u.imageUrl,alt:u.word,className:"w-full h-full object-contain drop-shadow-md animate-fade-in",draggable:!1,onError:E=>{E.currentTarget.src=`https://placehold.co/600x600/e2e8f0/475569?text=${encodeURIComponent(u.word)}`}}):i.jsxs("div",{className:"text-gray-300 flex flex-col items-center animate-pulse",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsx("span",{className:"text-xs mt-2",children:"..."})]}),i.jsx("a",{href:`https://image.baidu.com/search/index?tn=baiduimage&word=${encodeURIComponent(u.word+" ")}`,target:"_blank",rel:"noopener noreferrer",onMouseDown:E=>E.stopPropagation(),onTouchStart:E=>E.stopPropagation(),className:"absolute bottom-2 right-2 bg-white text-gray-700 px-3 py-1 rounded-full text-xs font-bold shadow-md flex items-center gap-1 opacity-70 group-hover:opacity-100 transition-opacity border border-gray-200",children:"  (Baidu)"})]}),i.jsxs("div",{className:"p-4 flex flex-col items-center justify-center text-center space-y-4 flex-1",children:[i.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 flex-wrap",children:[i.jsx("h2",{className:"text-5xl font-black text-gray-800 tracking-wide font-sans",children:u.word}),i.jsx("button",{onClick:()=>J(u.word,dt),className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 hover:scale-110 transition-transform text-sm",children:""}),u.pinyin&&i.jsxs("p",{className:"text-gray-400 font-mono text-lg -mt-2 mx-2",children:["[",u.pinyin,"]"]}),i.jsx("span",{className:"text-3xl text-pink-500 font-bold font-sans",children:u.translation}),i.jsx("button",{onClick:()=>J(u.translation,dt),className:"w-8 h-8 bg-pink-100 rounded-full flex items-center justify-center text-pink-600 hover:scale-110 transition-transform text-sm",children:""}),e===A.CHINESE&&i.jsx("div",{ref:nt,className:"w-12 h-12 bg-white border border-kid-green rounded shadow-sm inline-block align-middle ml-2"})]}),i.jsxs("div",{className:"bg-yellow-50/80 rounded-xl p-4 border border-yellow-100 w-full max-w-sm relative hover:bg-yellow-100 transition-colors flex items-center gap-3",children:[i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"text-gray-800 font-medium text-lg leading-snug font-sans",children:u.sentence}),i.jsx("p",{className:"text-gray-500 text-sm mt-1",children:u.sentenceTranslation})]}),i.jsx("button",{onClick:()=>J(u.sentence,dt),className:"w-10 h-10 bg-yellow-200 rounded-full flex items-center justify-center text-yellow-700 hover:scale-110 transition-transform flex-shrink-0",children:""})]}),i.jsxs("div",{className:"flex items-center gap-6 mt-2",children:[i.jsx("button",{onClick:()=>sr(u),className:"w-16 h-16 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-3xl shadow-lg hover:bg-blue-200 hover:scale-105 active:scale-95 transition-all animate-breathe",title:"",children:""}),!j&&!X&&i.jsx("button",{onMouseDown:pa,onTouchStart:E=>{E.preventDefault(),pa()},onTouchEnd:E=>{E.preventDefault(),Jr()},onTouchCancel:Jr,onMouseUp:Jr,onMouseLeave:Jr,onContextMenu:E=>E.preventDefault(),className:`w-16 h-16 rounded-full flex items-center justify-center text-3xl shadow-lg transition-all active:scale-95 touch-none select-none
                                            ${$?"bg-red-500 text-white animate-pulse ring-4 ring-red-200":"bg-green-100 text-green-600 hover:bg-green-200"}`,children:$?i.jsx(vg,{}):""})]}),$&&i.jsx("p",{className:"text-xs text-gray-400 font-bold",children:"..."}),X&&i.jsx("div",{className:"text-blue-500 font-bold animate-pulse",children:" ..."}),j&&i.jsxs("div",{className:"w-full max-w-sm bg-white border-2 border-yellow-300 rounded-2xl p-4 shadow-xl animate-fade-in relative flex flex-col gap-2",children:[i.jsx("button",{onClick:()=>z(null),className:"absolute top-2 right-3 text-gray-300 hover:text-gray-500 font-bold",children:""}),i.jsx("div",{className:"flex justify-center text-3xl mb-1",children:[1,2,3].map(E=>i.jsx("span",{className:E<=j.score?"":"grayscale opacity-30",children:""},E))}),j.breakdown&&i.jsx("div",{className:"flex justify-center gap-2 my-2 flex-wrap",children:j.breakdown.map((E,Q)=>i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`
                                                        px-3 py-1 rounded-lg text-lg font-black border-b-4
                                                        ${E.status==="correct"?"bg-green-100 text-green-700 border-green-300":"bg-red-100 text-red-600 border-red-300"}
                                                    `,children:E.text}),E.pinyinOrIpa&&i.jsx("span",{className:"text-[10px] text-gray-400 font-mono mt-1",children:E.pinyinOrIpa})]},Q))}),i.jsx("p",{className:"font-bold text-gray-700 text-center",children:j.comment}),j.userPhonetic&&j.correctPhonetic&&!j.breakdown&&i.jsxs("div",{className:"text-xs text-gray-400 flex justify-between px-4 mt-2 bg-gray-50 py-2 rounded-lg",children:[i.jsxs("span",{children:[": /",j.userPhonetic,"/"]}),i.jsxs("span",{children:[": /",j.correctPhonetic,"/"]})]})]})]})]}),P==="WRITE"&&i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 bg-slate-50 w-full",onMouseDown:E=>E.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4 font-sans",children:e===A.CHINESE?"":""}),i.jsx(ai,{target:e===A.CHINESE?u.word[0]:u.word,isChinese:e===A.CHINESE,strokeGuideUrl:null,onGrade:ma,isGrading:K}),ae&&i.jsxs("div",{className:"mt-4 w-full bg-white border-2 border-green-300 rounded-xl p-3 shadow-sm animate-bounce-in text-center relative max-w-sm",children:[i.jsx("button",{onClick:()=>I(null),className:"absolute top-1 right-2 text-gray-300 hover:text-gray-500",children:""}),i.jsx("div",{className:"flex justify-center text-2xl mb-1",children:[1,2,3].map(E=>i.jsx("span",{className:E<=ae.score?"":"grayscale opacity-30",children:""},E))}),i.jsx("p",{className:"font-bold text-gray-700",children:ae.comment})]})]})]})]}),!S&&i.jsx("div",{className:"flex justify-center px-4",children:i.jsx("button",{onClick:Ro,disabled:m===W.LOADING,className:"w-full sm:w-auto bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white text-lg font-bold py-3 px-12 rounded-full shadow-lg shadow-blue-200 active:scale-95 transition-all flex items-center justify-center gap-2 animate-breathe",children:_?"  (Review)":"  (New)"})})]})},wg=({onUpdateProgress:e,difficulty:t,voiceId:n,initialData:r,onAddToHistory:s})=>{const[o,l]=y.useState("EXPLORE"),[a,u]=y.useState([]),[d,m]=y.useState([]),[p,g]=y.useState([]),[w,v]=y.useState(0),[k,L]=y.useState(!1),[f,c]=y.useState(W.IDLE),[h,x]=y.useState(!1),[N,b]=y.useState([]),T=y.useRef(null),D=y.useRef(!1),C=y.useRef(null);y.useEffect(()=>{um(t).then(b),r||O()},[t]),y.useEffect(()=>{r&&!D.current&&(l("CHAT"),m([r]),u([{role:"user",content:r.question},{role:"assistant",content:r.answer}]),D.current=!0)},[r]);const _=S=>`${S.fact}${S.detail}`;y.useEffect(()=>{const S=w+1;if(S<p.length){const R=p[S];gt(_(R),n),R.imagePrompt&&R.imagePrompt.startsWith("http")}!k&&p.length>0&&w>=p.length-2&&O(!0)},[p,w,k,n]),y.useEffect(()=>{C.current&&(C.current.scrollTop=C.current.scrollHeight)},[d,f,o]),y.useEffect(()=>()=>{if(T.current)try{T.current.stop()}catch{}We()},[]);const O=async(S=!1)=>{S||c(W.LOADING),L(!0);try{const R=await cm(t),$=await Promise.all(R.map(async B=>{const j=await It(B.imagePrompt);return{...B,imagePrompt:j}}));$.length>0&&(Et($[0].imagePrompt),gt(_($[0]),n)),g(B=>[...B,...$]),S||c(W.SUCCESS),!S&&$.length>0&&(J(_($[0]),n),s($[0]))}catch(R){console.error(R),S||c(W.ERROR)}finally{L(!1)}},G=()=>{if(w<p.length-1){const S=w+1;v(S);const R=p[S];J(_(R),n),s(R)}else O()},q=p[w],V=S=>{J(S,n)},F=async S=>{if(S.trim()){c(W.LOADING);try{const R=await dm(S,t,a);let $="";R.imageUrl&&($=await It(R.imageUrl),Et($));const B={...R,generatedImage:$};m(j=>[...j,B]),u(j=>[...j,{role:"user",content:S},{role:"assistant",content:R.answer}]),c(W.SUCCESS),s(R),V(R.answer)}catch(R){console.error(R),c(W.ERROR)}}},P=()=>{h||(x(!0),T.current=Yr("zh",S=>{F(S)},()=>x(!1),S=>{x(!1),J(S,n)}))},H=()=>{if(T.current)try{T.current.stop()}catch{}x(!1)};return i.jsxs("div",{className:"h-[calc(100vh-140px)] flex flex-col max-w-2xl mx-auto",children:[i.jsxs("div",{className:"bg-gradient-to-r from-kid-blue to-blue-400 p-4 rounded-2xl shadow-md mb-4 flex items-center justify-between text-white shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-full text-2xl backdrop-blur-sm",children:""}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-black text-xl tracking-wide",children:""}),i.jsx("p",{className:"opacity-90 text-xs",children:"Professor Panda"})]})]}),i.jsxs("div",{className:"flex bg-black/20 rounded-full p-1 backdrop-blur-md",children:[i.jsx("button",{onClick:()=>l("EXPLORE"),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${o==="EXPLORE"?"bg-white text-kid-blue shadow-sm":"text-white/80 hover:text-white"}`,children:" "}),i.jsx("button",{onClick:()=>l("CHAT"),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${o==="CHAT"?"bg-white text-kid-blue shadow-sm":"text-white/80 hover:text-white"}`,children:" "})]})]}),i.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col",children:[o==="EXPLORE"&&i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 overflow-y-auto no-scrollbar",children:[f===W.LOADING&&p.length===0?i.jsx(rn,{text:"..."}):q?i.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden w-full max-w-sm border-4 border-white ring-4 ring-blue-50 flex flex-col animate-bounce-in relative",children:[i.jsxs("div",{className:"aspect-[4/3] w-full bg-gray-100 relative overflow-hidden group",children:[i.jsx("img",{src:q.imagePrompt,alt:"Science",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),i.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[i.jsx("span",{className:"inline-block bg-kid-yellow text-yellow-900 px-2 py-1 rounded text-xs font-bold mb-1",children:"DID YOU KNOW?"}),i.jsx("h3",{className:"text-2xl font-black text-white leading-tight drop-shadow-md",children:q.topic})]})]}),i.jsxs("div",{className:"p-6 flex flex-col gap-4 bg-white",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-3xl",children:""}),i.jsx("p",{className:"font-bold text-gray-800 text-lg leading-relaxed",children:q.fact})]}),i.jsx("div",{className:"bg-blue-50 p-4 rounded-xl text-sm text-gray-600 leading-relaxed border border-blue-100",children:q.detail}),i.jsxs("div",{className:"flex gap-3 mt-2",children:[i.jsx("button",{onClick:()=>V(_(q)),className:"flex-1 bg-gradient-to-r from-kid-yellow to-yellow-400 text-yellow-900 py-3 rounded-full font-bold flex items-center justify-center gap-2 hover:scale-105 transition-transform shadow-sm",children:" "}),i.jsx("button",{onClick:()=>{l("CHAT"),F(`"${q.topic}"`)},className:"w-12 h-12 flex items-center justify-center bg-blue-100 text-blue-600 rounded-full font-bold hover:bg-blue-200 transition-colors",children:""})]})]})]}):i.jsx("div",{className:"text-center",children:i.jsx("button",{onClick:()=>O(),className:"bg-kid-blue text-white px-6 py-2 rounded-full font-bold",children:""})}),f!==W.LOADING||p.length>0?i.jsxs("button",{onClick:G,className:"mt-6 bg-white border-2 border-kid-blue text-kid-blue px-10 py-3 rounded-full font-black shadow-lg hover:bg-blue-50 hover:scale-105 active:scale-95 transition-all flex items-center gap-2",children:["  ",k&&i.jsx("span",{className:"text-xs animate-spin",children:""})]}):null]}),o==="CHAT"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{ref:C,className:"flex-1 overflow-y-auto space-y-6 pr-2 no-scrollbar pb-4 scroll-smooth",children:[d.length===0&&f===W.IDLE&&i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-6 animate-fade-in",children:[i.jsx("div",{className:"text-6xl animate-bounce",children:""}),i.jsx("p",{className:"text-gray-500 font-bold text-lg",children:""}),i.jsx("div",{className:"flex flex-wrap justify-center gap-2 max-w-sm",children:N.map((S,R)=>i.jsx("button",{onClick:()=>F(S),className:"bg-white border-2 border-kid-blue/30 text-kid-blue px-4 py-2 rounded-full font-bold shadow-sm hover:bg-kid-blue hover:text-white transition-all text-sm",children:S},R))})]}),d.map((S,R)=>i.jsxs("div",{className:"space-y-4 animate-fade-in-up",children:[i.jsx("div",{className:"flex justify-end",children:i.jsx("div",{className:"bg-kid-purple text-white px-5 py-3 rounded-2xl rounded-tr-sm shadow-md max-w-[85%] text-lg font-medium leading-relaxed",children:S.question})}),i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-white border border-gray-100 p-5 rounded-2xl rounded-tl-sm shadow-lg max-w-[95%] space-y-4 w-full",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"text-3xl mt-1 flex-shrink-0",children:""}),i.jsxs("div",{className:"space-y-3 w-full min-w-0",children:[i.jsx("p",{className:"text-lg text-gray-800 leading-relaxed font-medium",children:S.answer}),S.generatedImage&&i.jsx("div",{className:"relative rounded-xl overflow-hidden border border-gray-100 shadow-inner w-full bg-gray-50",children:i.jsx("img",{src:S.generatedImage,alt:"Illustration",className:"w-full h-auto object-cover max-h-60"})}),i.jsxs("div",{className:"flex gap-3 pt-1",children:[i.jsx("button",{onClick:()=>V(S.answer),className:"bg-blue-50 text-blue-600 px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-1 hover:bg-blue-100 transition-colors",children:" "}),S.imageUrl&&i.jsxs("a",{href:`https://image.baidu.com/search/index?tn=baiduimage&word=${encodeURIComponent(S.imageUrl)}`,target:"_blank",rel:"noopener noreferrer",className:"bg-pink-50 text-pink-600 px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-1 hover:bg-pink-100 transition-colors",children:[" : ",S.imageUrl]})]})]})]})})})]},R)),f===W.LOADING&&i.jsx("div",{className:"flex justify-start animate-pulse",children:i.jsxs("div",{className:"bg-white border border-gray-100 p-4 rounded-2xl rounded-tl-sm shadow-sm flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("span",{className:"text-gray-500 font-bold",children:h?"...":"..."})]})})]}),i.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 select-none pt-2 border-t border-gray-100 shrink-0",children:[i.jsx("button",{onMouseDown:P,onTouchStart:S=>{S.preventDefault(),P()},onMouseUp:H,onTouchEnd:S=>{S.preventDefault(),H()},onTouchCancel:H,onMouseLeave:H,onContextMenu:S=>S.preventDefault(),disabled:f===W.LOADING,className:`
                            h-20 w-20 rounded-full flex items-center justify-center text-4xl shadow-xl border-4 transition-all cursor-pointer touch-none
                            ${h?"bg-red-500 border-red-200 text-white animate-pulse shadow-red-200":"bg-gradient-to-b from-kid-green to-green-500 border-green-200 text-white hover:scale-105 active:scale-95 shadow-green-200"}
                        `,children:h?"":""}),i.jsx("p",{className:"text-gray-400 text-xs font-bold",children:h?" (Release to Send)":" (Hold to Ask)"})]})]})]})]})},Sg=({history:e,difficulty:t,voiceId:n,onUpdateProgress:r,onNavigate:s})=>{const[o,l]=y.useState(W.IDLE),[a,u]=y.useState(null),[d,m]=y.useState(""),[p,g]=y.useState(null),w=y.useRef(!1),[v,k]=y.useState(!1),[L,f]=y.useState(""),[c,h]=y.useState(!1),x=y.useRef(null),[N,b]=y.useState(3),[T,D]=y.useState(1),C=()=>t<=5?1:t<=8?3:5,_=()=>{let P="Apple";if(e.length>0){const H=e.filter(S=>S.type==="FLASHCARD");if(H.length>0){const S=H[Math.floor(Math.random()*H.length)];P=S.data.word||S.preview}}return P},O=async()=>{if(!w.current){w.current=!0;try{const P=_(),H=await Ru(P);It(H.imagePrompt).then(S=>{g({data:H,img:S}),w.current=!1})}catch(P){console.warn("Preload game failed",P),w.current=!1}}},G=async()=>{if(l(W.LOADING),u(null),m(""),f(""),h(!1),p){u(p.data),m(p.img),l(W.SUCCESS);const P=p.data;g(null),J(P.introText,n),P.type==="QUIZ"&&setTimeout(()=>J(P.question||"",n),2500),setTimeout(O,1e3);return}try{const P=_(),H=await Ru(P);u(H),It(H.imagePrompt).then(S=>{m(S),l(W.SUCCESS),J(H.introText,n),H.type==="QUIZ"&&H.question&&setTimeout(()=>J(H.question||"",n),2500),O()})}catch(P){console.error(P),l(W.ERROR)}};y.useEffect(()=>(G(),()=>{x.current&&x.current.stop(),We()}),[]);const q=()=>{if(!a||a.type!=="SPEAK"||v)return;k(!0),f("...");const H=/[\u4e00-\u9fa5]/.test(a.targetWord)?"zh":"en";x.current=Yr(H,S=>{const R=S.toLowerCase().replace(/[.,!?]/g,""),$=a.targetWord.toLowerCase().replace(/[.,!?]/g,"");R.includes($)||$.includes(R)?(f(" "),J(a.successText,n),k(!1),r(C(),1),D(B=>B+1),setTimeout(()=>G(),2500)):(f(`: ${a.targetWord}`),k(!1),b(B=>Math.max(0,B-1)))},()=>k(!1),S=>{f(S),k(!1)})},V=()=>{if(x.current)try{x.current.stop()}catch{}k(!1)},F=P=>{c||!a||(P===a.correctAnswer?(f(" "),h(!0),J(a.successText,n),r(C(),1),D(H=>H+1),setTimeout(()=>G(),2500)):(f(" "),J("",n),b(H=>Math.max(0,H-1))))};return o===W.LOADING||!a?i.jsxs("div",{className:"h-96 flex items-center justify-center flex-col",children:[i.jsx(rn,{text:"..."}),p&&i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"..."})]}):o===W.ERROR?i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[i.jsx("p",{className:"text-red-500",children:""}),i.jsx("button",{onClick:G,className:"bg-blue-500 text-white px-4 py-2 rounded-full",children:""})]}):i.jsxs("div",{className:"relative w-full max-w-2xl mx-auto rounded-3xl overflow-hidden shadow-2xl bg-gray-900 border-4 border-yellow-400 aspect-[4/5] sm:aspect-[4/3] transition-all",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[d&&i.jsx("img",{src:d,alt:"Scene",className:"w-full h-full object-cover animate-fade-in"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/10 to-black/30"})]}),i.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between p-6 text-white",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"bg-black/60 backdrop-blur-md px-4 py-2 rounded-full border border-white/20 shadow-lg flex items-center gap-4",children:[i.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((P,H)=>i.jsx("span",{className:`text-xl transition-all ${H<N?"opacity-100 scale-100":"opacity-30 scale-75 grayscale"}`,children:""},H))}),i.jsx("div",{className:"w-px h-6 bg-white/20"}),i.jsxs("span",{className:"font-black text-yellow-300",children:["Level ",T]})]}),i.jsx("button",{onClick:()=>s(A.HOME),className:"w-10 h-10 bg-white hover:bg-red-100 rounded-full flex items-center justify-center text-gray-800 font-bold backdrop-blur-sm transition-colors border-2 border-white",children:""})]}),i.jsx("div",{className:"mt-4 animate-slide-down",children:i.jsx("div",{className:"bg-gradient-to-r from-blue-600/80 to-purple-600/80 p-4 rounded-xl border border-white/30 backdrop-blur-md shadow-lg text-center",children:i.jsx("p",{className:"text-lg font-bold text-white drop-shadow-md",children:a.introText})})}),i.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center py-4 space-y-6",children:[a.type==="SPEAK"&&i.jsxs("div",{className:"text-center transform transition-all cursor-pointer group hover:scale-105",onClick:()=>J(a.targetWord,n),children:[i.jsxs("div",{className:"relative inline-block",children:[i.jsx("div",{className:"absolute inset-0 bg-yellow-400 rounded-3xl blur opacity-30 animate-pulse"}),i.jsx("div",{className:"bg-white/95 text-gray-900 px-10 py-6 rounded-3xl shadow-[0_0_40px_rgba(255,215,0,0.5)] border-b-8 border-yellow-500 relative z-10",children:i.jsx("h1",{className:"text-5xl sm:text-7xl font-black tracking-wider text-transparent bg-clip-text bg-gradient-to-br from-gray-800 to-black",children:a.targetWord})})]}),i.jsx("p",{className:"text-center mt-4 font-bold text-yellow-200 animate-bounce text-lg",children:" "})]}),a.type==="QUIZ"&&a.options&&i.jsxs("div",{className:"w-full max-w-md space-y-4",children:[i.jsx("div",{className:"bg-black/50 p-4 rounded-xl text-center backdrop-blur-md border border-white/10",children:i.jsx("h3",{className:"text-2xl font-bold text-white",children:a.question})}),i.jsx("div",{className:"grid grid-cols-1 gap-3",children:a.options.map((P,H)=>i.jsx("button",{onClick:()=>F(P),disabled:c,className:`
                                        w-full p-4 rounded-xl font-bold text-xl transition-all border-b-4 active:border-b-0 active:translate-y-1 transform
                                        ${c&&P===a.correctAnswer?"bg-green-500 border-green-700 text-white shadow-[0_0_20px_rgba(34,197,94,0.6)] scale-105":"bg-white text-gray-900 border-gray-300 hover:bg-yellow-300 hover:border-yellow-500"}
                                    `,children:P},H))})]})]}),i.jsxs("div",{className:"flex flex-col items-center justify-end min-h-[100px]",children:[i.jsx("p",{className:`text-3xl font-black mb-4 transition-all transform ${L?"scale-110 opacity-100":"scale-0 opacity-0"} ${L.includes("")?"text-green-400 drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)]":"text-red-300"}`,children:L}),a.type==="SPEAK"&&!L.includes("")&&i.jsx("button",{onMouseDown:q,onTouchStart:P=>{P.preventDefault(),q()},onMouseUp:V,onTouchEnd:P=>{P.preventDefault(),V()},onTouchCancel:V,onMouseLeave:V,onContextMenu:P=>P.preventDefault(),className:`
                        w-24 h-24 rounded-full flex items-center justify-center text-5xl shadow-2xl border-4 transition-all touch-none select-none
                        ${v?"bg-red-500 border-red-300 animate-pulse ring-4 ring-red-500/30":"bg-gradient-to-b from-green-400 to-green-600 border-green-300 hover:scale-105 hover:shadow-green-500/50 active:scale-95"}
                        `,children:v?"":""})]})]})]})},kg=({onUpdateProgress:e,voiceId:t})=>{const[n,r]=y.useState(W.IDLE),[s,o]=y.useState(null),[l,a]=y.useState(""),[u,d]=y.useState(""),[m,p]=y.useState([]),[g,w]=y.useState(""),[v,k]=y.useState(!1),[L,f]=y.useState(!1),[c,h]=y.useState(!1),x=y.useRef(null),N=y.useRef(null);y.useEffect(()=>(b(),()=>{x.current&&x.current.stop(),We()}),[]),y.useEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[m]);const b=async()=>{r(W.LOADING);try{const O=await fm();o(O);const G=It(O.bgPrompt),q=It(O.characterAvatarPrompt),[V,F]=await Promise.all([G,q]);a(V),d(F),w(O.openingLine),r(W.SUCCESS),T(O.openingLine)}catch(O){console.error(O),r(W.ERROR)}},T=async O=>{h(!0),await J(O,t),h(!1)},D=async O=>{if(!s)return;const G={role:"user",content:O},q=[...m,{role:"assistant",content:g},G];p(V=>[...V,G]),f(!0);try{const V=await hm(s,q,O);p(F=>[...F,{role:"assistant",content:V}]),w(V),T(V)}catch(V){console.error(V),w("")}finally{f(!1)}},C=()=>{v||(k(!0),x.current=Yr("zh",O=>{k(!1),O&&D(O)},()=>k(!1),O=>{console.error(O),k(!1),w(O)}))},_=()=>{if(x.current)try{x.current.stop()}catch{}k(!1)};return n===W.LOADING?i.jsx("div",{className:"h-96 flex flex-col items-center justify-center",children:i.jsx(rn,{text:"..."})}):n===W.ERROR||!s?i.jsxs("div",{className:"h-96 flex flex-col items-center justify-center gap-4",children:[i.jsx("p",{children:""}),i.jsx("button",{onClick:b,className:"bg-blue-500 text-white px-4 py-2 rounded-full",children:""})]}):i.jsxs("div",{className:"relative w-full max-w-2xl mx-auto h-[calc(100vh-140px)] flex flex-col",children:[i.jsxs("div",{className:"flex-1 relative bg-black rounded-3xl overflow-hidden border-[12px] border-gray-800 shadow-2xl ring-4 ring-gray-300",children:[i.jsxs("div",{className:"absolute inset-0 bg-sky-300",children:[l&&i.jsx("img",{src:l,className:"w-full h-full object-cover",alt:"bg"}),i.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-64 h-64 z-10 transition-all duration-300",children:u&&i.jsx("img",{src:u,className:`w-full h-full object-contain drop-shadow-2xl origin-bottom ${c?"animate-bounce":"animate-pulse"}`,alt:"Character"})}),i.jsx("div",{className:"absolute top-4 left-4 right-4 z-20",children:i.jsxs("div",{className:"bg-white/90 backdrop-blur-md border-2 border-white rounded-2xl p-4 shadow-lg text-center relative",children:[i.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-white rotate-45 border-b-2 border-r-2 border-white"}),i.jsx("p",{className:"text-gray-800 font-bold text-lg leading-relaxed",children:g})]})})]}),i.jsxs("div",{className:"absolute top-4 left-4 z-30 bg-black/50 text-white px-3 py-1 rounded font-mono text-xs",children:["CH 01: ",s.sceneName]})]}),i.jsxs("div",{className:"mt-6 flex items-center justify-between px-4",children:[i.jsxs("button",{onClick:b,className:"flex flex-col items-center gap-1 text-gray-600 hover:text-gray-800 transition-colors",children:[i.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-xl shadow-sm border border-gray-300",children:""}),i.jsx("span",{className:"text-xs font-bold",children:""})]}),i.jsx("button",{onMouseDown:C,onTouchStart:O=>{O.preventDefault(),C()},onMouseUp:_,onTouchEnd:O=>{O.preventDefault(),_()},onTouchCancel:_,onMouseLeave:_,onContextMenu:O=>O.preventDefault(),className:`
                    w-20 h-20 rounded-full flex items-center justify-center text-4xl shadow-xl transition-all touch-none select-none border-4
                    ${v?"bg-red-500 border-red-300 text-white animate-pulse ring-4 ring-red-200":"bg-gradient-to-b from-orange-400 to-orange-500 border-orange-200 text-white hover:scale-105 active:scale-95"}
                `,children:v?"":""}),i.jsxs("div",{className:"w-12 flex flex-col items-center gap-1 opacity-50",children:[i.jsx("div",{className:"w-full h-1 bg-gray-300 rounded"}),i.jsx("div",{className:"w-full h-1 bg-gray-300 rounded"}),i.jsx("div",{className:"w-full h-1 bg-gray-300 rounded"}),i.jsx("span",{className:"text-xs font-bold text-gray-400",children:"Speaker"})]})]}),i.jsx("p",{className:"text-center text-xs text-gray-400 mt-2 font-bold animate-pulse",children:v?"...":`${(s==null?void 0:s.characterName)||""}`})]})},Cg=({difficulty:e,voiceId:t,onUpdateProgress:n,onAddToHistory:r})=>{const[s,o]=y.useState("HANZI"),[l,a]=y.useState(""),[u,d]=y.useState(W.IDLE),[m,p]=y.useState(null),[g,w]=y.useState(!1),[v,k]=y.useState(0),[L,f]=y.useState([]),[c,h]=y.useState(0),[x,N]=y.useState([]);y.useEffect(()=>(b(),()=>We()),[s,e]);const b=async()=>{if(p(null),d(W.LOADING),s==="NUMBERS"){const C=["0","1","2","3","4","5","6","7","8","9"];a(C[0]),f(C),h(0),d(W.SUCCESS)}else if(s==="LETTERS"){const C=Array.from({length:26},(_,O)=>String.fromCharCode(65+O));a(C[0]),f(C),h(0),d(W.SUCCESS)}else try{const C=await im(e,x);f(C),a(C[0]),h(0),N(_=>[..._,...C].slice(-50)),d(W.SUCCESS)}catch{d(W.ERROR)}},T=()=>{if(p(null),s==="HANZI"&&c>=L.length-1)b();else{const C=(c+1)%L.length;h(C),a(L[C])}},D=async C=>{w(!0);try{const O=await rf(l,C,s==="HANZI");if(p(O),O.comment){let G=O.comment;if(O.score===3){const q=["","",""];G=q[Math.floor(Math.random()*q.length)]+" "+G}else O.score===1&&(G=""+G);J(G,t)}O.score>=2&&(n(1,1),r({char:l,type:s}),O.score===3&&k(Date.now()))}finally{w(!1)}};return i.jsxs("div",{className:"max-w-xl mx-auto pb-20",children:[i.jsx(nr,{trigger:v}),i.jsxs("div",{className:"flex justify-center gap-2 mb-6",children:[i.jsx("button",{onClick:()=>o("HANZI"),className:`px-4 py-2 rounded-full font-bold transition-all ${s==="HANZI"?"bg-kid-yellow text-white shadow-md scale-105":"bg-white text-gray-500"}`,children:" "}),i.jsx("button",{onClick:()=>o("LETTERS"),className:`px-4 py-2 rounded-full font-bold transition-all ${s==="LETTERS"?"bg-kid-pink text-white shadow-md scale-105":"bg-white text-gray-500"}`,children:"Aa "}),i.jsx("button",{onClick:()=>o("NUMBERS"),className:`px-4 py-2 rounded-full font-bold transition-all ${s==="NUMBERS"?"bg-kid-blue text-white shadow-md scale-105":"bg-white text-gray-500"}`,children:"123 "})]}),u===W.LOADING&&i.jsx("div",{className:"h-64 flex justify-center items-center",children:i.jsx(rn,{text:"..."})}),u===W.SUCCESS&&i.jsxs("div",{className:"flex flex-col items-center gap-6 animate-fade-in-up",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-6xl font-black text-gray-800 mb-2",children:l}),i.jsx("p",{className:"text-gray-400 text-sm",children:""})]}),i.jsx(ai,{target:l,isChinese:s==="HANZI",strokeGuideUrl:null,onGrade:D,isGrading:g}),m&&i.jsxs("div",{className:"bg-white border-2 border-green-300 rounded-xl p-4 shadow-lg text-center animate-bounce-in max-w-sm w-full relative",children:[i.jsx("button",{onClick:()=>p(null),className:"absolute top-1 right-2 text-gray-300",children:""}),i.jsx("div",{className:"flex justify-center gap-1 text-3xl mb-2",children:[1,2,3].map(C=>i.jsx("span",{className:C<=m.score?"":"grayscale opacity-20",children:""},C))}),i.jsx("p",{className:"font-bold text-gray-700",children:m.comment}),m.score>=2&&i.jsx("button",{onClick:T,className:"mt-3 bg-green-500 text-white px-6 py-2 rounded-full font-bold shadow-md hover:bg-green-600 active:scale-95 transition-all",children:" "})]}),!m&&i.jsx("button",{onClick:T,className:"text-gray-400 font-bold hover:text-gray-600",children:" "})]})]})},Ng=({difficulty:e,voiceId:t,onUpdateProgress:n,onAddToHistory:r})=>{const[s,o]=y.useState(""),[l,a]=y.useState(""),[u,d]=y.useState(W.IDLE),[m,p]=y.useState([]),[g,w]=y.useState(!1),[v,k]=y.useState(null),[L,f]=y.useState(0),c=y.useRef(null),[h,x]=y.useState("#000000"),[N,b]=y.useState(5),[T,D]=y.useState(!1),[C,_]=y.useState(!1),[O,G]=y.useState(!1),[q,V]=y.useState(!1),F=y.useRef(null),[P,H]=y.useState("zh-CN-XiaoyuMultilingualNeural");y.useEffect(()=>{if(t==="RANDOM"){const I=Zt[Math.floor(Math.random()*Zt.length)];H(I)}else H(t);return S(),()=>{if(We(),F.current)try{F.current.stop()}catch{}}},[]);const S=async I=>{d(W.LOADING),a(""),k(null),G(!1),j();try{let K=I;K||(K=await sm(e,m)),o(K),p(se=>[...se,K].slice(-20));const ne=await om(K);await Et(ne),a(ne),d(W.SUCCESS),r({topic:K})}catch(K){console.error(K),d(W.ERROR)}},R=I=>{const K=c.current;if(!K||v)return;D(!0),G(!0);const ne=K.getContext("2d");if(!ne)return;const se=K.getBoundingClientRect(),ct=("touches"in I?I.touches[0].clientX:I.clientX)-se.left,nt=("touches"in I?I.touches[0].clientY:I.clientY)-se.top;ne.beginPath(),ne.moveTo(ct,nt),ne.strokeStyle=C?"#FFFFFF":h,ne.lineWidth=N,ne.lineCap="round",ne.lineJoin="round"},$=I=>{if(!T)return;I.preventDefault();const K=c.current;if(!K)return;const ne=K.getContext("2d");if(!ne)return;const se=K.getBoundingClientRect(),ct=("touches"in I?I.touches[0].clientX:I.clientX)-se.left,nt=("touches"in I?I.touches[0].clientY:I.clientY)-se.top;ne.lineTo(ct,nt),ne.stroke()},B=()=>{D(!1)},j=()=>{const I=c.current;if(!I)return;const K=I.getContext("2d");K&&(K.clearRect(0,0,I.width,I.height),G(!1),k(null))},z=async()=>{const I=c.current;if(I){w(!0);try{const K=await new Promise(ne=>I.toBlob(ne,"image/png"));if(K){const ne=await of(K),se=await lm(s,ne,e);k(se),se.score>=2&&(n(5,1),se.score===3&&f(Date.now())),se.comment&&J(se.comment,P)}}catch(K){console.error("Grading failed",K)}finally{w(!1)}}};y.useEffect(()=>{const I=c.current;if(I){const K=I.parentElement;K&&(I.width=K.clientWidth,I.height=K.clientHeight)}},[u]);const X=()=>{q||(V(!0),F.current=Yr("zh",I=>{V(!1);let K=I;I.startsWith("")&&(K=I.substring(1)),I.endsWith("")&&(K=I.substring(0,I.length-1)),K&&S(K)},()=>V(!1),I=>{V(!1),J(I,P)}))},Y=()=>{if(F.current)try{F.current.stop()}catch{}V(!1)},ae=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FFA500","#800080","#FFC0CB","#A52A2A"];return i.jsxs("div",{className:"w-full h-[calc(100vh-140px)] flex flex-col gap-4 relative px-4 max-w-7xl mx-auto",children:[i.jsx(nr,{trigger:L}),i.jsxs("div",{className:"bg-gradient-to-r from-purple-400 to-pink-400 p-4 rounded-3xl shadow-md flex justify-between items-center text-white shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-black text-2xl",children:""}),i.jsx("p",{className:"text-base opacity-90",children:s?`: ${s}`:"Art Class"})]})]}),i.jsx("button",{onClick:()=>S(),className:"bg-white/20 hover:bg-white/30 px-6 py-3 rounded-full font-bold text-base backdrop-blur-sm transition-colors",children:" "})]}),i.jsxs("div",{className:"flex-1 relative bg-white rounded-3xl shadow-lg border-4 border-gray-200 overflow-hidden touch-none w-full",children:[u===W.LOADING&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50 bg-white",children:i.jsx(rn,{text:"..."})}),u===W.ERROR&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50 bg-white",children:i.jsx("p",{className:"text-red-500 font-bold",children:""})}),l&&i.jsx("div",{className:"absolute inset-0 z-0 bg-center bg-contain bg-no-repeat opacity-30 pointer-events-none",style:{backgroundImage:`url(${l})`}}),i.jsx("canvas",{ref:c,className:"absolute inset-0 z-10 cursor-crosshair w-full h-full",onMouseDown:R,onMouseMove:$,onMouseUp:B,onMouseLeave:B,onTouchStart:R,onTouchMove:$,onTouchEnd:B}),v&&i.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30 bg-white border-4 border-yellow-400 rounded-3xl p-6 shadow-2xl animate-bounce-in max-w-sm w-full text-center",children:[i.jsx("div",{className:"flex justify-center gap-2 text-5xl mb-4",children:[1,2,3].map(I=>i.jsx("span",{className:I<=v.score?"":"grayscale opacity-20",children:""},I))}),i.jsx("p",{className:"font-black text-gray-800 text-2xl mb-4",children:v.comment}),i.jsx("button",{onClick:()=>k(null),className:"px-6 py-2 bg-gray-100 rounded-full font-bold text-gray-500 hover:bg-gray-200 text-lg",children:""})]})]}),i.jsxs("div",{className:"bg-white p-4 rounded-3xl shadow-lg border border-gray-100 flex flex-col gap-4 shrink-0 max-w-4xl mx-auto w-full",children:[i.jsxs("div",{className:"flex gap-4 items-center justify-between overflow-x-auto pb-2 no-scrollbar",children:[i.jsx("div",{className:"flex gap-3",children:ae.map(I=>i.jsx("button",{onClick:()=>{x(I),_(!1)},className:`w-12 h-12 rounded-full border-2 shadow-sm transition-transform hover:scale-110 flex-shrink-0 ${h===I&&!C?"scale-110 ring-4 ring-gray-300":"border-white"}`,style:{backgroundColor:I}},I))}),i.jsxs("div",{className:"flex gap-3 pl-4 border-l-2 border-gray-100",children:[i.jsx("button",{onClick:()=>_(!0),className:`w-12 h-12 rounded-full border-2 flex items-center justify-center bg-gray-100 text-2xl shadow-sm hover:bg-gray-200 transition-colors ${C?"ring-4 ring-gray-300 bg-gray-200":"border-white"}`,title:"",children:""}),i.jsx("button",{onClick:j,className:"w-12 h-12 rounded-full border-2 flex items-center justify-center bg-red-50 text-red-500 text-2xl shadow-sm hover:bg-red-100 border-white",title:"",children:""})]})]}),i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsx("div",{className:"flex items-center gap-2 bg-gray-50 px-4 py-2 rounded-full border border-gray-200 shrink-0",children:[3,8,15].map((I,K)=>i.jsx("button",{onClick:()=>b(I),className:`w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-200 transition-colors ${N===I?"bg-gray-200":""}`,children:i.jsx("div",{className:"bg-gray-800 rounded-full",style:{width:K*4+6,height:K*4+6}})},I))}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onMouseDown:X,onTouchStart:I=>{I.preventDefault(),X()},onMouseUp:Y,onTouchEnd:I=>{I.preventDefault(),Y()},onTouchCancel:Y,onMouseLeave:Y,onContextMenu:I=>I.preventDefault(),className:`
                            flex items-center justify-center w-16 h-14 rounded-full font-bold shadow-md transition-all select-none text-2xl
                            ${q?"bg-red-500 text-white animate-pulse":"bg-orange-100 text-orange-500 hover:bg-orange-200"}
                        `,children:q?"":""}),i.jsx("button",{onClick:z,disabled:!O||g,className:`
                            flex items-center gap-2 px-8 py-3 rounded-full font-black shadow-lg transition-all select-none text-white text-lg
                            ${g?"bg-gray-400 cursor-not-allowed":O?"bg-gradient-to-r from-green-400 to-green-600 hover:scale-105 active:scale-95":"bg-gray-300 cursor-not-allowed"}
                        `,children:g?"...":" "})]})]})]})]})},_g=({difficulty:e,voiceId:t,onUpdateProgress:n,onAddToHistory:r})=>{const[s,o]=y.useState("PRACTICE"),[l,a]=y.useState(null),[u,d]=y.useState(""),[m,p]=y.useState("IDLE"),[g,w]=y.useState(0),[v,k]=y.useState(0),[L,f]=y.useState(0),[c,h]=y.useState(!1),[x,N]=y.useState(0),[b,T]=y.useState(0),D=y.useRef(null);y.useEffect(()=>(k(0),N(0),h(!1),f(0),D.current&&clearInterval(D.current),s==="TIMED"?a(null):O(),()=>{We(),D.current&&clearInterval(D.current)}),[e,s]),y.useEffect(()=>(c&&L>0?D.current=window.setInterval(()=>{f(P=>P<=1?(_(),0):P-1)},1e3):D.current&&clearInterval(D.current),()=>{D.current&&clearInterval(D.current)}),[c,L]);const C=()=>{N(0),f(60),h(!0),O()},_=()=>{h(!1),T(P=>Math.max(P,x)),J(`${x}`,t),n(x*2,x)},O=y.useCallback(()=>{let P;const H=["","","","","",""],S=H[Math.floor(Math.random()*H.length)],R=s==="CORRECTION",$=j=>{const z=(Math.random()>.5?1:-1)*(Math.floor(Math.random()*2)+1);return Math.max(0,j+z)};if(e<=4)if(Math.random()>.5){const j=Math.floor(Math.random()*5)+1,z=R?$(j):j;P={questionText:R?`${z}${S}`:`${S}?`,displayEquation:R?`Count = ${z}`:"Count = ?",answer:j,visual:j,visualType:S,isCorrectionMode:R}}else{const j=Math.floor(Math.random()*3)+1,z=Math.floor(Math.random()*(5-j))+1,X=j+z,Y=R?$(X):"?";P={questionText:R?`${j}  ${z}  ${Y}`:`${j} + ${z} = ?`,displayEquation:`${j} + ${z} = ${Y}`,answer:X,visual:X,visualType:S,isCorrectionMode:R}}else if(e<=6)if(Math.random()>.4){const j=Math.floor(Math.random()*10)+1,z=Math.floor(Math.random()*10)+1,X=j+z,Y=R?$(X):"?";P={questionText:`${j} + ${z}`,displayEquation:`${j} + ${z} = ${Y}`,answer:X,isCorrectionMode:R}}else{const j=Math.floor(Math.random()*10)+5,z=Math.floor(Math.random()*j),X=j-z,Y=R?$(X):"?";P={questionText:`${j} - ${z}`,displayEquation:`${j} - ${z} = ${Y}`,answer:X,isCorrectionMode:R}}else if(e<=8)if(Math.random()>.5){const j=Math.floor(Math.random()*40)+10,z=Math.floor(Math.random()*40)+10,X=j+z,Y=R?$(X):"?";P={questionText:`${j} + ${z}`,displayEquation:`${j} + ${z} = ${Y}`,answer:X,isCorrectionMode:R}}else{const j=Math.floor(Math.random()*50)+20,z=Math.floor(Math.random()*20)+1,X=j-z,Y=R?$(X):"?";P={questionText:`${j} - ${z}`,displayEquation:`${j} - ${z} = ${Y}`,answer:X,isCorrectionMode:R}}else if(Math.random()>.5){const j=Math.floor(Math.random()*9)+2,z=Math.floor(Math.random()*9)+2,X=j*z,Y=R?$(X):"?";P={questionText:`${j}  ${z}`,displayEquation:`${j}  ${z} = ${Y}`,answer:X,isCorrectionMode:R}}else{const j=Math.floor(Math.random()*8)+2,z=Math.floor(Math.random()*9)+2,X=j*z,Y=R?$(z):"?";P={questionText:`${X}  ${j}`,displayEquation:`${X}  ${j} = ${Y}`,answer:z,isCorrectionMode:R}}a(P),d(""),p("IDLE");let B="";R?B="":B=P.questionText.replace("=","").replace("+","").replace("-","").replace("","").replace("",""),J(B,t)},[e,t,s]),G=P=>{m!=="IDLE"||s==="TIMED"&&!c||(P==="DEL"?d(H=>H.slice(0,-1)):P==="OK"?q():u.length<3&&d(H=>H+P))},q=()=>{if(!l||!u)return;if(parseInt(u)===l.answer){p("CORRECT"),w(Date.now()),k(B=>B+1);const S=["","","",""],R=S[Math.floor(Math.random()*S.length)];s!=="TIMED"?J(R,t):N(B=>B+1),s!=="TIMED"&&n(1,1),r({question:l.displayEquation,result:"Correct"}),setTimeout(()=>{O()},s==="TIMED"?500:2e3)}else p("WRONG"),k(0),J("",t),setTimeout(()=>{p("IDLE"),d("")},1e3)},V=["1","2","3","4","5","6","7","8","9","DEL","0","OK"],F=[{id:"PRACTICE",label:" "},{id:"TIMED",label:" "},{id:"CORRECTION",label:" "}];return i.jsxs("div",{className:"max-w-2xl mx-auto h-full flex flex-col justify-between pb-8",children:[i.jsx(nr,{trigger:g}),i.jsxs("div",{className:"flex flex-col gap-4 px-4 mb-2",children:[i.jsx("div",{className:"flex justify-center bg-gray-100 p-1 rounded-full self-center",children:F.map(P=>i.jsx("button",{onClick:()=>o(P.id),className:`px-4 py-1.5 rounded-full text-sm font-bold transition-all ${s===P.id?"bg-white shadow text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:P.label},P.id))}),i.jsxs("div",{className:"flex justify-between items-center",children:[s==="TIMED"?i.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl font-black text-xl border-2 ${L<10?"bg-red-50 border-red-200 text-red-500 animate-pulse":"bg-blue-50 border-blue-200 text-blue-500"}`,children:[i.jsx("span",{children:""}),i.jsxs("span",{children:[L,"s"]})]}):i.jsxs("div",{className:"bg-orange-100 text-orange-600 px-4 py-1 rounded-full font-bold",children:[" : ",v]}),s==="TIMED"&&i.jsxs("div",{className:"bg-yellow-100 text-yellow-700 px-4 py-1 rounded-full font-bold border border-yellow-300",children:[": ",x]}),s!=="TIMED"&&i.jsx("button",{onClick:O,className:"text-gray-400 font-bold hover:text-gray-600",children:" "})]})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-8 min-h-[300px] relative",children:[s==="TIMED"&&!c&&L===0&&x>0&&i.jsxs("div",{className:"absolute inset-0 bg-white/90 backdrop-blur-sm z-20 flex flex-col items-center justify-center animate-fade-in text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-2xl font-black text-gray-800 mb-2",children:""}),i.jsxs("p",{className:"text-gray-500 mb-6",children:[": ",i.jsx("span",{className:"text-4xl font-black text-blue-600",children:x})]}),i.jsx("button",{onClick:C,className:"bg-kid-blue text-white px-8 py-3 rounded-full font-bold text-xl shadow-lg hover:scale-105 transition-transform",children:""})]}),s==="TIMED"&&!c&&L===0&&x===0?i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),i.jsx("h3",{className:"text-2xl font-black text-gray-800 mb-4",children:"60"}),i.jsx("p",{className:"text-gray-500 mb-8 max-w-xs mx-auto",children:"1"}),i.jsx("button",{onClick:C,className:"bg-kid-green text-white px-10 py-4 rounded-full font-bold text-2xl shadow-xl hover:scale-105 transition-transform border-b-4 border-green-600 active:border-b-0 active:translate-y-1",children:""})]}):l&&i.jsxs(i.Fragment,{children:[l.visual&&(e<=4||s==="TIMED")&&i.jsx("div",{className:"flex flex-wrap justify-center gap-4 animate-fade-in px-4",children:Array.from({length:l.visual}).map((P,H)=>i.jsx("span",{className:"text-6xl animate-bounce",style:{animationDelay:H*.1+"s"},children:l.visualType},H))}),i.jsxs("div",{className:"relative",children:[l.isCorrectionMode&&i.jsx("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 bg-red-100 text-red-500 px-3 py-1 rounded-full text-xs font-bold whitespace-nowrap border border-red-200",children:""}),i.jsx("div",{className:`
                    text-5xl sm:text-7xl font-black tracking-wider transition-all duration-300 flex items-center justify-center gap-4 flex-wrap
                    ${m==="CORRECT"?"text-green-500 scale-110":m==="WRONG"?"text-red-500 shake":"text-gray-800"}
                    `,children:l.isCorrectionMode?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"opacity-50 line-through decoration-red-500 decoration-4",children:l.displayEquation.split("=")[1]}),i.jsx("span",{className:"text-gray-300",children:""}),i.jsx("span",{className:`border-b-4 min-w-[80px] text-center ${u?"border-gray-800 text-gray-800":"border-gray-300 text-gray-300"}`,children:u||"?"})]}):i.jsx("span",{children:l.displayEquation.replace("?",u||"?")})}),l.isCorrectionMode&&i.jsxs("div",{className:"text-center mt-2 text-2xl font-bold text-gray-400",children:[l.displayEquation.split("=")[0]," = ?"]})]}),m==="WRONG"&&i.jsx("p",{className:"text-red-400 font-bold text-xl animate-pulse text-center mt-4",children:"..."})]})]}),i.jsx("div",{className:`grid grid-cols-3 gap-3 px-4 sm:px-12 transition-opacity ${s==="TIMED"&&!c?"opacity-30 pointer-events-none":"opacity-100"}`,children:V.map(P=>i.jsx("button",{onClick:()=>G(P),className:`
              h-16 sm:h-20 rounded-2xl text-2xl font-black shadow-[0_4px_0_rgb(0,0,0,0.1)] active:shadow-none active:translate-y-[4px] transition-all
              ${P==="OK"?"bg-green-500 text-white shadow-green-700":P==="DEL"?"bg-red-100 text-red-500 shadow-red-200":"bg-white text-kid-blue shadow-gray-200 hover:bg-gray-50"}
            `,children:P==="DEL"?"":P==="OK"?"":P},P))})]})},jg=({difficulty:e,voiceId:t,onUpdateProgress:n,onAddToHistory:r})=>{const[s,o]=y.useState(W.IDLE),[l,a]=y.useState(null),[u,d]=y.useState(null),[m,p]=y.useState(null),[g,w]=y.useState(0),[v,k]=y.useState(0),[L,f]=y.useState(t),[c,h]=y.useState({}),[x,N]=y.useState(""),b=y.useRef(null),T=y.useRef(!1);y.useEffect(()=>{b.current=null,_()},[e]);const D=async()=>{let F=t;F==="RANDOM"&&(F=Zt[Math.floor(Math.random()*Zt.length)]);const P=await pm(e);gt(P.question,F),gt(""+P.explanation,F),P.hint&&gt(P.hint,F),gt("",F),gt("",F);const H={};let S="";const R=[];if(P.type==="GUESS_OBJECT"&&P.partialImagePrompt){const $=oi(P.partialImagePrompt).then(B=>(S=B,Et(B)));R.push($)}return P.options.forEach($=>{const B=$.imagePrompt||$.content;let j;(P.type==="CLASSIFICATION"||P.type==="PATTERN")&&$.imagePrompt?j=oi(B+", cartoon style, white background, simple, clear").then(z=>(H[$.id]=z,Et(z))):B.length>2?j=It(B).then(z=>(H[$.id]=z,Et(z))):j=Promise.resolve(),R.push(j)}),await Promise.all(R),{puzzle:P,optionImages:H,guessImage:S,assignedVoice:F}},C=async()=>{if(!(T.current||b.current)){T.current=!0;try{console.log("Preloading next puzzle...");const F=await D();b.current=F,console.log("Preload complete")}catch(F){console.warn("Preload failed",F)}finally{T.current=!1}}},_=async()=>{if(o(W.LOADING),a(null),d(null),p(null),h({}),N(""),k(0),b.current){const{puzzle:F,optionImages:P,guessImage:H,assignedVoice:S}=b.current;a(F),h(P),N(H),f(S),b.current=null,o(W.SUCCESS),J(F.question,S),setTimeout(C,1e3);return}try{const F=await D();a(F.puzzle),h(F.optionImages),N(F.guessImage),f(F.assignedVoice),o(W.SUCCESS),J(F.puzzle.question,F.assignedVoice),setTimeout(C,1e3)}catch(F){console.error(F),o(W.ERROR)}},O=F=>{if(m===!0||!l)return;d(F);const P=l.options.find(H=>H.id===F);P!=null&&P.isCorrect?(p(!0),w(Date.now()),J(""+l.explanation,L),n(5,1),r(l)):(p(!1),k(H=>H+1),J("",L))},G=()=>{l!=null&&l.hint?J(l.hint,L):J("",L)};if(s===W.LOADING)return i.jsx("div",{className:"h-64 flex justify-center items-center",children:i.jsx(rn,{text:" (AI)..."})});if(s===W.ERROR)return i.jsx("div",{className:"text-center p-8",children:i.jsx("button",{onClick:_,className:"bg-blue-500 text-white px-4 py-2 rounded-full",children:""})});const q=(l==null?void 0:l.type)==="CLASSIFICATION",V=(l==null?void 0:l.type)==="GUESS_OBJECT";return i.jsxs("div",{className:"max-w-2xl mx-auto flex flex-col h-full min-h-[60vh] pb-10",children:[i.jsx(nr,{trigger:g}),i.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-lg border-b-4 border-indigo-100 mb-6 text-center relative z-10",children:[i.jsx("span",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-indigo-500 text-white px-4 py-1 rounded-full text-xs font-bold shadow-sm",children:V?"":q?"":""}),i.jsx("h2",{className:"text-2xl font-black text-gray-800 leading-snug",children:l==null?void 0:l.question}),i.jsx("button",{onClick:()=>J((l==null?void 0:l.question)||"",L),className:"mt-2 text-indigo-500 text-2xl animate-pulse",children:""})]}),i.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[V&&x&&i.jsxs("div",{className:"w-full h-48 sm:h-64 bg-black rounded-3xl overflow-hidden shadow-inner relative border-4 border-gray-200",children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("img",{src:x,alt:"Guess",className:"w-full h-full object-cover"})}),m&&i.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center animate-fade-in",children:i.jsx("img",{src:x,alt:"Reveal",className:"w-full h-full object-contain p-4"})})]}),i.jsx("div",{className:`grid gap-4 ${q?"grid-cols-2":"grid-cols-1 sm:grid-cols-2"}`,children:l==null?void 0:l.options.map(F=>{const P=u===F.id,H=F.isCorrect,S=c[F.id];return i.jsxs("button",{onClick:()=>O(F.id),className:`
                      relative bg-white rounded-2xl p-4 shadow-md border-4 transition-all transform duration-300 flex flex-col items-center justify-center gap-2 group min-h-[100px]
                      ${P?H?"border-green-500 scale-105 bg-green-50":"border-red-400 shake bg-red-50":"border-white hover:border-indigo-200 hover:-translate-y-1"}
                    `,children:[S?i.jsx("div",{className:"w-32 h-32 object-contain",children:i.jsx("img",{src:S,className:"w-full h-full object-contain rounded-lg",alt:"opt"})}):i.jsx("span",{className:"text-4xl",children:F.content.replace(/[A-Z]\./,"")}),!S&&F.content.length>2&&i.jsx("span",{className:"font-bold text-gray-700",children:F.content}),P&&i.jsx("div",{className:"absolute top-2 right-2 text-2xl",children:H?"":""})]},F.id)})})]}),i.jsxs("div",{className:"mt-8 flex justify-center gap-4 items-center",children:[!m&&i.jsx("button",{onClick:G,className:"bg-yellow-100 text-yellow-700 px-6 py-3 rounded-full font-bold shadow-sm hover:bg-yellow-200 transition-colors flex items-center gap-2",children:" "}),i.jsx("button",{onClick:_,className:`
                px-10 py-3 rounded-full font-black shadow-lg transition-all flex items-center gap-2
                ${m||v>=3?"bg-green-500 text-white hover:bg-green-600 active:scale-95 animate-bounce-in":"bg-gray-100 text-gray-400 hover:bg-gray-200"}
            `,children:" "})]})]})},Eg=0,bg=1,Tg=2,Rg=3,Pg=({difficulty:e,voiceId:t,onUpdateProgress:n,onAddToHistory:r})=>{var B;const[s,o]=y.useState(W.IDLE),[l,a]=y.useState(null),[u,d]=y.useState({x:0,y:0}),[m,p]=y.useState(1),[g,w]=y.useState([]),[v,k]=y.useState([]),[L,f]=y.useState(!1),[c,h]=y.useState(-1),[x,N]=y.useState("IDLE"),[b,T]=y.useState(0),[D,C]=y.useState(null);y.useEffect(()=>{_()},[e]);const _=async()=>{o(W.LOADING),N("IDLE"),w([]),k([]),f(!1),h(-1),C(null),a(null);try{const j=await mm(e);a(j),d(j.start),p(j.start.dir),j.mode==="DEBUG"&&j.brokenCode&&w(j.brokenCode),o(W.SUCCESS),J(j.introText,t)}catch{o(W.ERROR)}},O=j=>{L||x!=="IDLE"||(w(z=>[...z,j]),C(null))},G=()=>{L||x!=="IDLE"||(w(j=>j.slice(0,-1)),C(null))},q=()=>{l&&(d(l.start),p(l.start.dir),N("IDLE"),f(!1),h(-1),k([]),C(null))},V=async()=>{if(L||g.length===0)return;f(!0),N("IDLE"),q(),await new Promise(I=>setTimeout(I,300));let j={x:l.start.x,y:l.start.y},z=l.start.dir,X=new Set;for(let I=0;I<g.length;I++){h(I);const K=g[I];if(await new Promise(ne=>setTimeout(ne,600)),K==="L")z=(z+3)%4;else if(K==="R")z=(z+1)%4;else if(K==="F"){let ne=j.x,se=j.y;z===Eg&&se--,z===bg&&ne++,z===Tg&&se++,z===Rg&&ne--;const ct=l==null?void 0:l.obstacles.some(Dt=>Dt.x===ne&&Dt.y===se),nt=ne<0||ne>=((l==null?void 0:l.gridSize)||0)||se<0||se>=((l==null?void 0:l.gridSize)||0);if(ct||nt){N("CRASH"),J("",t),f(!1);return}if(j={x:ne,y:se},(l==null?void 0:l.mode)==="COLLECTION"&&l.items){const Dt=`${ne},${se}`;l.items.some(dt=>dt.x===ne&&dt.y===se)&&!X.has(Dt)&&(X.add(Dt),k(Array.from(X)))}}d(j),p(z)}const Y=j.x===(l==null?void 0:l.target.x)&&j.y===(l==null?void 0:l.target.y),ae=(l==null?void 0:l.mode)!=="COLLECTION"||l.items&&X.size===l.items.length;Y&&ae?(N("WIN"),T(Date.now()),J("",t),n(10,1),l&&r(l),setTimeout(_,3e3)):(N("CRASH"),Y?ae||J("",t):J("",t)),f(!1)},F=()=>{if(!l)return;const j=[{x:u.x,y:u.y,path:[]}],z=new Set;z.add(`${u.x},${u.y}`);let X=null;for(;j.length>0;){const Y=j.shift();if(Y.x===l.target.x&&Y.y===l.target.y){X=Y.path;break}const ae=[{x:Y.x,y:Y.y-1},{x:Y.x+1,y:Y.y},{x:Y.x,y:Y.y+1},{x:Y.x-1,y:Y.y}];for(const I of ae)if(I.x>=0&&I.x<l.gridSize&&I.y>=0&&I.y<l.gridSize&&!l.obstacles.some(K=>K.x===I.x&&K.y===I.y)){const K=`${I.x},${I.y}`;z.has(K)||(z.add(K),j.push({...I,path:[...Y.path,I]}))}}X?(C(X),J("",t),setTimeout(()=>C(null),3e3)):J("",t)},P=(j,z)=>{var ae;const X=(l==null?void 0:l.theme)==="Space",Y=(l==null?void 0:l.theme)==="Ocean";return j===u.x&&z===u.y?i.jsxs("div",{className:"w-full h-full flex items-center justify-center transition-transform duration-500 z-10 relative",style:{transform:`rotate(${m*90}deg)`},children:[i.jsx("div",{className:"text-3xl filter drop-shadow-md",children:X?"":Y?"":""}),i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/3 animate-pulse",children:i.jsx("div",{className:"w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-b-[10px] border-b-yellow-400 filter drop-shadow-sm"})})]}):(l==null?void 0:l.target.x)===j&&(l==null?void 0:l.target.y)===z?i.jsx("div",{className:"text-3xl animate-bounce",children:X?"":""}):l!=null&&l.obstacles.some(I=>I.x===j&&I.y===z)?i.jsx("div",{className:"text-3xl",children:X?"":Y?"":""}):(l==null?void 0:l.mode)==="COLLECTION"&&((ae=l.items)!=null&&ae.some(I=>I.x===j&&I.y===z))&&!v.includes(`${j},${z}`)?i.jsx("div",{className:"text-2xl animate-pulse",children:""}):D!=null&&D.some(I=>I.x===j&&I.y===z)?i.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400 opacity-60 animate-ping"}):null};if(s===W.LOADING)return i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsx(rn,{text:"..."})});if(!l)return i.jsx("div",{className:"text-center p-8",children:i.jsx("button",{onClick:_,className:"bg-blue-500 text-white px-4 py-2 rounded-full",children:""})});const H=l.theme==="Space",S=l.theme==="Ocean",R=H?"bg-slate-900 border-slate-700":S?"bg-blue-900 border-blue-700":"bg-green-100 border-green-300",$=H?"bg-slate-700 border-slate-600":S?"bg-blue-800 border-blue-600":"bg-white border-green-50";return i.jsxs("div",{className:"flex flex-col h-full min-h-[600px] max-w-4xl mx-auto gap-4 p-2 pb-20",children:[i.jsx(nr,{trigger:b}),i.jsxs("div",{className:"flex justify-between items-center px-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs font-bold px-3 py-1 rounded-full text-white shadow-sm ${l.mode==="DEBUG"?"bg-red-400":l.mode==="COLLECTION"?"bg-purple-400":"bg-blue-400"}`,children:l.mode==="DEBUG"?" ":l.mode==="COLLECTION"?" ":" "}),l.mode==="COLLECTION"&&i.jsxs("span",{className:"text-xs font-bold text-gray-600 bg-white px-2 py-1 rounded-full border",children:[" ",v.length," / ",((B=l.items)==null?void 0:B.length)||0]})]}),i.jsxs("button",{onClick:_,className:"text-gray-400 text-sm hover:text-gray-600 flex items-center gap-1",children:[i.jsx("span",{children:""})," "]})]}),i.jsxs("div",{className:`flex-1 rounded-3xl border-4 p-4 shadow-inner relative overflow-hidden flex items-center justify-center transition-colors duration-500 ${R}`,children:[i.jsx("div",{className:"grid gap-1 p-1 rounded-xl shadow-md transition-all relative z-10",style:{gridTemplateColumns:`repeat(${l.gridSize}, minmax(0, 1fr))`,width:"100%",maxWidth:"350px",aspectRatio:"1/1"},children:Array.from({length:l.gridSize*l.gridSize}).map((j,z)=>{const X=z%l.gridSize,Y=Math.floor(z/l.gridSize);return i.jsx("div",{className:`rounded-lg flex items-center justify-center relative border shadow-sm transition-colors ${$}`,children:P(X,Y)},z)})}),x!=="IDLE"&&i.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-30 animate-fade-in",children:i.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-2xl text-center border-4 border-yellow-400 max-w-xs transform scale-110",children:[i.jsx("p",{className:"text-6xl mb-4",children:x==="WIN"?"":""}),i.jsx("button",{onClick:x==="WIN"?_:q,className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-3 rounded-full font-black shadow-lg hover:scale-105 transition-transform",children:x==="WIN"?"":""})]})})]}),i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex justify-center gap-6",children:[i.jsxs("button",{onClick:()=>O("L"),className:"w-16 h-16 bg-white border-b-4 border-gray-200 rounded-2xl shadow active:border-b-0 active:translate-y-1 text-3xl font-black text-indigo-600 flex flex-col items-center justify-center",children:[i.jsx("span",{children:""}),i.jsx("span",{className:"text-[10px] text-gray-400",children:""})]}),i.jsxs("button",{onClick:()=>O("F"),className:"w-20 h-20 bg-green-500 border-b-4 border-green-700 rounded-2xl shadow-lg active:border-b-0 active:translate-y-1 text-4xl text-white flex flex-col items-center justify-center -mt-2",children:[i.jsx("span",{children:""}),i.jsx("span",{className:"text-[10px] text-green-100",children:""})]}),i.jsxs("button",{onClick:()=>O("R"),className:"w-16 h-16 bg-white border-b-4 border-gray-200 rounded-2xl shadow active:border-b-0 active:translate-y-1 text-3xl font-black text-indigo-600 flex flex-col items-center justify-center",children:[i.jsx("span",{children:""}),i.jsx("span",{className:"text-[10px] text-gray-400",children:""})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-2xl p-3 shadow-lg flex flex-col gap-2",children:[i.jsxs("div",{className:"flex overflow-x-auto gap-2 py-2 px-2 no-scrollbar min-h-[50px] items-center",children:[g.length===0&&i.jsx("span",{className:"text-gray-500 text-sm italic",children:"..."}),g.map((j,z)=>i.jsx("div",{className:`
                            shrink-0 w-10 h-10 rounded-lg flex items-center justify-center font-bold text-lg shadow-sm border-b-2 transition-all
                            ${z===c?"bg-yellow-400 text-black scale-110 border-yellow-600 z-10 ring-2 ring-white":"bg-gray-600 text-white border-gray-700"}
                        `,children:j==="F"?"":j==="L"?"":""},z))]}),i.jsxs("div",{className:"flex justify-between items-center border-t border-gray-700 pt-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:G,className:"text-red-400 text-xs font-bold px-3 py-1.5 bg-gray-700 rounded hover:bg-gray-600",children:" "}),i.jsx("button",{onClick:()=>w([]),className:"text-gray-400 text-xs font-bold px-3 py-1.5 bg-gray-700 rounded hover:bg-gray-600",children:" "})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:F,className:"text-yellow-400 text-xs font-bold px-3 py-1.5 bg-gray-700 rounded hover:bg-gray-600 flex items-center gap-1",children:" "}),i.jsx("button",{onClick:V,disabled:L||g.length===0,className:"bg-green-500 text-white px-6 py-2 rounded-full font-bold shadow hover:bg-green-400 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 transition-all active:scale-95",children:L?"...":" "})]})]})]})]})]})},Ig=({onNavigate:e})=>{const[t,n]=y.useState([]),[r,s]=y.useState("IDLE"),[o,l]=y.useState(0),a=y.useRef(null),u=y.useRef(null),d=y.useRef(null),m=y.useRef(null),p=f=>{const c=new Date().toLocaleTimeString();n(h=>[`[${c}] ${f}`,...h])};y.useEffect(()=>{p(`User Agent: ${navigator.userAgent}`);const f=window.SpeechRecognition||window.webkitSpeechRecognition;return p(`SpeechRecognition Support: ${f?"YES":"NO"}`),()=>{if(w(),m.current)try{m.current.stop()}catch{}}},[]);const g=async()=>{if(r==="LISTENING")return w();s("LISTENING"),p("Starting Hardware Mic Test (getUserMedia)...");try{const f=await navigator.mediaDevices.getUserMedia({audio:!0});d.current=f,p("Hardware Access Granted.");const c=new(window.AudioContext||window.webkitAudioContext);u.current=c;const h=c.createAnalyser();c.createMediaStreamSource(f).connect(h),h.fftSize=256;const N=h.frequencyBinCount,b=new Uint8Array(N),T=()=>{if(!a.current)return;requestAnimationFrame(T),h.getByteFrequencyData(b);let D=0;for(let O=0;O<N;O++)D+=b[O];const C=D/N;l(C);const _=a.current.getContext("2d");if(_){const O=a.current.width,G=a.current.height;_.clearRect(0,0,O,G),_.fillStyle=C>10?"#00ff00":"#333";const q=C/255*O;_.fillRect(0,0,q,G)}};T()}catch(f){p(`Hardware Error: ${f.name}: ${f.message}`),s("ERROR")}},w=()=>{d.current&&(d.current.getTracks().forEach(f=>f.stop()),d.current=null),u.current&&(u.current.close(),u.current=null),s("IDLE"),l(0),p("Mic Test Stopped.")},v=()=>{const f=window.SpeechRecognition||window.webkitSpeechRecognition;if(!f){p("API not supported.");return}w(),p("Stopping HW test... waiting 1000ms..."),setTimeout(()=>{p("Initializing SpeechRecognition...");const c=new f;m.current=c,c.lang="zh-CN",c.continuous=!1,c.interimResults=!0,c.onstart=()=>p("Event: onstart"),c.onaudiostart=()=>p("Event: onaudiostart (Audio Detected)"),c.onsoundstart=()=>p("Event: onsoundstart"),c.onspeechstart=()=>p("Event: onspeechstart"),c.onend=()=>p("Event: onend"),c.onerror=h=>p(`Event: onerror [${h.error}] ${h.message||""}`),c.onresult=h=>{const x=h.results[h.resultIndex],N=x[0].transcript;p(`Event: onresult (${x.isFinal?"Final":"Interim"}): "${N}"`)};try{c.start(),p("Called recognition.start()")}catch(h){p(`Exception calling start(): ${h.message}`)}},1e3)},k=()=>{p("Manually aborting..."),m.current&&m.current.abort(),setTimeout(()=>{p("Manually restarting...");try{m.current.start()}catch(f){p(f.message)}},200)},L=()=>{p("Testing TTS..."),J("","zh-CN-XiaoyuMultilingualNeural")};return i.jsxs("div",{className:"bg-black min-h-screen text-green-400 font-mono p-4 flex flex-col gap-4 overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-green-800 pb-2",children:[i.jsx("h1",{className:"text-xl font-bold",children:"SYSTEM DIAGNOSTICS"}),i.jsx("button",{onClick:()=>e(A.HOME),className:"bg-red-900 text-white px-4 py-1 rounded hover:bg-red-700",children:"EXIT"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"border border-green-800 p-4 rounded bg-gray-900",children:[i.jsx("h3",{className:"font-bold mb-2",children:"1. Hardware (Microphone)"}),i.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Tests if browser can access raw audio stream."}),i.jsx("button",{onClick:g,className:`w-full py-2 mb-2 font-bold ${r==="LISTENING"?"bg-red-600 text-white":"bg-green-700 text-black hover:bg-green-600"}`,children:r==="LISTENING"?"STOP TEST":"START MIC TEST"}),i.jsxs("div",{className:"h-8 bg-gray-800 w-full relative border border-green-900",children:[i.jsx("canvas",{ref:a,className:"w-full h-full",width:300,height:32}),i.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs pointer-events-none text-white mix-blend-difference",children:["VOL: ",o.toFixed(0)]})]})]}),i.jsxs("div",{className:"border border-green-800 p-4 rounded bg-gray-900",children:[i.jsx("h3",{className:"font-bold mb-2",children:"2. Software (Speech API)"}),i.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Tests browser's native recognition engine."}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:v,className:"flex-1 py-2 mb-2 bg-blue-700 text-white font-bold hover:bg-blue-600",children:"START RECOGNITION"}),i.jsx("button",{onClick:k,className:"px-2 py-2 mb-2 bg-yellow-700 text-white font-bold hover:bg-yellow-600",title:"Restart",children:""})]}),i.jsx("p",{className:"text-xs text-yellow-500",children:"Note: Hold tablet close. Speak loudly."})]}),i.jsxs("div",{className:"border border-green-800 p-4 rounded bg-gray-900",children:[i.jsx("h3",{className:"font-bold mb-2",children:"3. Output (Speaker)"}),i.jsx("button",{onClick:L,className:"w-full py-2 bg-purple-700 text-white font-bold hover:bg-purple-600",children:"TEST TTS"})]})]}),i.jsxs("div",{className:"flex-1 border border-green-800 bg-black p-2 overflow-y-auto font-mono text-xs shadow-inner",children:[t.map((f,c)=>i.jsx("div",{className:"mb-1 border-b border-gray-900 pb-1",children:f},c)),t.length===0&&i.jsx("div",{className:"text-gray-600 italic",children:"Ready to test..."})]})]})},Ee={xp:0,level:1,items:0},dl={[A.ENGLISH]:{...Ee},[A.CHINESE]:{...Ee},[A.WRITING]:{...Ee},[A.MATH]:{...Ee},[A.SCIENCE]:{...Ee},[A.GAME]:{...Ee},[A.SCENE]:{...Ee},[A.DRAWING]:{...Ee},[A.LOGIC]:{...Ee},[A.PROGRAMMING]:{...Ee}},Mg=100,Dg=()=>{const[e,t]=y.useState(A.HOME),[n,r]=y.useState(dl),[s,o]=y.useState(3),[l,a]=y.useState("RANDOM"),[u,d]=y.useState([]),[m,p]=y.useState(!1),[g,w]=y.useState(void 0),[v,k]=y.useState(void 0),[L,f]=y.useState(0);y.useEffect(()=>{const C=localStorage.getItem("kid_app_progress");if(C)try{const G=JSON.parse(C);G[A.WRITING]||(G[A.WRITING]={...Ee}),G[A.DRAWING]||(G[A.DRAWING]={...Ee}),G[A.MATH]||(G[A.MATH]={...Ee}),G[A.LOGIC]||(G[A.LOGIC]={...Ee}),G[A.PROGRAMMING]||(G[A.PROGRAMMING]={...Ee}),r(q=>({...q,...G}))}catch(G){console.error("Failed to load progress",G)}const _=localStorage.getItem("kid_app_history");if(_)try{d(JSON.parse(_))}catch(G){console.error("Failed to load history",G)}const O=localStorage.getItem("kid_app_age");O&&o(parseInt(O,10)),lf()},[]),y.useEffect(()=>{localStorage.setItem("kid_app_progress",JSON.stringify(n))},[n]),y.useEffect(()=>{localStorage.setItem("kid_app_history",JSON.stringify(u))},[u]),y.useEffect(()=>{localStorage.setItem("kid_app_age",s.toString())},[s]);const c=(C,_,O=0)=>{r(G=>{const q=G[C]||{...Ee},V=q.xp+_,F=Math.floor(V/Mg)+1;return{...G,[C]:{xp:V,level:F,items:q.items+O}}})},h=()=>{r(dl),localStorage.setItem("kid_app_progress",JSON.stringify(dl))},x=C=>{const _={...C,id:Date.now().toString()+Math.random().toString().slice(2,6),timestamp:Date.now()};d(O=>[_,...O].slice(0,100))},N=C=>{C.type==="FLASHCARD"&&C.mode?(w(C.data),k(void 0),t(C.mode)):C.type==="SCIENCE"&&(k(C.data),w(void 0),t(A.SCIENCE)),f(_=>_+1)},b=C=>{C!==e&&(w(void 0),k(void 0),f(_=>_+1)),t(C)},T=Object.values(n).reduce((C,_)=>C+((_==null?void 0:_.xp)||0),0),D=()=>{switch(e){case A.HOME:return i.jsx(Tu,{onNavigate:b,progress:n});case A.DIAGNOSTICS:return i.jsx(Ig,{onNavigate:b});case A.ENGLISH:return i.jsx(Gu,{mode:A.ENGLISH,difficulty:s,voiceId:l,onUpdateProgress:(C,_)=>c(A.ENGLISH,C,_),initialData:g,onAddToHistory:C=>x({type:"FLASHCARD",mode:A.ENGLISH,data:C,preview:C.word}),history:u},`english-${L}`);case A.CHINESE:return i.jsx(Gu,{mode:A.CHINESE,difficulty:s,voiceId:l,onUpdateProgress:(C,_)=>c(A.CHINESE,C,_),initialData:g,onAddToHistory:C=>x({type:"FLASHCARD",mode:A.CHINESE,data:C,preview:C.word}),history:u},`chinese-${L}`);case A.WRITING:return i.jsx(Cg,{difficulty:s,voiceId:l,onUpdateProgress:(C,_)=>c(A.WRITING,C,_),onAddToHistory:C=>x({type:"WRITING",data:C,preview:C.char})},`writing-${L}`);case A.MATH:return i.jsx(_g,{difficulty:s,voiceId:l,onUpdateProgress:(C,_)=>c(A.MATH,C,_),onAddToHistory:C=>x({type:"MATH",data:C,preview:C.question})},`math-${L}`);case A.SCIENCE:return i.jsx(wg,{difficulty:s,voiceId:l,onUpdateProgress:(C,_)=>c(A.SCIENCE,C,_),initialData:v,onAddToHistory:C=>x({type:"SCIENCE",data:C,preview:C.question||C.topic})},`science-${L}`);case A.GAME:return i.jsx(Sg,{history:u,difficulty:s,voiceId:l,onUpdateProgress:(C,_)=>c(A.GAME,C,_),onNavigate:b},`game-${L}`);case A.SCENE:return i.jsx(kg,{voiceId:l,onUpdateProgress:(C,_)=>c(A.SCENE,C,_)},`scene-${L}`);case A.DRAWING:return i.jsx(Ng,{difficulty:s,voiceId:l,onUpdateProgress:(C,_)=>c(A.DRAWING,C,_),onAddToHistory:C=>x({type:"DRAWING",data:C,preview:C.topic})},`drawing-${L}`);case A.LOGIC:return i.jsx(jg,{difficulty:s,voiceId:l,onUpdateProgress:(C,_)=>c(A.LOGIC,C,_),onAddToHistory:C=>x({type:"LOGIC",data:C,preview:C.question})},`logic-${L}`);case A.PROGRAMMING:return i.jsx(Pg,{difficulty:s,voiceId:l,onUpdateProgress:(C,_)=>c(A.PROGRAMMING,C,_),onAddToHistory:C=>x({type:"PROGRAMMING",data:C,preview:"Coding Level"})},`prog-${L}`);default:return i.jsx(Tu,{onNavigate:b,progress:n})}};return i.jsxs(i.Fragment,{children:[i.jsx(em,{currentView:e,onNavigate:b,score:T,age:s,onSetAge:o,voiceId:l,onSetVoiceId:a,onOpenHistory:()=>p(!0),children:D()}),i.jsx(tm,{isOpen:m,onClose:()=>p(!1),history:u,onRestore:N,onClear:()=>d([]),onResetProgress:h})]})},Cf=document.getElementById("root");if(!Cf)throw new Error("Could not find root element to mount to");const Lg=fl.createRoot(Cf);Lg.render(i.jsx(Uf.StrictMode,{children:i.jsx(Dg,{})}));
